[{"filePath":"/home/runner/work/Appsuite-ITSM-Management/Appsuite-ITSM-Management/WebUI-Production/js/api.js","messages":[{"ruleId":"no-undef","severity":1,"message":"'cryptoHelper' is not defined.","line":19,"column":35,"messageId":"undef","endLine":19,"endColumn":47},{"ruleId":"no-undef","severity":1,"message":"'cryptoHelper' is not defined.","line":44,"column":37,"messageId":"undef","endLine":44,"endColumn":49},{"ruleId":"no-undef","severity":1,"message":"'cryptoHelper' is not defined.","line":77,"column":38,"messageId":"undef","endLine":77,"endColumn":50},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 12.","line":331,"column":1,"messageId":"wrongIndentation","endLine":331,"endColumn":13,"fix":{"range":[10442,10454],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 16.","line":332,"column":1,"messageId":"wrongIndentation","endLine":332,"endColumn":17,"fix":{"range":[10469,10485],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 16.","line":333,"column":1,"messageId":"wrongIndentation","endLine":333,"endColumn":17,"fix":{"range":[10542,10558],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 12.","line":334,"column":1,"messageId":"wrongIndentation","endLine":334,"endColumn":13,"fix":{"range":[10565,10577],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 16.","line":335,"column":1,"messageId":"wrongIndentation","endLine":335,"endColumn":17,"fix":{"range":[10591,10607],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 16.","line":336,"column":1,"messageId":"wrongIndentation","endLine":336,"endColumn":17,"fix":{"range":[10669,10685],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 12.","line":337,"column":1,"messageId":"wrongIndentation","endLine":337,"endColumn":13,"fix":{"range":[10692,10704],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 16.","line":338,"column":1,"messageId":"wrongIndentation","endLine":338,"endColumn":17,"fix":{"range":[10719,10735],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 16.","line":339,"column":1,"messageId":"wrongIndentation","endLine":339,"endColumn":17,"fix":{"range":[10776,10792],"text":"            "}},{"ruleId":"no-undef","severity":1,"message":"'location' is not defined.","line":716,"column":13,"messageId":"undef","endLine":716,"endColumn":21},{"ruleId":"no-undef","severity":1,"message":"'location' is not defined.","line":717,"column":13,"messageId":"undef","endLine":717,"endColumn":21},{"ruleId":"no-undef","severity":1,"message":"'location' is not defined.","line":718,"column":13,"messageId":"undef","endLine":718,"endColumn":21},{"ruleId":"no-unused-vars","severity":1,"message":"'initApiSync' is defined but never used.","line":1041,"column":10,"messageId":"unusedVar","endLine":1041,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"initApiSync"},"fix":{"range":[31764,31819],"text":""},"desc":"Remove unused variable 'initApiSync'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'toggleApiKey' is defined but never used.","line":1082,"column":10,"messageId":"unusedVar","endLine":1082,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"toggleApiKey"},"fix":{"range":[32870,33016],"text":""},"desc":"Remove unused variable 'toggleApiKey'."}]}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":9,"fixableWarningCount":0,"source":"/**\n * AppSuite ç®¡ç†é‹ç”¨ã‚·ã‚¹ãƒ†ãƒ  - APIé€£æºãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«\n */\n\nconst ApiConfig = {\n    baseUrl: '',\n    apiKey: '',\n    authMethod: 'bearer',\n    timeout: 30000,\n    encryptionPassword: null, // æš—å·åŒ–ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼ˆãƒ¡ãƒ¢ãƒªã®ã¿ä¿æŒï¼‰\n\n    /**\n     * APIè¨­å®šã‚’æš—å·åŒ–ã—ã¦ä¿å­˜ï¼ˆæ¨å¥¨ï¼‰\n     * @param {string} encryptionPassword - æš—å·åŒ–ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰\n     */\n    async saveEncrypted(encryptionPassword) {\n        // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¼·åº¦ãƒã‚§ãƒƒã‚¯\n        if (typeof cryptoHelper !== 'undefined') {\n            const strengthCheck = cryptoHelper.checkPasswordStrength(encryptionPassword);\n            if (!strengthCheck.valid) {\n                throw new Error(\n                    `æš—å·åŒ–ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒä¸ååˆ†ã§ã™: ${strengthCheck.messages.join(', ')}`\n                );\n            }\n        }\n\n        this.baseUrl = document.getElementById('apiUrl')?.value || this.baseUrl;\n        this.apiKey = document.getElementById('apiKey')?.value || this.apiKey;\n        this.authMethod = document.getElementById('authMethod')?.value || this.authMethod;\n        this.timeout =\n            parseInt(document.getElementById('timeout')?.value || this.timeout / 1000) * 1000;\n\n        const config = {\n            baseUrl: this.baseUrl,\n            apiKey: this.apiKey,\n            authMethod: this.authMethod,\n            timeout: this.timeout,\n            savedAt: new Date().toISOString(),\n            version: '2.0.0', // æš—å·åŒ–ç‰ˆ\n        };\n\n        // JSONæ–‡å­—åˆ—åŒ– â†’ æš—å·åŒ–\n        const configJson = JSON.stringify(config);\n        const encryptedData = await cryptoHelper.encrypt(configJson, encryptionPassword);\n\n        // sessionStorageã«ä¿å­˜ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ã‚¯ãƒ­ãƒ¼ã‚ºã§è‡ªå‹•å‰Šé™¤ï¼‰\n        sessionStorage.setItem('appsuite_api_config_encrypted', encryptedData);\n\n        // æš—å·åŒ–ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ãƒ¡ãƒ¢ãƒªã«ä¿æŒï¼ˆã‚»ãƒƒã‚·ãƒ§ãƒ³å†…ã®ã¿ï¼‰\n        this.encryptionPassword = encryptionPassword;\n\n        // æ—§localStorageè¨­å®šã‚’å‰Šé™¤ï¼ˆç§»è¡Œï¼‰\n        if (localStorage.getItem('appsuite_api_config')) {\n            localStorage.removeItem('appsuite_api_config');\n            console.log('âœ… æ—§APIè¨­å®šï¼ˆlocalStorageï¼‰ã‚’å‰Šé™¤ã—ã¾ã—ãŸ');\n        }\n\n        showToast('APIè¨­å®šã‚’æš—å·åŒ–ã—ã¦ä¿å­˜ã—ã¾ã—ãŸï¼ˆã‚»ã‚­ãƒ¥ã‚¢ï¼‰', 'success');\n        console.log('âœ… APIè¨­å®šã‚’æš—å·åŒ–ã—ã¦ä¿å­˜ã—ã¾ã—ãŸï¼ˆsessionStorageï¼‰');\n    },\n\n    /**\n     * APIè¨­å®šã‚’å¾©å·åŒ–ã—ã¦èª­è¾¼\n     * @param {string} encryptionPassword - å¾©å·åŒ–ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰\n     * @returns {Promise<boolean>} æˆåŠŸæ™‚true\n     */\n    async loadEncrypted(encryptionPassword) {\n        const encryptedData = sessionStorage.getItem('appsuite_api_config_encrypted');\n\n        if (!encryptedData) {\n            console.warn('âš ï¸ æš—å·åŒ–ã•ã‚ŒãŸè¨­å®šãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');\n            return false;\n        }\n\n        try {\n            // å¾©å·åŒ–\n            const configJson = await cryptoHelper.decrypt(encryptedData, encryptionPassword);\n            const config = JSON.parse(configJson);\n\n            // è¨­å®šã‚’å¾©å…ƒ\n            this.baseUrl = config.baseUrl || '';\n            this.apiKey = config.apiKey || '';\n            this.authMethod = config.authMethod || 'bearer';\n            this.timeout = config.timeout || 30000;\n            this.encryptionPassword = encryptionPassword;\n\n            // UIã«åæ˜ \n            if (document.getElementById('apiUrl')) {\n                document.getElementById('apiUrl').value = this.baseUrl;\n            }\n            if (document.getElementById('authMethod')) {\n                document.getElementById('authMethod').value = this.authMethod;\n            }\n            if (document.getElementById('timeout')) {\n                document.getElementById('timeout').value = this.timeout / 1000;\n            }\n            if (document.getElementById('apiKeyMasked')) {\n                document.getElementById('apiKeyMasked').textContent = this.getApiKeyMasked();\n            }\n\n            showToast('APIè¨­å®šã‚’èª­è¾¼ã¿ã¾ã—ãŸ', 'success');\n            console.log('âœ… APIè¨­å®šã‚’å¾©å·åŒ–ã—ã¦èª­è¾¼ã¿ã¾ã—ãŸ');\n            return true;\n        } catch (error) {\n            console.error('âŒ å¾©å·åŒ–å¤±æ•—', error);\n            showToast('å¾©å·åŒ–ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚', 'error');\n            throw error;\n        }\n    },\n\n    /**\n     * APIã‚­ãƒ¼ã‚’å–å¾—ï¼ˆãƒã‚¹ã‚­ãƒ³ã‚°è¡¨ç¤ºç”¨ï¼‰\n     * @returns {string}\n     */\n    getApiKeyMasked() {\n        if (!this.apiKey) {\n            return 'æœªè¨­å®š';\n        }\n        if (this.apiKey.length <= 8) {\n            return '****';\n        }\n        // æœ€åˆã®4æ–‡å­—ã¨æœ€å¾Œã®4æ–‡å­—ã®ã¿è¡¨ç¤º\n        const first = this.apiKey.slice(0, 4);\n        const last = this.apiKey.slice(-4);\n        return `${first}${'*'.repeat(Math.max(0, this.apiKey.length - 8))}${last}`;\n    },\n\n    /**\n     * è¨­å®šã‚’ã‚¯ãƒªã‚¢\n     */\n    clear() {\n        sessionStorage.removeItem('appsuite_api_config_encrypted');\n        localStorage.removeItem('appsuite_api_config'); // æ—§è¨­å®šã‚‚å‰Šé™¤\n        this.encryptionPassword = null;\n        this.baseUrl = '';\n        this.apiKey = '';\n        this.authMethod = 'bearer';\n        this.timeout = 30000;\n\n        showToast('APIè¨­å®šã‚’ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸ', 'info');\n        console.log('âœ… APIè¨­å®šã‚’ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸ');\n    },\n\n    /**\n     * è‡ªå‹•ãƒ­ãƒƒã‚¯æ©Ÿèƒ½ï¼ˆä¸€å®šæ™‚é–“å¾Œã«è¨­å®šã‚’ã‚¯ãƒªã‚¢ï¼‰\n     * @param {number} minutes - è‡ªå‹•ãƒ­ãƒƒã‚¯ã¾ã§ã®åˆ†æ•°ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 30åˆ†ï¼‰\n     */\n    enableAutoLock(minutes = 30) {\n        const lockTime = minutes * 60 * 1000;\n\n        // æ—¢å­˜ã®ã‚¿ã‚¤ãƒãƒ¼ã‚’ã‚¯ãƒªã‚¢\n        if (this.autoLockTimer) {\n            clearTimeout(this.autoLockTimer);\n        }\n\n        this.autoLockTimer = setTimeout(() => {\n            console.warn('âš ï¸ è‡ªå‹•ãƒ­ãƒƒã‚¯: APIè¨­å®šã‚’ã‚¯ãƒªã‚¢ã—ã¾ã™');\n            this.clear();\n            // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«é€šçŸ¥\n            showToast('ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®ãŸã‚ã€APIè¨­å®šãŒã‚¯ãƒªã‚¢ã•ã‚Œã¾ã—ãŸã€‚', 'warning');\n        }, lockTime);\n\n        console.log(`ğŸ”’ è‡ªå‹•ãƒ­ãƒƒã‚¯ã‚’æœ‰åŠ¹åŒ–ã—ã¾ã—ãŸï¼ˆ${minutes}åˆ†å¾Œï¼‰`);\n    },\n\n    /**\n     * æ—§localStorageè¨­å®šã‹ã‚‰æš—å·åŒ–ç‰ˆã¸ã®ç§»è¡Œ\n     * @param {string} encryptionPassword - æš—å·åŒ–ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰\n     */\n    async migrateToEncrypted(encryptionPassword) {\n        const oldConfig = localStorage.getItem('appsuite_api_config');\n\n        if (!oldConfig) {\n            console.log('ç§»è¡Œå¯¾è±¡ã®æ—§è¨­å®šãŒã‚ã‚Šã¾ã›ã‚“');\n            return false;\n        }\n\n        try {\n            const config = JSON.parse(oldConfig);\n\n            if (!config.apiKey) {\n                console.log('APIã‚­ãƒ¼ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„ãŸã‚ç§»è¡Œä¸è¦');\n                return false;\n            }\n\n            // æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚’å¾©å…ƒ\n            this.baseUrl = config.baseUrl;\n            this.apiKey = config.apiKey;\n            this.authMethod = config.authMethod || 'bearer';\n            this.timeout = config.timeout || 30000;\n\n            // æš—å·åŒ–ã—ã¦ä¿å­˜\n            await this.saveEncrypted(encryptionPassword);\n\n            console.log('âœ… æ—§APIè¨­å®šã‹ã‚‰æš—å·åŒ–ç‰ˆã¸ã®ç§»è¡Œå®Œäº†');\n            return true;\n        } catch (error) {\n            console.error('ç§»è¡Œå¤±æ•—', error);\n            throw error;\n        }\n    },\n\n    save() {\n        this.baseUrl = document.getElementById('apiUrl').value;\n        this.apiKey = document.getElementById('apiKey').value;\n        this.authMethod = document.getElementById('authMethod').value;\n        this.timeout = parseInt(document.getElementById('timeout').value) * 1000;\n\n        localStorage.setItem(\n            'appsuite_api_config',\n            JSON.stringify({\n                baseUrl: this.baseUrl,\n                apiKey: this.apiKey,\n                authMethod: this.authMethod,\n                timeout: this.timeout,\n            })\n        );\n\n        showToast('APIè¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸ', 'success');\n    },\n\n    load() {\n        const savedSettings = localStorage.getItem('appsuiteSettings');\n        if (savedSettings) {\n            const settings = JSON.parse(savedSettings);\n            const api = settings.api || {};\n            this.baseUrl = api.url || '';\n            this.apiKey = api.key || '';\n            this.authMethod = api.authMethod || 'bearer';\n            this.timeout = (api.timeout || 30) * 1000;\n            return;\n        }\n\n        const saved = localStorage.getItem('appsuite_api_config');\n        if (saved) {\n            const config = JSON.parse(saved);\n            this.baseUrl = config.baseUrl || '';\n            this.apiKey = config.apiKey || '';\n            this.authMethod = config.authMethod || 'bearer';\n            this.timeout = config.timeout || 30000;\n        }\n    },\n\n    async test() {\n        if (!this.baseUrl) {\n            showToast('API URLã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');\n            return;\n        }\n\n        try {\n            showToast('æ¥ç¶šãƒ†ã‚¹ãƒˆä¸­...', 'info');\n            // å®Ÿéš›ã®APIæ¥ç¶šãƒ†ã‚¹ãƒˆï¼ˆãƒ‡ãƒ¢ã§ã¯ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆï¼‰\n            await new Promise(resolve => setTimeout(resolve, 1000));\n\n            updateConnectionStatus(true);\n            document.getElementById('apiStatus').textContent = 'æ¥ç¶šä¸­';\n            document.getElementById('apiStatus').style.color = '#22c55e';\n            document.getElementById('lastSync').textContent = new Date().toLocaleString('ja-JP');\n            document.getElementById('apiVersion').textContent = 'V7.5';\n\n            showToast('æ¥ç¶šæˆåŠŸï¼', 'success');\n        } catch (error) {\n            updateConnectionStatus(false);\n            document.getElementById('apiStatus').textContent = 'æ¥ç¶šã‚¨ãƒ©ãƒ¼';\n            document.getElementById('apiStatus').style.color = '#ef4444';\n            showToast('æ¥ç¶šå¤±æ•—: ' + error.message, 'error');\n        }\n    },\n};\n\n// APIé€šä¿¡ã‚¯ãƒ©ã‚¹\nconst Api = {\n    async get(endpoint, params = {}) {\n        return this.request('GET', endpoint, params);\n    },\n\n    async post(endpoint, data = {}) {\n        return this.request('POST', endpoint, data);\n    },\n\n    async put(endpoint, data = {}) {\n        return this.request('PUT', endpoint, data);\n    },\n\n    async delete(endpoint) {\n        return this.request('DELETE', endpoint);\n    },\n\n    async request(method, endpoint, data = {}) {\n        const url = new URL(endpoint, ApiConfig.baseUrl);\n\n        const options = {\n            method: method,\n            headers: this.getHeaders(),\n        };\n\n        if (method === 'GET' && Object.keys(data).length > 0) {\n            Object.keys(data).forEach(key => url.searchParams.append(key, data[key]));\n        } else if (method !== 'GET') {\n            options.body = JSON.stringify(data);\n        }\n\n        const controller = new AbortController();\n        const timeoutId = setTimeout(() => controller.abort(), ApiConfig.timeout);\n        options.signal = controller.signal;\n\n        try {\n            const response = await fetch(url, options);\n            clearTimeout(timeoutId);\n\n            if (!response.ok) {\n                throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n            }\n\n            return await response.json();\n        } catch (error) {\n            if (error.name === 'AbortError') {\n                throw new Error('ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸ');\n            }\n            throw error;\n        }\n    },\n\n    getHeaders() {\n        const headers = {\n            'Content-Type': 'application/json',\n            Accept: 'application/json',\n        };\n\n        switch (ApiConfig.authMethod) {\n            case 'bearer':\n                headers['Authorization'] = `Bearer ${ApiConfig.apiKey}`;\n                break;\n            case 'basic':\n                headers['Authorization'] = `Basic ${btoa(ApiConfig.apiKey)}`;\n                break;\n            case 'apikey':\n                headers['X-API-Key'] = ApiConfig.apiKey;\n                break;\n        }\n\n        return headers;\n    },\n};\n\n// ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢ï¼ˆæ°¸ç¶šåŒ–å¯¾å¿œï¼‰\nconst DataStore = {\n    // ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚­ãƒ¼\n    STORAGE_KEYS: {\n        users: 'appsuite_users',\n        apps: 'appsuite_apps',\n        incidents: 'appsuite_incidents',\n        changes: 'appsuite_changes',\n        logs: 'appsuite_logs',\n    },\n\n    // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ‡ãƒ¼ã‚¿\n    _defaults: {\n        users: [\n            {\n                id: 'U0000',\n                username: 'admin',\n                email: 'admin@example.com',\n                department: 'æƒ…å ±ã‚·ã‚¹ãƒ†ãƒ éƒ¨',\n                role: 'ç®¡ç†è€…',\n                status: 'active',\n                lastLogin: '2026-01-23 22:00',\n                passwordHash: 'admin', // adminï¼ˆãƒ‡ãƒ¢ç’°å¢ƒï¼šå¹³æ–‡ã€æœ¬ç•ªç’°å¢ƒï¼šè¦ãƒãƒƒã‚·ãƒ¥åŒ–ï¼‰\n            },\n            {\n                id: 'U0001',\n                username: 'å±±ç”°å¤ªéƒ',\n                email: 'yamada@example.com',\n                department: 'æƒ…å ±ã‚·ã‚¹ãƒ†ãƒ éƒ¨',\n                role: 'ç®¡ç†è€…',\n                status: 'active',\n                lastLogin: '2026-01-19 09:30',\n                passwordHash: 'demo', // demoï¼ˆãƒ‡ãƒ¢ç’°å¢ƒï¼šå¹³æ–‡ã€æœ¬ç•ªç’°å¢ƒï¼šè¦ãƒãƒƒã‚·ãƒ¥åŒ–ï¼‰\n            },\n            {\n                id: 'U0002',\n                username: 'éˆ´æœ¨èŠ±å­',\n                email: 'suzuki@example.com',\n                department: 'å–¶æ¥­éƒ¨',\n                role: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼',\n                status: 'active',\n                lastLogin: '2026-01-19 08:45',\n                passwordHash: 'demo', // demoï¼ˆãƒ‡ãƒ¢ç’°å¢ƒï¼šå¹³æ–‡ã€æœ¬ç•ªç’°å¢ƒï¼šè¦ãƒãƒƒã‚·ãƒ¥åŒ–ï¼‰\n            },\n            {\n                id: 'U0003',\n                username: 'ä½è—¤ä¸€éƒ',\n                email: 'sato@example.com',\n                department: 'ç·å‹™éƒ¨',\n                role: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼',\n                status: 'active',\n                lastLogin: '2026-01-18 17:20',\n                passwordHash: 'demo', // demoï¼ˆãƒ‡ãƒ¢ç’°å¢ƒï¼šå¹³æ–‡ã€æœ¬ç•ªç’°å¢ƒï¼šè¦ãƒãƒƒã‚·ãƒ¥åŒ–ï¼‰\n            },\n            {\n                id: 'U0004',\n                username: 'ç”°ä¸­ç¾å’²',\n                email: 'tanaka@example.com',\n                department: 'é–‹ç™ºéƒ¨',\n                role: 'ç®¡ç†è€…',\n                status: 'active',\n                lastLogin: '2026-01-19 10:15',\n                passwordHash: 'demo', // demoï¼ˆãƒ‡ãƒ¢ç’°å¢ƒï¼šå¹³æ–‡ã€æœ¬ç•ªç’°å¢ƒï¼šè¦ãƒãƒƒã‚·ãƒ¥åŒ–ï¼‰\n            },\n            {\n                id: 'U0005',\n                username: 'é«˜æ©‹å¥äºŒ',\n                email: 'takahashi@example.com',\n                department: 'æƒ…å ±ã‚·ã‚¹ãƒ†ãƒ éƒ¨',\n                role: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼',\n                status: 'inactive',\n                lastLogin: '2026-01-10 14:00',\n                passwordHash: 'demo', // demoï¼ˆãƒ‡ãƒ¢ç’°å¢ƒï¼šå¹³æ–‡ã€æœ¬ç•ªç’°å¢ƒï¼šè¦ãƒãƒƒã‚·ãƒ¥åŒ–ï¼‰\n            },\n            {\n                id: 'U0006',\n                username: 'ä¼Šè—¤çœŸç”±',\n                email: 'ito@example.com',\n                department: 'çµŒç†éƒ¨',\n                role: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼',\n                status: 'active',\n                lastLogin: '2026-01-19 09:00',\n                passwordHash: 'demo', // demoï¼ˆãƒ‡ãƒ¢ç’°å¢ƒï¼šå¹³æ–‡ã€æœ¬ç•ªç’°å¢ƒï¼šè¦ãƒãƒƒã‚·ãƒ¥åŒ–ï¼‰\n            },\n            {\n                id: 'U0007',\n                username: 'æ¸¡è¾ºå¤§è¼”',\n                email: 'watanabe@example.com',\n                department: 'å–¶æ¥­éƒ¨',\n                role: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼',\n                status: 'active',\n                lastLogin: '2026-01-18 16:30',\n                passwordHash: 'demo', // demoï¼ˆãƒ‡ãƒ¢ç’°å¢ƒï¼šå¹³æ–‡ã€æœ¬ç•ªç’°å¢ƒï¼šè¦ãƒãƒƒã‚·ãƒ¥åŒ–ï¼‰\n            },\n        ],\n        apps: [\n            {\n                id: 'APP001',\n                name: 'å‹¤æ€ ç®¡ç†',\n                category: 'æ¥­å‹™ç®¡ç†',\n                creator: 'å±±ç”°å¤ªéƒ',\n                records: 1250,\n                status: 'active',\n                updated: '2026-01-19',\n            },\n            {\n                id: 'APP002',\n                name: 'çµŒè²»ç²¾ç®—ç”³è«‹',\n                category: 'ç”³è«‹ãƒ»æ‰¿èª',\n                creator: 'ç”°ä¸­ç¾å’²',\n                records: 856,\n                status: 'active',\n                updated: '2026-01-18',\n            },\n            {\n                id: 'APP003',\n                name: 'é¡§å®¢ç®¡ç†',\n                category: 'ãƒ‡ãƒ¼ã‚¿ç®¡ç†',\n                creator: 'éˆ´æœ¨èŠ±å­',\n                records: 3420,\n                status: 'active',\n                updated: '2026-01-19',\n            },\n            {\n                id: 'APP004',\n                name: 'å‚™å“è²¸å‡ºç®¡ç†',\n                category: 'æ¥­å‹™ç®¡ç†',\n                creator: 'ä½è—¤ä¸€éƒ',\n                records: 234,\n                status: 'active',\n                updated: '2026-01-17',\n            },\n            {\n                id: 'APP005',\n                name: 'ä¼‘æš‡ç”³è«‹',\n                category: 'ç”³è«‹ãƒ»æ‰¿èª',\n                creator: 'å±±ç”°å¤ªéƒ',\n                records: 567,\n                status: 'active',\n                updated: '2026-01-16',\n            },\n            {\n                id: 'APP006',\n                name: 'ä¼šè­°å®¤äºˆç´„',\n                category: 'æ¥­å‹™ç®¡ç†',\n                creator: 'ç”°ä¸­ç¾å’²',\n                records: 1890,\n                status: 'maintenance',\n                updated: '2026-01-15',\n            },\n            {\n                id: 'APP007',\n                name: 'åœ¨åº«ç®¡ç†',\n                category: 'ãƒ‡ãƒ¼ã‚¿ç®¡ç†',\n                creator: 'é«˜æ©‹å¥äºŒ',\n                records: 4521,\n                status: 'active',\n                updated: '2026-01-19',\n            },\n        ],\n        incidents: [\n            {\n                id: 'INC001',\n                title: 'å‹¤æ€ ç®¡ç†ã‚¢ãƒ—ãƒªã§ãƒ‡ãƒ¼ã‚¿ãŒä¿å­˜ã•ã‚Œãªã„',\n                appId: 'APP001',\n                appName: 'å‹¤æ€ ç®¡ç†',\n                priority: 'high',\n                status: 'in_progress',\n                reporter: 'éˆ´æœ¨èŠ±å­',\n                assignee: 'å±±ç”°å¤ªéƒ',\n                created: '2026-01-19',\n                description: 'å‡ºå‹¤æ‰“åˆ»å¾Œã€ãƒ‡ãƒ¼ã‚¿ãŒä¿å­˜ã•ã‚Œãšã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹',\n            },\n            {\n                id: 'INC002',\n                title: 'çµŒè²»ç²¾ç®—ã®æ‰¿èªãƒœã‚¿ãƒ³ãŒåå¿œã—ãªã„',\n                appId: 'APP002',\n                appName: 'çµŒè²»ç²¾ç®—ç”³è«‹',\n                priority: 'medium',\n                status: 'open',\n                reporter: 'ä½è—¤ä¸€éƒ',\n                assignee: '-',\n                created: '2026-01-19',\n                description: 'æ‰¿èªãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚‚ä½•ã‚‚èµ·ã“ã‚‰ãªã„',\n            },\n            {\n                id: 'INC003',\n                title: 'é¡§å®¢æ¤œç´¢ãŒé…ã„',\n                appId: 'APP003',\n                appName: 'é¡§å®¢ç®¡ç†',\n                priority: 'low',\n                status: 'resolved',\n                reporter: 'æ¸¡è¾ºå¤§è¼”',\n                assignee: 'ç”°ä¸­ç¾å’²',\n                created: '2026-01-18',\n                description: 'æ¤œç´¢ã«10ç§’ä»¥ä¸Šã‹ã‹ã‚‹ã“ã¨ãŒã‚ã‚‹',\n            },\n            {\n                id: 'INC004',\n                title: 'ä¼šè­°å®¤äºˆç´„ã®è¡¨ç¤ºã‚¨ãƒ©ãƒ¼',\n                appId: 'APP006',\n                appName: 'ä¼šè­°å®¤äºˆç´„',\n                priority: 'medium',\n                status: 'closed',\n                reporter: 'ä¼Šè—¤çœŸç”±',\n                assignee: 'é«˜æ©‹å¥äºŒ',\n                created: '2026-01-17',\n                description: 'äºˆç´„ä¸€è¦§ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œãªã„å•é¡Œ',\n            },\n        ],\n        changes: [\n            {\n                id: 'CHG001',\n                title: 'å‹¤æ€ ç®¡ç†ã«æ®‹æ¥­ç”³è«‹æ©Ÿèƒ½ã‚’è¿½åŠ ',\n                appId: 'APP001',\n                appName: 'å‹¤æ€ ç®¡ç†',\n                type: 'feature',\n                status: 'approved',\n                requester: 'ä½è—¤ä¸€éƒ',\n                scheduled: '2026-02-01',\n                description: 'æ®‹æ¥­æ™‚é–“ã®äº‹å‰ç”³è«‹ãƒ»æ‰¿èªæ©Ÿèƒ½ã‚’è¿½åŠ ã—ãŸã„',\n            },\n            {\n                id: 'CHG002',\n                title: 'çµŒè²»ç²¾ç®—ã®é ˜åæ›¸ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½æ”¹å–„',\n                appId: 'APP002',\n                appName: 'çµŒè²»ç²¾ç®—ç”³è«‹',\n                type: 'improvement',\n                status: 'in_progress',\n                requester: 'éˆ´æœ¨èŠ±å­',\n                scheduled: '2026-01-25',\n                description: 'è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸€æ‹¬ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã«å¯¾å¿œ',\n            },\n            {\n                id: 'CHG003',\n                title: 'é¡§å®¢ç®¡ç†ã®æ¤œç´¢æ¡ä»¶è¿½åŠ ',\n                appId: 'APP003',\n                appName: 'é¡§å®¢ç®¡ç†',\n                type: 'modification',\n                status: 'pending',\n                requester: 'æ¸¡è¾ºå¤§è¼”',\n                scheduled: '2026-02-10',\n                description: 'å–å¼•å…ˆæ‹…å½“è€…ã§ã®æ¤œç´¢ã‚’å¯èƒ½ã«ã—ãŸã„',\n            },\n            {\n                id: 'CHG004',\n                title: 'åœ¨åº«ç®¡ç†ã®ãƒãƒ¼ã‚³ãƒ¼ãƒ‰èª­å–ä¸å…·åˆä¿®æ­£',\n                appId: 'APP007',\n                appName: 'åœ¨åº«ç®¡ç†',\n                type: 'bugfix',\n                status: 'completed',\n                requester: 'é«˜æ©‹å¥äºŒ',\n                scheduled: '2026-01-15',\n                description: 'ä¸€éƒ¨ãƒãƒ¼ã‚³ãƒ¼ãƒ‰ãŒèª­ã¿å–ã‚Œãªã„å•é¡Œã‚’ä¿®æ­£',\n            },\n            {\n                id: 'CHG005',\n                title: 'ä¼‘æš‡ç”³è«‹ã«åŠä¼‘æ©Ÿèƒ½è¿½åŠ ',\n                appId: 'APP005',\n                appName: 'ä¼‘æš‡ç”³è«‹',\n                type: 'feature',\n                status: 'draft',\n                requester: 'ä¼Šè—¤çœŸç”±',\n                scheduled: '-',\n                description: 'åˆå‰ä¼‘ãƒ»åˆå¾Œä¼‘ã®é¸æŠã‚’å¯èƒ½ã«ã—ãŸã„',\n            },\n        ],\n        logs: [\n            {\n                timestamp: '2026-01-19 10:30:15',\n                user: 'å±±ç”°å¤ªéƒ',\n                action: 'login',\n                target: 'ã‚·ã‚¹ãƒ†ãƒ ',\n                targetType: 'system',\n                detail: 'ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ',\n                ip: '192.168.1.100',\n            },\n            {\n                timestamp: '2026-01-19 10:25:00',\n                user: 'ç”°ä¸­ç¾å’²',\n                action: 'update',\n                target: 'çµŒè²»ç²¾ç®—ç”³è«‹',\n                targetType: 'app',\n                detail: 'ã‚¢ãƒ—ãƒªè¨­å®šã‚’æ›´æ–°',\n                ip: '192.168.1.105',\n            },\n            {\n                timestamp: '2026-01-19 10:20:30',\n                user: 'éˆ´æœ¨èŠ±å­',\n                action: 'create',\n                target: 'é¡§å®¢ç®¡ç†',\n                targetType: 'app',\n                detail: 'æ–°è¦ãƒ¬ã‚³ãƒ¼ãƒ‰è¿½åŠ ï¼ˆé¡§å®¢ID: C1234ï¼‰',\n                ip: '192.168.1.110',\n            },\n            {\n                timestamp: '2026-01-19 10:15:00',\n                user: 'ä½è—¤ä¸€éƒ',\n                action: 'export',\n                target: 'å‚™å“è²¸å‡ºç®¡ç†',\n                targetType: 'app',\n                detail: 'CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå®Ÿè¡Œ',\n                ip: '192.168.1.115',\n            },\n            {\n                timestamp: '2026-01-19 09:45:00',\n                user: 'å±±ç”°å¤ªéƒ',\n                action: 'create',\n                target: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼',\n                targetType: 'user',\n                detail: 'æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼è¿½åŠ : ä¼Šè—¤çœŸç”±',\n                ip: '192.168.1.100',\n            },\n            {\n                timestamp: '2026-01-19 09:30:00',\n                user: 'ç”°ä¸­ç¾å’²',\n                action: 'login',\n                target: 'ã‚·ã‚¹ãƒ†ãƒ ',\n                targetType: 'system',\n                detail: 'ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ',\n                ip: '192.168.1.105',\n            },\n            {\n                timestamp: '2026-01-18 17:30:00',\n                user: 'é«˜æ©‹å¥äºŒ',\n                action: 'logout',\n                target: 'ã‚·ã‚¹ãƒ†ãƒ ',\n                targetType: 'system',\n                detail: 'ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ',\n                ip: '192.168.1.120',\n            },\n            {\n                timestamp: '2026-01-18 17:00:00',\n                user: 'æ¸¡è¾ºå¤§è¼”',\n                action: 'update',\n                target: 'é¡§å®¢ç®¡ç†',\n                targetType: 'app',\n                detail: 'ãƒ¬ã‚³ãƒ¼ãƒ‰æ›´æ–°ï¼ˆé¡§å®¢ID: C0891ï¼‰',\n                ip: '192.168.1.125',\n            },\n            {\n                timestamp: '2026-01-18 16:30:00',\n                user: 'ä¼Šè—¤çœŸç”±',\n                action: 'delete',\n                target: 'çµŒè²»ç²¾ç®—ç”³è«‹',\n                targetType: 'app',\n                detail: 'ãƒ¬ã‚³ãƒ¼ãƒ‰å‰Šé™¤ï¼ˆç”³è«‹ID: E0234ï¼‰',\n                ip: '192.168.1.130',\n            },\n        ],\n    },\n\n    // ãƒ‡ãƒ¼ã‚¿é…åˆ—ï¼ˆãƒ¡ãƒ¢ãƒªä¸Šï¼‰\n    users: [],\n    apps: [],\n    incidents: [],\n    changes: [],\n    logs: [],\n\n    /**\n     * åˆæœŸåŒ–ï¼šlocalStorageã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚€\n     */\n    init() {\n        // CVE-004å¯¾ç­–: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è­¦å‘Š\n        // localStorageã¯å¹³æ–‡ã§ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã™ã‚‹ãŸã‚ã€æ©Ÿå¯†æƒ…å ±ã®ä¿å­˜ã«ã¯é©ã—ã¦ã„ã¾ã›ã‚“ã€‚\n        // æœ¬ç•ªç’°å¢ƒã§ã¯ä»¥ä¸‹ã®å¯¾ç­–ã‚’å®Ÿæ–½ã—ã¦ãã ã•ã„ï¼š\n        // 1. HTTPSå¿…é ˆï¼ˆHTTPSã§ãªã„å ´åˆã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç›—è´ã®ãƒªã‚¹ã‚¯ï¼‰\n        // 2. IndexedDBã¸ã®ç§»è¡Œã‚’æ¤œè¨ï¼ˆWeb Crypto APIã§æš—å·åŒ–å¯èƒ½ï¼‰\n        // 3. ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§ã®ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã‚’æ¨å¥¨\n        if (\n            location.protocol !== 'https:' &&\n            location.hostname !== 'localhost' &&\n            location.hostname !== '127.0.0.1'\n        ) {\n            console.warn(\n                '%câš ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è­¦å‘Š',\n                'background: #ff6b6b; color: white; font-weight: bold; padding: 4px 8px; border-radius: 3px;',\n                '\\næœ¬ç•ªç’°å¢ƒã§ã¯HTTPSã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚\\nlocalStorageã¯å¹³æ–‡ä¿å­˜ã®ãŸã‚ã€HTTPSãªã—ã§ã¯ãƒ‡ãƒ¼ã‚¿æ¼æ´©ã®ãƒªã‚¹ã‚¯ãŒã‚ã‚Šã¾ã™ã€‚'\n            );\n        }\n\n        console.info(\n            '%câ„¹ï¸ ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸æƒ…å ±',\n            'background: #4dabf7; color: white; font-weight: bold; padding: 4px 8px; border-radius: 3px;',\n            '\\nlocalStorageã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ï¼ˆé–‹ç™ºç’°å¢ƒå‘ã‘ï¼‰ã€‚\\næœ¬ç•ªç’°å¢ƒã§ã¯æš—å·åŒ–ã•ã‚ŒãŸIndexedDBã¾ãŸã¯ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¸ã®ç§»è¡Œã‚’æ¨å¥¨ã—ã¾ã™ã€‚'\n        );\n\n        const collections = ['users', 'apps', 'incidents', 'changes', 'logs'];\n        collections.forEach(collection => {\n            const saved = localStorage.getItem(this.STORAGE_KEYS[collection]);\n            if (saved) {\n                try {\n                    this[collection] = JSON.parse(saved);\n                } catch (e) {\n                    console.error(`Failed to load ${collection}:`, e);\n                    this[collection] = [...this._defaults[collection]];\n                }\n            } else {\n                this[collection] = [...this._defaults[collection]];\n            }\n        });\n    },\n\n    /**\n     * ãƒ‡ãƒ¼ã‚¿ã‚’localStorageã«ä¿å­˜\n     * @param {string} collection - ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³å\n     */\n    save(collection) {\n        if (this.STORAGE_KEYS[collection]) {\n            try {\n                localStorage.setItem(\n                    this.STORAGE_KEYS[collection],\n                    JSON.stringify(this[collection])\n                );\n            } catch (e) {\n                console.error(`Failed to save ${collection}:`, e);\n                showToast('ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ', 'error');\n            }\n        }\n    },\n\n    /**\n     * å…¨ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜\n     */\n    saveAll() {\n        Object.keys(this.STORAGE_KEYS).forEach(collection => this.save(collection));\n    },\n\n    /**\n     * IDã§ã‚¢ã‚¤ãƒ†ãƒ ã‚’æ¤œç´¢\n     * @param {string} collection - ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³å\n     * @param {string} id - ID\n     * @returns {Object|null} - ã‚¢ã‚¤ãƒ†ãƒ ã¾ãŸã¯null\n     */\n    findById(collection, id) {\n        return this[collection]?.find(item => item.id === id) || null;\n    },\n\n    /**\n     * æ¡ä»¶ã§ã‚¢ã‚¤ãƒ†ãƒ ã‚’æ¤œç´¢\n     * @param {string} collection - ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³å\n     * @param {Function} predicate - æ¤œç´¢æ¡ä»¶\n     * @returns {Array} - æ¤œç´¢çµæœ\n     */\n    findWhere(collection, predicate) {\n        return this[collection]?.filter(predicate) || [];\n    },\n\n    /**\n     * ã‚¢ã‚¤ãƒ†ãƒ ã‚’ä½œæˆ\n     * @param {string} collection - ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³å\n     * @param {Object} item - æ–°è¦ã‚¢ã‚¤ãƒ†ãƒ \n     * @returns {Object} - ä½œæˆã•ã‚ŒãŸã‚¢ã‚¤ãƒ†ãƒ \n     */\n    create(collection, item) {\n        this[collection].push(item);\n        this.save(collection);\n        return item;\n    },\n\n    /**\n     * ã‚¢ã‚¤ãƒ†ãƒ ã‚’æ›´æ–°\n     * @param {string} collection - ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³å\n     * @param {string} id - ID\n     * @param {Object} updates - æ›´æ–°å†…å®¹\n     * @returns {Object|null} - æ›´æ–°ã•ã‚ŒãŸã‚¢ã‚¤ãƒ†ãƒ ã¾ãŸã¯null\n     */\n    update(collection, id, updates) {\n        const index = this[collection]?.findIndex(item => item.id === id);\n        if (index === -1 || index === undefined) {\n            return null;\n        }\n\n        this[collection][index] = { ...this[collection][index], ...updates };\n        this.save(collection);\n        return this[collection][index];\n    },\n\n    /**\n     * ã‚¢ã‚¤ãƒ†ãƒ ã‚’å‰Šé™¤\n     * @param {string} collection - ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³å\n     * @param {string} id - ID\n     * @returns {boolean} - å‰Šé™¤æˆåŠŸã®å ´åˆtrue\n     */\n    delete(collection, id) {\n        const index = this[collection]?.findIndex(item => item.id === id);\n        if (index === -1 || index === undefined) {\n            return false;\n        }\n\n        this[collection].splice(index, 1);\n        this.save(collection);\n        return true;\n    },\n\n    /**\n     * ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªã‚»ãƒƒãƒˆï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«æˆ»ã™ï¼‰\n     * @param {string} collection - ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³åï¼ˆçœç•¥æ™‚ã¯å…¨ã¦ï¼‰\n     */\n    reset(collection) {\n        if (collection) {\n            this[collection] = [...this._defaults[collection]];\n            this.save(collection);\n        } else {\n            Object.keys(this.STORAGE_KEYS).forEach(c => {\n                this[c] = [...this._defaults[c]];\n                localStorage.removeItem(this.STORAGE_KEYS[c]);\n            });\n        }\n    },\n\n    /**\n     * çµ±è¨ˆæƒ…å ±ã‚’å–å¾—\n     * @returns {Object} - çµ±è¨ˆæƒ…å ±\n     */\n    getStats() {\n        return {\n            totalUsers: this.users.length,\n            activeUsers: this.users.filter(u => u.status === 'active').length,\n            totalApps: this.apps.length,\n            activeApps: this.apps.filter(a => a.status === 'active').length,\n            openIncidents: this.incidents.filter(i => i.status !== 'closed').length,\n            pendingChanges: this.changes.filter(c => c.status === 'pending').length,\n        };\n    },\n\n    /**\n     * å…¨ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ\n     * @returns {Object} - å…¨ãƒ‡ãƒ¼ã‚¿\n     */\n    exportAll() {\n        return {\n            users: this.users,\n            apps: this.apps,\n            incidents: this.incidents,\n            changes: this.changes,\n            logs: this.logs,\n            exportedAt: new Date().toISOString(),\n        };\n    },\n\n    /**\n     * ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ\n     * @param {Object} data - ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿\n     */\n    importAll(data) {\n        if (data.users) {\n            this.users = data.users;\n        }\n        if (data.apps) {\n            this.apps = data.apps;\n        }\n        if (data.incidents) {\n            this.incidents = data.incidents;\n        }\n        if (data.changes) {\n            this.changes = data.changes;\n        }\n        if (data.logs) {\n            this.logs = data.logs;\n        }\n        this.saveAll();\n    },\n};\n\n// DataStoreåˆæœŸåŒ–\nDataStore.init();\n\nconst ApiSync = {\n    isReadOnly: false,\n    timerId: null,\n\n    loadSettings() {\n        const savedSettings = localStorage.getItem('appsuiteSettings');\n        const settings = savedSettings ? JSON.parse(savedSettings) : {};\n        return settings.api || {};\n    },\n\n    applySettings() {\n        const apiSettings = this.loadSettings();\n        ApiConfig.baseUrl = apiSettings.url || '';\n        ApiConfig.apiKey = apiSettings.key || '';\n        ApiConfig.authMethod = apiSettings.authMethod || 'bearer';\n        ApiConfig.timeout = (apiSettings.timeout || 30) * 1000;\n\n        this.isReadOnly = Boolean(apiSettings.url);\n        this.applyReadOnlyState();\n\n        this.stopAutoSync();\n        const interval = parseInt(apiSettings.syncInterval || 0);\n        if (apiSettings.url && interval > 0) {\n            this.startAutoSync(interval);\n        }\n    },\n\n    applyReadOnlyState() {\n        const addUserButton = document.getElementById('addUserButton');\n        const addAppButton = document.getElementById('addAppButton');\n        if (addUserButton) {\n            addUserButton.disabled = this.isReadOnly;\n        }\n        if (addAppButton) {\n            addAppButton.disabled = this.isReadOnly;\n        }\n\n        if (window.UserModule) {\n            UserModule.refresh();\n        }\n        if (window.AppModule) {\n            AppModule.refresh();\n        }\n    },\n\n    startAutoSync(intervalMinutes) {\n        this.timerId = setInterval(\n            async () => {\n                await this.syncAll();\n            },\n            intervalMinutes * 60 * 1000\n        );\n    },\n\n    stopAutoSync() {\n        if (this.timerId) {\n            clearInterval(this.timerId);\n            this.timerId = null;\n        }\n    },\n\n    async syncAll() {\n        if (!ApiConfig.baseUrl) {\n            showToast('API URLãŒæœªè¨­å®šã§ã™', 'error');\n            return;\n        }\n\n        try {\n            await this.syncUsers();\n            await this.syncApps();\n            updateConnectionStatus(true);\n            document.getElementById('apiStatus').textContent = 'æ¥ç¶šä¸­';\n            document.getElementById('apiStatus').style.color = '#22c55e';\n            document.getElementById('lastSync').textContent = new Date().toLocaleString('ja-JP');\n            if (window.updateDashboard) {\n                updateDashboard();\n            }\n            showToast('åŒæœŸãŒå®Œäº†ã—ã¾ã—ãŸ', 'success');\n        } catch (error) {\n            updateConnectionStatus(false);\n            showToast('åŒæœŸã«å¤±æ•—ã—ã¾ã—ãŸ: ' + error.message, 'error');\n        }\n    },\n\n    async syncUsers() {\n        const response = await Api.get('', { cmd: 'getuser' });\n        if (response.status !== 'success' || !Array.isArray(response.users)) {\n            throw new Error('ãƒ¦ãƒ¼ã‚¶ãƒ¼åŒæœŸã«å¤±æ•—ã—ã¾ã—ãŸ');\n        }\n\n        DataStore.users = response.users.map(user => ({\n            id: user.userid,\n            username: user.name,\n            email: user.email,\n            department: user.dept || '',\n            role: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼',\n            status: 'active',\n            lastLogin: '-',\n        }));\n        if (window.UserModule) {\n            UserModule.refresh();\n        }\n    },\n\n    async syncApps() {\n        const response = await Api.get('', { cmd: 'getapps' });\n        if (response.status !== 'success' || !Array.isArray(response.apps)) {\n            throw new Error('ã‚¢ãƒ—ãƒªåŒæœŸã«å¤±æ•—ã—ã¾ã—ãŸ');\n        }\n\n        const today = new Date().toISOString().split('T')[0];\n        DataStore.apps = response.apps.map(app => ({\n            id: app.appid,\n            name: app.name,\n            category: 'ãã®ä»–',\n            creator: '',\n            records: app.recordcount || 0,\n            status: 'active',\n            updated: today,\n            description: '',\n        }));\n        if (window.AppModule) {\n            AppModule.refresh();\n        }\n    },\n};\n\nfunction initApiSync() {\n    ApiSync.applySettings();\n}\n\n// ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£\nfunction updateConnectionStatus(connected) {\n    const status = document.getElementById('connectionStatus');\n    if (connected) {\n        status.innerHTML = '<i class=\"fas fa-circle\"></i> æ¥ç¶šä¸­';\n        status.classList.add('connected');\n    } else {\n        status.innerHTML = '<i class=\"fas fa-circle\"></i> æœªæ¥ç¶š';\n        status.classList.remove('connected');\n    }\n}\n\nfunction showToast(message, type = 'info') {\n    const container = document.getElementById('toastContainer');\n    const toast = document.createElement('div');\n    toast.className = `toast ${type}`;\n\n    const icons = {\n        success: 'fa-check-circle',\n        error: 'fa-exclamation-circle',\n        warning: 'fa-exclamation-triangle',\n        info: 'fa-info-circle',\n    };\n\n    toast.innerHTML = `\n        <i class=\"fas ${icons[type]}\"></i>\n        <span>${message}</span>\n    `;\n\n    container.appendChild(toast);\n\n    setTimeout(() => {\n        toast.style.animation = 'toastIn 0.3s ease reverse';\n        setTimeout(() => toast.remove(), 300);\n    }, 3000);\n}\n\nfunction toggleApiKey() {\n    const input = document.getElementById('apiKey');\n    input.type = input.type === 'password' ? 'text' : 'password';\n}\n\n// Export to global scope for testing\nwindow.DataStore = DataStore;\nwindow.ApiConfig = ApiConfig;\nwindow.ApiSync = ApiSync;\n","usedDeprecatedRules":[{"ruleId":"semi","replacedBy":["@stylistic/semi"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"semi","url":"https://eslint.style/rules/semi"}}]}},{"ruleId":"quotes","replacedBy":["@stylistic/quotes"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"quotes","url":"https://eslint.style/rules/quotes"}}]}},{"ruleId":"indent","replacedBy":["@stylistic/indent"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"indent","url":"https://eslint.style/rules/indent"}}]}}]},{"filePath":"/home/runner/work/Appsuite-ITSM-Management/Appsuite-ITSM-Management/WebUI-Production/js/app.js","messages":[{"ruleId":"no-undef","severity":1,"message":"'LazyLoader' is not defined.","line":72,"column":9,"messageId":"undef","endLine":72,"endColumn":19},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":140,"column":1,"messageId":"wrongIndentation","endLine":140,"endColumn":9,"fix":{"range":[3756,3764],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 12.","line":141,"column":1,"messageId":"wrongIndentation","endLine":141,"endColumn":13,"fix":{"range":[3782,3794],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 12.","line":142,"column":1,"messageId":"wrongIndentation","endLine":142,"endColumn":13,"fix":{"range":[3813,3825],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":143,"column":1,"messageId":"wrongIndentation","endLine":143,"endColumn":9,"fix":{"range":[3832,3840],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 12.","line":144,"column":1,"messageId":"wrongIndentation","endLine":144,"endColumn":13,"fix":{"range":[3854,3866],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 12.","line":145,"column":1,"messageId":"wrongIndentation","endLine":145,"endColumn":13,"fix":{"range":[3888,3900],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":146,"column":1,"messageId":"wrongIndentation","endLine":146,"endColumn":9,"fix":{"range":[3907,3915],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 12.","line":147,"column":1,"messageId":"wrongIndentation","endLine":147,"endColumn":13,"fix":{"range":[3928,3940],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 12.","line":148,"column":1,"messageId":"wrongIndentation","endLine":148,"endColumn":13,"fix":{"range":[3961,3973],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":149,"column":1,"messageId":"wrongIndentation","endLine":149,"endColumn":9,"fix":{"range":[3980,3988],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 12.","line":150,"column":1,"messageId":"wrongIndentation","endLine":150,"endColumn":13,"fix":{"range":[4006,4018],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 12.","line":151,"column":1,"messageId":"wrongIndentation","endLine":151,"endColumn":13,"fix":{"range":[4044,4056],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":152,"column":1,"messageId":"wrongIndentation","endLine":152,"endColumn":9,"fix":{"range":[4063,4071],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 12.","line":153,"column":1,"messageId":"wrongIndentation","endLine":153,"endColumn":13,"fix":{"range":[4087,4099],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 12.","line":154,"column":1,"messageId":"wrongIndentation","endLine":154,"endColumn":13,"fix":{"range":[4123,4135],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":155,"column":1,"messageId":"wrongIndentation","endLine":155,"endColumn":9,"fix":{"range":[4142,4150],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 12.","line":156,"column":1,"messageId":"wrongIndentation","endLine":156,"endColumn":13,"fix":{"range":[4163,4175],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 12.","line":157,"column":1,"messageId":"wrongIndentation","endLine":157,"endColumn":13,"fix":{"range":[4196,4208],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":158,"column":1,"messageId":"wrongIndentation","endLine":158,"endColumn":9,"fix":{"range":[4215,4223],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 12.","line":159,"column":1,"messageId":"wrongIndentation","endLine":159,"endColumn":13,"fix":{"range":[4240,4252],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 12.","line":160,"column":1,"messageId":"wrongIndentation","endLine":160,"endColumn":13,"fix":{"range":[4281,4293],"text":"        "}},{"ruleId":"no-unused-vars","severity":1,"message":"'loadApiConfig' is defined but never used.","line":220,"column":10,"messageId":"unusedVar","endLine":220,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"loadApiConfig"},"fix":{"range":[6333,6398],"text":""},"desc":"Remove unused variable 'loadApiConfig'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'openModal' is defined but never used.","line":309,"column":10,"messageId":"unusedVar","endLine":309,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"openModal"},"fix":{"range":[8706,9195],"text":""},"desc":"Remove unused variable 'openModal'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'startApplicationAfterLogin' is defined but never used.","line":342,"column":10,"messageId":"unusedVar","endLine":342,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"startApplicationAfterLogin"},"fix":{"range":[9651,9715],"text":""},"desc":"Remove unused variable 'startApplicationAfterLogin'."}]}],"suppressedMessages":[],"errorCount":21,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":21,"fixableWarningCount":0,"source":"/**\n * AppSuite ç®¡ç†é‹ç”¨ã‚·ã‚¹ãƒ†ãƒ  - ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³\n * Phase 3 Sprint 1: èªè¨¼ã‚·ã‚¹ãƒ†ãƒ çµ±åˆ\n */\n\n// åˆæœŸåŒ–\ndocument.addEventListener('DOMContentLoaded', () => {\n    // èªè¨¼ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åˆæœŸåŒ–\n    AuthModule.init();\n\n    // èªè¨¼ãƒã‚§ãƒƒã‚¯\n    if (AuthModule.isAuthenticated()) {\n        // èªè¨¼æ¸ˆã¿ï¼šã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åˆæœŸåŒ–\n        initApplication();\n        AuthModule.hideLoginScreen();\n        const user = AuthModule.getCurrentUser();\n        if (user) {\n            AuthModule.updateUIForUser(user);\n        }\n    } else {\n        // æœªèªè¨¼ï¼šãƒ­ã‚°ã‚¤ãƒ³ç”»é¢è¡¨ç¤º\n        AuthModule.showLoginScreen();\n    }\n});\n\n// ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åˆæœŸåŒ–\nfunction initApplication() {\n    initNavigation();\n    initSidebar();\n    initFilters();\n    initSettings();\n    initApiSync();\n    initDashboard();\n    refreshAllModules();\n\n    // ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚¨ãƒ³ã‚¸ãƒ³åˆæœŸåŒ–\n    if (typeof WorkflowEngine !== 'undefined') {\n        WorkflowEngine.init();\n    }\n\n    // é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–\n    if (typeof NotificationManager !== 'undefined') {\n        NotificationManager.init();\n    }\n\n    // ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼åˆæœŸåŒ–\n    if (typeof BackupManager !== 'undefined') {\n        BackupManager.init();\n    }\n\n    // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–åˆæœŸåŒ–\n    if (typeof PerformanceOptimizer !== 'undefined') {\n        PerformanceOptimizer.init();\n    }\n\n    // ãƒšãƒ¼ã‚¸é›¢è„±æ™‚ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—\n    window.addEventListener('beforeunload', cleanupApplication);\n}\n\n// ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—\nfunction cleanupApplication() {\n    if (typeof WorkflowEngine !== 'undefined') {\n        WorkflowEngine.cleanup();\n    }\n    if (typeof NotificationManager !== 'undefined') {\n        NotificationManager.cleanup();\n    }\n    if (typeof BackupManager !== 'undefined') {\n        BackupManager.cleanup();\n    }\n    if (typeof LazyLoader !== 'undefined') {\n        LazyLoader.disconnect();\n    }\n}\n\n// ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³åˆæœŸåŒ–\nfunction initNavigation() {\n    const navItems = document.querySelectorAll('.nav-item');\n    navItems.forEach(item => {\n        item.addEventListener('click', () => {\n            // undefined ãƒã‚§ãƒƒã‚¯è¿½åŠ \n            if (!item || !item.dataset) {\n                console.error('Navigation item or dataset is undefined');\n                return;\n            }\n\n            const section = item.dataset.section;\n            if (!section) {\n                console.warn('Section name is undefined for navigation item');\n                return;\n            }\n\n            showSection(section);\n\n            navItems.forEach(nav => nav.classList.remove('active'));\n            item.classList.add('active');\n\n            const sidebar = document.getElementById('sidebar');\n            if (window.innerWidth <= 1024 && sidebar) {\n                sidebar.classList.remove('active');\n            }\n        });\n    });\n}\n\n// ã‚»ã‚¯ã‚·ãƒ§ãƒ³è¡¨ç¤ºåˆ‡æ›¿\nfunction showSection(sectionName) {\n    // CVE-003å¯¾ç­–: èªè¨¼ãƒã‚§ãƒƒã‚¯è¿½åŠ \n    if (!AuthModule.isAuthenticated()) {\n        console.warn('âš ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£: æœªèªè¨¼ã‚¢ã‚¯ã‚»ã‚¹ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã—ã¾ã—ãŸ');\n        AuthModule.showLoginScreen();\n        return;\n    }\n\n    // CVE-004å¯¾ç­–: ç®¡ç†è€…å°‚ç”¨æ©Ÿèƒ½ã®æ¨©é™ãƒã‚§ãƒƒã‚¯\n    const adminOnlySections = ['users', 'settings'];\n    if (adminOnlySections.includes(sectionName)) {\n        const user = AuthModule.getCurrentUser();\n        if (!user || (user.role !== 'ç®¡ç†è€…' && user.role !== 'administrator')) {\n            console.warn('âš ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£: æ¨©é™ä¸è¶³ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã—ã¾ã—ãŸ', {\n                user: user ? user.username : 'unknown',\n                role: user ? user.role : 'unknown',\n                requestedSection: sectionName,\n            });\n            showToast('ã“ã®æ©Ÿèƒ½ã¯ç®¡ç†è€…ã®ã¿åˆ©ç”¨å¯èƒ½ã§ã™', 'error');\n            showSection('dashboard'); // ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ\n            return;\n        }\n    }\n\n    const sections = document.querySelectorAll('.section');\n    sections.forEach(sec => sec.classList.add('hidden'));\n\n    const target = document.getElementById('section-' + sectionName);\n    if (target) {\n        target.classList.remove('hidden');\n    }\n\n    switch (sectionName) {\n        case 'dashboard':\n            updateDashboard();\n            break;\n        case 'users':\n            UserModule.refresh();\n            break;\n        case 'apps':\n            AppModule.refresh();\n            break;\n        case 'incidents':\n            IncidentModule.refresh();\n            break;\n        case 'changes':\n            ChangeModule.refresh();\n            break;\n        case 'logs':\n            LogModule.refresh();\n            break;\n        case 'settings':\n            SettingsModule.loadToForm();\n            break;\n    }\n}\n\n// ã‚µã‚¤ãƒ‰ãƒãƒ¼åˆæœŸåŒ–\nfunction initSidebar() {\n    const menuToggle = document.getElementById('menuToggle');\n    const sidebar = document.getElementById('sidebar');\n\n    menuToggle.addEventListener('click', () => {\n        sidebar.classList.toggle('active');\n    });\n\n    document.addEventListener('click', e => {\n        if (window.innerWidth <= 1024) {\n            if (!sidebar.contains(e.target) && !menuToggle.contains(e.target)) {\n                sidebar.classList.remove('active');\n            }\n        }\n    });\n}\n\n// ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼åˆæœŸåŒ–\nfunction initFilters() {\n    // ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼\n    document.getElementById('userSearch').addEventListener('input', () => UserModule.filter());\n    document\n        .getElementById('userStatusFilter')\n        .addEventListener('change', () => UserModule.filter());\n    document.getElementById('userRoleFilter').addEventListener('change', () => UserModule.filter());\n\n    // ã‚¢ãƒ—ãƒªæ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼\n    document.getElementById('appSearch').addEventListener('input', () => AppModule.filter());\n    document\n        .getElementById('appCategoryFilter')\n        .addEventListener('change', () => AppModule.filter());\n    document.getElementById('appStatusFilter').addEventListener('change', () => AppModule.filter());\n\n    // ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆæ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼\n    document\n        .getElementById('incidentSearch')\n        .addEventListener('input', () => IncidentModule.filter());\n    document\n        .getElementById('incidentPriorityFilter')\n        .addEventListener('change', () => IncidentModule.filter());\n    document\n        .getElementById('incidentStatusFilter')\n        .addEventListener('change', () => IncidentModule.filter());\n\n    // å¤‰æ›´è¦æ±‚æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼\n    document.getElementById('changeSearch').addEventListener('input', () => ChangeModule.filter());\n    document\n        .getElementById('changeTypeFilter')\n        .addEventListener('change', () => ChangeModule.filter());\n    document\n        .getElementById('changeStatusFilter')\n        .addEventListener('change', () => ChangeModule.filter());\n}\n\n// APIè¨­å®šèª­ã¿è¾¼ã¿ï¼ˆäº’æ›æ€§ã®ãŸã‚æ®‹ã™ï¼‰\nfunction loadApiConfig() {\n    // è¨­å®šãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ç®¡ç†ã™ã‚‹ãŸã‚ã€ã“ã®é–¢æ•°ã¯äº’æ›æ€§ã®ãŸã‚ã«æ®‹ã™\n}\n\n// è¨­å®šåˆæœŸåŒ–\nfunction initSettings() {\n    SettingsModule.initTabs();\n    SettingsModule.loadToForm();\n}\n\n// ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰åˆæœŸåŒ–\nfunction initDashboard() {\n    updateDashboard();\n\n    // DashboardManageråˆæœŸåŒ–ï¼ˆChart.jsèª­ã¿è¾¼ã¿å¾Œï¼‰\n    if (typeof DashboardManager !== 'undefined') {\n        DashboardManager.init();\n\n        // KPIã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆåˆæœŸåŒ–\n        if (typeof KPIWidget !== 'undefined') {\n            KPIWidget.render();\n        }\n\n        // ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³åˆæœŸåŒ–\n        if (typeof QuickActions !== 'undefined') {\n            QuickActions.render();\n        }\n\n        // ã‚·ã‚¹ãƒ†ãƒ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹åˆæœŸåŒ–\n        if (typeof SystemStatus !== 'undefined') {\n            SystemStatus.render();\n        }\n    }\n}\n\n// ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ›´æ–°\nfunction updateDashboard() {\n    const stats = DataStore.getStats();\n    document.getElementById('totalUsers').textContent = stats.totalUsers;\n    document.getElementById('activeUsers').textContent = stats.activeUsers;\n    document.getElementById('totalApps').textContent = stats.totalApps;\n    document.getElementById('activeApps').textContent = stats.activeApps;\n    document.getElementById('openIncidents').textContent = stats.openIncidents;\n    document.getElementById('pendingChanges').textContent = stats.pendingChanges;\n\n    // æœ€è¿‘ã®ãƒ­ã‚°\n    LogModule.renderRecent();\n\n    // ã‚¢ãƒ—ãƒªã‚µãƒãƒªãƒ¼\n    renderAppSummary();\n\n    // ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆæ›´æ–°\n    if (typeof KPIWidget !== 'undefined') {\n        KPIWidget.render();\n    }\n    if (typeof SystemStatus !== 'undefined') {\n        SystemStatus.render();\n    }\n}\n\n// ã‚¢ãƒ—ãƒªã‚µãƒãƒªãƒ¼è¡¨ç¤º\nfunction renderAppSummary() {\n    const container = document.getElementById('appSummary');\n    const apps = [...DataStore.apps]\n        .sort((a, b) => new Date(b.updated) - new Date(a.updated))\n        .slice(0, 5);\n    container.innerHTML = apps\n        .map(\n            app => `\n        <div class=\"app-summary-item\">\n            <span class=\"app-name\">${escapeHtml(app.name)}</span>\n            <span class=\"app-records\">${app.records.toLocaleString()}ä»¶</span>\n            <span class=\"badge ${AppModule.getStatusBadge(app.status)}\">${AppModule.getStatusText(app.status)}</span>\n        </div>\n    `\n        )\n        .join('');\n}\n\n// å…¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åˆæœŸåŒ–\nfunction refreshAllModules() {\n    UserModule.refresh();\n    AppModule.refresh();\n    IncidentModule.refresh();\n    ChangeModule.refresh();\n    LogModule.refresh();\n}\n\n// ãƒ¢ãƒ¼ãƒ€ãƒ«é–¢é€£\nfunction openModal(title, bodyContent, buttons = []) {\n    document.getElementById('modalTitle').textContent = title;\n    document.getElementById('modalBody').innerHTML = bodyContent;\n\n    const footer = document.getElementById('modalFooter');\n    footer.innerHTML = buttons\n        .map(\n            btn => `<button class=\"btn ${btn.class}\" onclick=\"${btn.onclick}\">${btn.text}</button>`\n        )\n        .join('');\n\n    document.getElementById('modalOverlay').classList.add('active');\n}\n\nfunction closeModal() {\n    document.getElementById('modalOverlay').classList.remove('active');\n}\n\n// ESCã‚­ãƒ¼ã§ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹\ndocument.addEventListener('keydown', e => {\n    if (e.key === 'Escape') {\n        closeModal();\n    }\n});\n\n// ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹\ndocument.getElementById('modalOverlay').addEventListener('click', e => {\n    if (e.target === document.getElementById('modalOverlay')) {\n        closeModal();\n    }\n});\n\n// èªè¨¼å¾Œã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³èµ·å‹•ï¼ˆAuthModuleã‹ã‚‰å‘¼ã³å‡ºã•ã‚Œã‚‹ï¼‰\nfunction startApplicationAfterLogin() {\n    initApplication();\n}\n","usedDeprecatedRules":[{"ruleId":"semi","replacedBy":["@stylistic/semi"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"semi","url":"https://eslint.style/rules/semi"}}]}},{"ruleId":"quotes","replacedBy":["@stylistic/quotes"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"quotes","url":"https://eslint.style/rules/quotes"}}]}},{"ruleId":"indent","replacedBy":["@stylistic/indent"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"indent","url":"https://eslint.style/rules/indent"}}]}}]},{"filePath":"/home/runner/work/Appsuite-ITSM-Management/Appsuite-ITSM-Management/WebUI-Production/js/auth.js","messages":[{"ruleId":"no-undef","severity":1,"message":"'TextEncoder' is not defined.","line":324,"column":29,"messageId":"undef","endLine":324,"endColumn":40},{"ruleId":"no-undef","severity":1,"message":"'TextEncoder' is not defined.","line":348,"column":33,"messageId":"undef","endLine":348,"endColumn":44},{"ruleId":"no-unused-vars","severity":1,"message":"'passwordHash' is assigned a value but never used.","line":445,"column":17,"messageId":"unusedVar","endLine":445,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"passwordHash"},"fix":{"range":[12888,12901],"text":""},"desc":"Remove unused variable 'passwordHash'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'handleLogin' is defined but never used.","line":703,"column":10,"messageId":"unusedVar","endLine":703,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"handleLogin"},"fix":{"range":[19992,20064],"text":""},"desc":"Remove unused variable 'handleLogin'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'handleLogout' is defined but never used.","line":707,"column":10,"messageId":"unusedVar","endLine":707,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"handleLogout"},"fix":{"range":[20066,20118],"text":""},"desc":"Remove unused variable 'handleLogout'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * AppSuite ç®¡ç†é‹ç”¨ã‚·ã‚¹ãƒ†ãƒ  - èªè¨¼ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«\n * Phase 3 Sprint 1: èªè¨¼ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…\n */\n\nconst AuthModule = {\n    // ã‚»ãƒƒã‚·ãƒ§ãƒ³è¨­å®š\n    SESSION_KEY: 'appsuite_session',\n    SESSION_TIMEOUT: 30 * 60 * 1000, // 30åˆ†ï¼ˆãƒŸãƒªç§’ï¼‰\n    MAX_LOGIN_ATTEMPTS: 5,\n    LOCKOUT_DURATION: 15 * 60 * 1000, // 15åˆ†ï¼ˆãƒŸãƒªç§’ï¼‰\n\n    // ç¾åœ¨ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³\n    currentSession: null,\n\n    /**\n     * åˆæœŸåŒ–\n     */\n    init() {\n        this.loadSession();\n        this.setupSessionTimeout();\n        this.setupActivityListener();\n    },\n\n    /**\n     * ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†\n     * @param {string} username - ãƒ¦ãƒ¼ã‚¶ãƒ¼å\n     * @param {string} password - ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰\n     * @returns {Object} - ãƒ­ã‚°ã‚¤ãƒ³çµæœ\n     */\n    async login(username, password) {\n        // å…¥åŠ›ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³\n        if (!username || !password) {\n            return { success: false, error: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„' };\n        }\n\n        // ãƒ­ãƒƒã‚¯ã‚¢ã‚¦ãƒˆãƒã‚§ãƒƒã‚¯\n        const lockoutInfo = this.checkLockout(username);\n        if (lockoutInfo.locked) {\n            const remainingMinutes = Math.ceil(lockoutInfo.remainingTime / 60000);\n            return {\n                success: false,\n                error: `ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒãƒ­ãƒƒã‚¯ã•ã‚Œã¦ã„ã¾ã™ã€‚${remainingMinutes}åˆ†å¾Œã«å†è©¦è¡Œã—ã¦ãã ã•ã„`,\n            };\n        }\n\n        // ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¤œç´¢\n        const user = DataStore.users.find(u => u.username === username || u.email === username);\n\n        if (!user) {\n            this.recordFailedAttempt(username);\n            return { success: false, error: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¾ãŸã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“' };\n        }\n\n        // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒã‚§ãƒƒã‚¯\n        if (user.status !== 'active') {\n            return { success: false, error: 'ã“ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¯ç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã¾ã™' };\n        }\n\n        // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰æ¤œè¨¼ï¼ˆãƒ‡ãƒ¢ç’°å¢ƒã§ã¯ç°¡æ˜“ãƒã‚§ãƒƒã‚¯ï¼‰\n        const isValidPassword = await this.verifyPassword(password, user.passwordHash || 'demo');\n        if (!isValidPassword) {\n            this.recordFailedAttempt(username);\n            const attempts = this.getFailedAttempts(username);\n            const remaining = this.MAX_LOGIN_ATTEMPTS - attempts;\n            return {\n                success: false,\n                error: `ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¾ãŸã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“ï¼ˆæ®‹ã‚Š${remaining}å›ï¼‰`,\n            };\n        }\n\n        // ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ\n        this.clearFailedAttempts(username);\n\n        // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰è‡ªå‹•ç§»è¡Œï¼ˆå¹³æ–‡ â†’ ãƒãƒƒã‚·ãƒ¥åŒ–ï¼‰\n        // HTTPSç’°å¢ƒã§ã®ã¿å®Ÿè¡Œï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–ï¼‰\n        if (\n            window.location.protocol === 'https:' &&\n            user.passwordHash &&\n            !user.passwordHash.includes(':')\n        ) {\n            // å¹³æ–‡ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’æ¤œå‡º â†’ ãƒãƒƒã‚·ãƒ¥åŒ–ã«è‡ªå‹•ç§»è¡Œ\n            console.log('ğŸ”’ ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’è‡ªå‹•çš„ã«ãƒãƒƒã‚·ãƒ¥åŒ–ã—ã¦ã„ã¾ã™...');\n            const newHash = await this.hashPassword(password);\n            user.passwordHash = newHash;\n\n            // DataStoreã‚’æ›´æ–°\n            const userIndex = DataStore.users.findIndex(u => u.id === user.id);\n            if (userIndex !== -1) {\n                DataStore.users[userIndex] = user;\n                localStorage.setItem('appsuite_users', JSON.stringify(DataStore.users));\n            }\n\n            console.log(\n                'âœ… ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ãƒãƒƒã‚·ãƒ¥åŒ–ã—ã¾ã—ãŸï¼ˆæ¬¡å›ã‹ã‚‰ã¯ãƒãƒƒã‚·ãƒ¥åŒ–ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§ãƒ­ã‚°ã‚¤ãƒ³ï¼‰'\n            );\n        }\n\n        const session = this.createSession(user);\n        this.saveSession(session);\n\n        // ãƒ­ã‚°è¨˜éŒ²\n        LogModule.addLog('login', 'ã‚·ã‚¹ãƒ†ãƒ ', 'system', `ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ: ${user.username}`);\n\n        // æœ€çµ‚ãƒ­ã‚°ã‚¤ãƒ³æ›´æ–°\n        user.lastLogin = new Date().toLocaleString('ja-JP');\n\n        return { success: true, user: this.sanitizeUser(user), session };\n    },\n\n    /**\n     * ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå‡¦ç†\n     */\n    logout() {\n        const user = this.getCurrentUser();\n        if (user) {\n            LogModule.addLog('logout', 'ã‚·ã‚¹ãƒ†ãƒ ', 'system', `ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ: ${user.username}`);\n        }\n\n        this.clearSession();\n        this.showLoginScreen();\n    },\n\n    /**\n     * ã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆ\n     * @param {Object} user - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ\n     * @returns {Object} - ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ\n     */\n    createSession(user) {\n        const now = Date.now();\n        return {\n            id: this.generateSessionId(),\n            userId: user.id,\n            username: user.username,\n            role: user.role,\n            department: user.department,\n            createdAt: now,\n            expiresAt: now + this.SESSION_TIMEOUT,\n            lastActivity: now,\n        };\n    },\n\n    /**\n     * ã‚»ãƒƒã‚·ãƒ§ãƒ³IDç”Ÿæˆ\n     * @returns {string} - ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªã‚»ãƒƒã‚·ãƒ§ãƒ³ID\n     */\n    generateSessionId() {\n        const array = new Uint8Array(32);\n        crypto.getRandomValues(array);\n        return Array.from(array, byte => byte.toString(16).padStart(2, '0')).join('');\n    },\n\n    /**\n     * ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¿å­˜\n     * @param {Object} session - ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ\n     */\n    saveSession(session) {\n        this.currentSession = session;\n        sessionStorage.setItem(this.SESSION_KEY, JSON.stringify(session));\n    },\n\n    /**\n     * ã‚»ãƒƒã‚·ãƒ§ãƒ³èª­ã¿è¾¼ã¿\n     */\n    loadSession() {\n        const saved = sessionStorage.getItem(this.SESSION_KEY);\n        if (saved) {\n            const session = JSON.parse(saved);\n            if (this.isSessionValid(session)) {\n                this.currentSession = session;\n                return true;\n            }\n            this.clearSession();\n        }\n        return false;\n    },\n\n    /**\n     * ã‚»ãƒƒã‚·ãƒ§ãƒ³æœ‰åŠ¹æ€§ãƒã‚§ãƒƒã‚¯\n     * @param {Object} session - ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ\n     * @returns {boolean} - æœ‰åŠ¹ãªå ´åˆtrue\n     */\n    isSessionValid(session) {\n        if (!session) {\n            return false;\n        }\n        const now = Date.now();\n        return session.expiresAt > now;\n    },\n\n    /**\n     * ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¯ãƒªã‚¢\n     */\n    clearSession() {\n        this.currentSession = null;\n        sessionStorage.removeItem(this.SESSION_KEY);\n    },\n\n    /**\n     * ã‚»ãƒƒã‚·ãƒ§ãƒ³æ›´æ–°ï¼ˆã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£å»¶é•·ï¼‰\n     */\n    refreshSession() {\n        if (this.currentSession) {\n            const now = Date.now();\n            this.currentSession.lastActivity = now;\n            this.currentSession.expiresAt = now + this.SESSION_TIMEOUT;\n            this.saveSession(this.currentSession);\n        }\n    },\n\n    /**\n     * èªè¨¼æ¸ˆã¿ã‹ãƒã‚§ãƒƒã‚¯\n     * @returns {boolean} - èªè¨¼æ¸ˆã¿ã®å ´åˆtrue\n     */\n    isAuthenticated() {\n        return this.currentSession !== null && this.isSessionValid(this.currentSession);\n    },\n\n    /**\n     * ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼å–å¾—\n     * @returns {Object|null} - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¾ãŸã¯null\n     */\n    getCurrentUser() {\n        if (!this.isAuthenticated()) {\n            return null;\n        }\n        const user = DataStore.users.find(u => u.id === this.currentSession.userId);\n        return user ? this.sanitizeUser(user) : null;\n    },\n\n    /**\n     * æ¨©é™ãƒã‚§ãƒƒã‚¯\n     * @param {string} permission - å¿…è¦ãªæ¨©é™\n     * @returns {boolean} - æ¨©é™ãŒã‚ã‚‹å ´åˆtrue\n     */\n    hasPermission(permission) {\n        if (!this.isAuthenticated()) {\n            return false;\n        }\n\n        const permissions = {\n            // ç®¡ç†è€…ã®ã¿\n            admin: ['ç®¡ç†è€…'],\n            'user.create': ['ç®¡ç†è€…'],\n            'user.delete': ['ç®¡ç†è€…'],\n            'settings.edit': ['ç®¡ç†è€…'],\n            'log.export': ['ç®¡ç†è€…'],\n\n            // ç®¡ç†è€…ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼\n            'user.view': ['ç®¡ç†è€…', 'ãƒ¦ãƒ¼ã‚¶ãƒ¼'],\n            'app.view': ['ç®¡ç†è€…', 'ãƒ¦ãƒ¼ã‚¶ãƒ¼'],\n            'incident.view': ['ç®¡ç†è€…', 'ãƒ¦ãƒ¼ã‚¶ãƒ¼'],\n            'incident.create': ['ç®¡ç†è€…', 'ãƒ¦ãƒ¼ã‚¶ãƒ¼'],\n            'change.view': ['ç®¡ç†è€…', 'ãƒ¦ãƒ¼ã‚¶ãƒ¼'],\n            'change.create': ['ç®¡ç†è€…', 'ãƒ¦ãƒ¼ã‚¶ãƒ¼'],\n        };\n\n        const allowedRoles = permissions[permission];\n        if (!allowedRoles) {\n            return true;\n        } // æœªå®šç¾©ã®æ¨©é™ã¯è¨±å¯\n\n        return allowedRoles.includes(this.currentSession.role);\n    },\n\n    /**\n     * æ¨©é™ãƒã‚§ãƒƒã‚¯ï¼ˆUIã‚¬ãƒ¼ãƒ‰ç”¨ï¼‰\n     * @param {string} permission - å¿…è¦ãªæ¨©é™\n     * @param {Function} callback - æ¨©é™ãŒã‚ã‚‹å ´åˆã«å®Ÿè¡Œã™ã‚‹é–¢æ•°\n     */\n    requirePermission(permission, callback) {\n        if (this.hasPermission(permission)) {\n            callback();\n        } else {\n            showToast('ã“ã®æ“ä½œã‚’è¡Œã†æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“', 'error');\n        }\n    },\n\n    /**\n     * ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰æ¤œè¨¼ï¼ˆSHA-256ãƒ™ãƒ¼ã‚¹ã®ç°¡æ˜“å®Ÿè£…ï¼‰\n     * @param {string} password - å…¥åŠ›ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰\n     * @param {string} hash - ä¿å­˜ã•ã‚Œã¦ã„ã‚‹ãƒãƒƒã‚·ãƒ¥\n     * @returns {Promise<boolean>} - ä¸€è‡´ã™ã‚‹å ´åˆtrue\n     */\n    async verifyPassword(password, storedHashWithSalt) {\n        // æœ¬ç•ªç’°å¢ƒï¼šSHA-256ãƒãƒƒã‚·ãƒ¥ + saltæ¯”è¼ƒ\n        // ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ: \"hash:salt\"\n        if (!storedHashWithSalt || typeof storedHashWithSalt !== 'string') {\n            return false;\n        }\n\n        const parts = storedHashWithSalt.split(':');\n        if (parts.length !== 2) {\n            // æ—§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆsaltç„¡ã—ï¼‰ã¨ã®å¾Œæ–¹äº’æ›æ€§\n            // ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è­¦å‘Š: æ—§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¯è„†å¼±ãªãŸã‚ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å†è¨­å®šã‚’æ¨å¥¨\n            console.warn(\n                'âš ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è­¦å‘Š: æ—§å½¢å¼ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸã€‚ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å†è¨­å®šã—ã¦ãã ã•ã„ã€‚'\n            );\n            const inputHash = await this.hashPasswordLegacy(password);\n            return inputHash === storedHashWithSalt;\n        }\n\n        const [storedHash, salt] = parts;\n        const inputHash = await this.hashPassword(password, salt);\n        return inputHash === storedHash;\n    },\n\n    /**\n     * ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥åŒ–ï¼ˆSHA-256 + ãƒ©ãƒ³ãƒ€ãƒ saltï¼‰\n     * @param {string} password - ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰\n     * @param {string} [salt] - saltï¼ˆçœç•¥æ™‚ã¯æ–°è¦ç”Ÿæˆï¼‰\n     * @returns {Promise<string>} - ãƒãƒƒã‚·ãƒ¥å€¤ï¼ˆãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ: \"hash:salt\"ï¼‰\n     */\n    async hashPassword(password, salt = null) {\n        // saltãŒæŒ‡å®šã•ã‚Œã¦ã„ãªã„å ´åˆã¯æ–°è¦ç”Ÿæˆï¼ˆ128ãƒ“ãƒƒãƒˆ = 32æ–‡å­—ã®16é€²æ•°ï¼‰\n        if (!salt) {\n            const saltArray = new Uint8Array(16);\n            crypto.getRandomValues(saltArray);\n            salt = Array.from(saltArray)\n                .map(b => b.toString(16).padStart(2, '0'))\n                .join('');\n        }\n\n        const encoder = new TextEncoder();\n        const data = encoder.encode(password + salt);\n        const hashBuffer = await crypto.subtle.digest('SHA-256', data);\n        const hashArray = Array.from(new Uint8Array(hashBuffer));\n        const hash = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');\n\n        // saltã‚’æŒ‡å®šã•ã‚ŒãŸå ´åˆï¼ˆæ¤œè¨¼æ™‚ï¼‰ã¯ãƒãƒƒã‚·ãƒ¥ã®ã¿è¿”ã™\n        // saltã‚’ç”Ÿæˆã—ãŸå ´åˆï¼ˆç™»éŒ²æ™‚ï¼‰ã¯\"hash:salt\"å½¢å¼ã§è¿”ã™\n        if (arguments.length > 1) {\n            return hash;\n        } else {\n            return `${hash}:${salt}`;\n        }\n    },\n\n    /**\n     * ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥åŒ–ï¼ˆæ—§æ–¹å¼ãƒ»äº’æ›æ€§ã®ãŸã‚æ®‹å­˜ï¼‰\n     * @deprecated ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šã®ç†ç”±ã«ã‚ˆã‚Šéæ¨å¥¨ã€‚hashPassword()ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚\n     * @param {string} password - ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰\n     * @returns {Promise<string>} - ãƒãƒƒã‚·ãƒ¥å€¤\n     */\n    async hashPasswordLegacy(password) {\n        // Web Crypto API ãŒåˆ©ç”¨å¯èƒ½ã‹ãƒã‚§ãƒƒã‚¯ï¼ˆHTTPS ã¾ãŸã¯ localhost ã®ã¿ï¼‰\n        if (typeof crypto !== 'undefined' && crypto.subtle) {\n            const encoder = new TextEncoder();\n            const data = encoder.encode(password + 'appsuite_salt_2026');\n            const hashBuffer = await crypto.subtle.digest('SHA-256', data);\n            const hashArray = Array.from(new Uint8Array(hashBuffer));\n            return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');\n        } else {\n            // HTTPç’°å¢ƒã§ã¯Web Crypto APIåˆ©ç”¨ä¸å¯\n            // ãƒ‡ãƒ¢ç”¨ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼ˆæœ¬ç•ªç’°å¢ƒã§ã¯ä½¿ç”¨ã—ãªã„ã“ã¨ï¼‰\n            console.warn(\n                'âš ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è­¦å‘Š: HTTPç’°å¢ƒã®ãŸã‚ã€Web Crypto APIãŒåˆ©ç”¨ã§ãã¾ã›ã‚“ã€‚HTTPSç’°å¢ƒã®ä½¿ç”¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚'\n            );\n            // ç°¡æ˜“ãƒãƒƒã‚·ãƒ¥ï¼ˆãƒ‡ãƒ¢å°‚ç”¨ã€æœ¬ç•ªã§ã¯ä½¿ç”¨ç¦æ­¢ï¼‰\n            return password; // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ãã®ã¾ã¾è¿”ã™ï¼ˆãƒ‡ãƒ¢ç’°å¢ƒã®ã¿ï¼‰\n        }\n    },\n\n    /**\n     * ãƒ­ã‚°ã‚¤ãƒ³å¤±æ•—è¨˜éŒ²\n     * @param {string} username - ãƒ¦ãƒ¼ã‚¶ãƒ¼å\n     */\n    recordFailedAttempt(username) {\n        const key = `login_attempts_${username}`;\n        const data = JSON.parse(localStorage.getItem(key) || '{\"attempts\":0,\"firstAttempt\":0}');\n\n        const now = Date.now();\n        if (now - data.firstAttempt > this.LOCKOUT_DURATION) {\n            // ãƒ­ãƒƒã‚¯ã‚¢ã‚¦ãƒˆæœŸé–“çµŒéå¾Œã¯ãƒªã‚»ãƒƒãƒˆ\n            data.attempts = 1;\n            data.firstAttempt = now;\n        } else {\n            data.attempts++;\n        }\n        data.lastAttempt = now;\n\n        localStorage.setItem(key, JSON.stringify(data));\n\n        // ãƒ­ãƒƒã‚¯ã‚¢ã‚¦ãƒˆæ™‚ã«ãƒ­ã‚°è¨˜éŒ²\n        if (data.attempts >= this.MAX_LOGIN_ATTEMPTS) {\n            LogModule.addLog(\n                'security',\n                'ã‚·ã‚¹ãƒ†ãƒ ',\n                'system',\n                `ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ­ãƒƒã‚¯: ${username} (${this.MAX_LOGIN_ATTEMPTS}å›ã®å¤±æ•—)`\n            );\n        }\n    },\n\n    /**\n     * å¤±æ•—å›æ•°å–å¾—\n     * @param {string} username - ãƒ¦ãƒ¼ã‚¶ãƒ¼å\n     * @returns {number} - å¤±æ•—å›æ•°\n     */\n    getFailedAttempts(username) {\n        const key = `login_attempts_${username}`;\n        const data = JSON.parse(localStorage.getItem(key) || '{\"attempts\":0}');\n        return data.attempts;\n    },\n\n    /**\n     * ãƒ­ãƒƒã‚¯ã‚¢ã‚¦ãƒˆãƒã‚§ãƒƒã‚¯\n     * @param {string} username - ãƒ¦ãƒ¼ã‚¶ãƒ¼å\n     * @returns {Object} - ãƒ­ãƒƒã‚¯ã‚¢ã‚¦ãƒˆæƒ…å ±\n     */\n    checkLockout(username) {\n        const key = `login_attempts_${username}`;\n        const data = JSON.parse(localStorage.getItem(key) || '{\"attempts\":0,\"lastAttempt\":0}');\n\n        const now = Date.now();\n        const timeSinceLastAttempt = now - data.lastAttempt;\n\n        if (\n            data.attempts >= this.MAX_LOGIN_ATTEMPTS &&\n            timeSinceLastAttempt < this.LOCKOUT_DURATION\n        ) {\n            return {\n                locked: true,\n                remainingTime: this.LOCKOUT_DURATION - timeSinceLastAttempt,\n            };\n        }\n\n        return { locked: false };\n    },\n\n    /**\n     * å¤±æ•—è¨˜éŒ²ã‚¯ãƒªã‚¢\n     * @param {string} username - ãƒ¦ãƒ¼ã‚¶ãƒ¼å\n     */\n    clearFailedAttempts(username) {\n        localStorage.removeItem(`login_attempts_${username}`);\n    },\n\n    /**\n     * ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®ã‚µãƒ‹ã‚¿ã‚¤ã‚ºï¼ˆæ©Ÿå¯†æƒ…å ±é™¤å»ï¼‰\n     * @param {Object} user - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ\n     * @returns {Object} - ã‚µãƒ‹ã‚¿ã‚¤ã‚ºã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼\n     */\n    sanitizeUser(user) {\n        const { passwordHash, ...safeUser } = user;\n        return safeUser;\n    },\n\n    /**\n     * ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®š\n     */\n    setupSessionTimeout() {\n        setInterval(() => {\n            if (this.currentSession && !this.isSessionValid(this.currentSession)) {\n                showToast('ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸ', 'warning');\n                this.logout();\n            }\n        }, 60000); // 1åˆ†ã”ã¨ã«ãƒã‚§ãƒƒã‚¯\n    },\n\n    /**\n     * ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ãƒªã‚¹ãƒŠãƒ¼è¨­å®š\n     */\n    setupActivityListener() {\n        const events = ['mousedown', 'keydown', 'scroll', 'touchstart'];\n        const handler = () => {\n            if (this.isAuthenticated()) {\n                this.refreshSession();\n            }\n        };\n\n        events.forEach(event => {\n            document.addEventListener(event, handler, { passive: true });\n        });\n    },\n\n    /**\n     * ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢è¡¨ç¤º\n     */\n    showLoginScreen() {\n        const loginModal = document.getElementById('loginModal');\n        if (loginModal) {\n            loginModal.classList.add('active');\n        }\n        document.getElementById('loginUsername').value = '';\n        document.getElementById('loginPassword').value = '';\n        document.getElementById('loginError').textContent = '';\n    },\n\n    /**\n     * ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢éè¡¨ç¤º\n     */\n    hideLoginScreen() {\n        const loginModal = document.getElementById('loginModal');\n        if (loginModal) {\n            loginModal.classList.remove('active');\n        }\n    },\n\n    /**\n     * ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡å‡¦ç†\n     */\n    async handleLoginSubmit(event) {\n        event.preventDefault();\n\n        const username = document.getElementById('loginUsername')?.value.trim();\n        const password = document.getElementById('loginPassword')?.value;\n        const errorElement = document.getElementById('loginError');\n        const submitButton = event.target?.querySelector('button[type=\"submit\"]');\n\n        // å…¥åŠ›è¦ç´ ã®å­˜åœ¨ç¢ºèª\n        if (!username || !password) {\n            if (errorElement) {\n                errorElement.textContent = 'ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„';\n            }\n            return;\n        }\n\n        // ãƒœã‚¿ãƒ³ç„¡åŠ¹åŒ–ï¼ˆãƒœã‚¿ãƒ³ãŒå­˜åœ¨ã™ã‚‹å ´åˆã®ã¿ï¼‰\n        if (submitButton) {\n            submitButton.disabled = true;\n            submitButton.innerHTML = '<i class=\"fas fa-spinner fa-spin\"></i> ãƒ­ã‚°ã‚¤ãƒ³ä¸­...';\n        }\n\n        try {\n            const result = await this.login(username, password);\n\n            if (result.success) {\n                this.hideLoginScreen();\n                this.updateUIForUser(result.user);\n                showToast(`ã‚ˆã†ã“ãã€${result.user.username}ã•ã‚“`, 'success');\n\n                // ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åˆæœŸåŒ–\n                if (typeof startApplicationAfterLogin === 'function') {\n                    startApplicationAfterLogin();\n                } else if (typeof updateDashboard === 'function') {\n                    updateDashboard();\n                }\n            } else {\n                errorElement.textContent = result.error;\n                document.getElementById('loginPassword').value = '';\n            }\n        } catch (error) {\n            if (errorElement) {\n                errorElement.textContent = 'ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ';\n            }\n            console.error('Login error:', error);\n        } finally {\n            // ãƒœã‚¿ãƒ³ã®å†æœ‰åŠ¹åŒ–ï¼ˆãƒœã‚¿ãƒ³ãŒå­˜åœ¨ã™ã‚‹å ´åˆã®ã¿ï¼‰\n            if (submitButton) {\n                submitButton.disabled = false;\n                submitButton.innerHTML = '<i class=\"fas fa-sign-in-alt\"></i> ãƒ­ã‚°ã‚¤ãƒ³';\n            }\n        }\n    },\n\n    /**\n     * ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã§UIæ›´æ–°\n     * @param {Object} user - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ\n     */\n    updateUIForUser(user) {\n        const currentUserElement = document.getElementById('currentUser');\n        if (currentUserElement) {\n            currentUserElement.textContent = user.username;\n        }\n\n        // æ¨©é™ã«åŸºã¥ãUIåˆ¶å¾¡\n        this.applyPermissionBasedUI();\n    },\n\n    /**\n     * æ¨©é™ãƒ™ãƒ¼ã‚¹ã®UIåˆ¶å¾¡\n     */\n    applyPermissionBasedUI() {\n        // ç®¡ç†è€…å°‚ç”¨æ©Ÿèƒ½ã®è¡¨ç¤º/éè¡¨ç¤º\n        const adminOnlyElements = document.querySelectorAll('[data-permission=\"admin\"]');\n        adminOnlyElements.forEach(el => {\n            el.style.display = this.hasPermission('admin') ? '' : 'none';\n        });\n\n        // ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆãƒœã‚¿ãƒ³\n        const addUserButton = document.getElementById('addUserButton');\n        if (addUserButton) {\n            addUserButton.style.display = this.hasPermission('user.create') ? '' : 'none';\n        }\n\n        // è¨­å®šã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒœã‚¿ãƒ³\n        const exportButtons = document.querySelectorAll('[data-permission=\"log.export\"]');\n        exportButtons.forEach(el => {\n            el.style.display = this.hasPermission('log.export') ? '' : 'none';\n        });\n    },\n};\n\n// ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¼·åº¦ãƒã‚§ãƒƒã‚«ãƒ¼\nconst PasswordValidator = {\n    /**\n     * ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¼·åº¦ãƒã‚§ãƒƒã‚¯\n     * @param {string} password - ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰\n     * @returns {Object} - ãƒã‚§ãƒƒã‚¯çµæœ\n     */\n    check(password) {\n        const result = {\n            valid: true,\n            score: 0,\n            errors: [],\n            strength: 'weak',\n        };\n\n        // æœ€å°é•·ãƒã‚§ãƒƒã‚¯ï¼ˆ8æ–‡å­—ä»¥ä¸Šï¼‰\n        if (password.length < 8) {\n            result.valid = false;\n            result.errors.push('ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯8æ–‡å­—ä»¥ä¸Šå¿…è¦ã§ã™');\n        } else {\n            result.score += 1;\n        }\n\n        // å¤§æ–‡å­—ãƒã‚§ãƒƒã‚¯\n        if (!/[A-Z]/.test(password)) {\n            result.errors.push('å¤§æ–‡å­—ã‚’å«ã‚ã¦ãã ã•ã„');\n        } else {\n            result.score += 1;\n        }\n\n        // å°æ–‡å­—ãƒã‚§ãƒƒã‚¯\n        if (!/[a-z]/.test(password)) {\n            result.errors.push('å°æ–‡å­—ã‚’å«ã‚ã¦ãã ã•ã„');\n        } else {\n            result.score += 1;\n        }\n\n        // æ•°å­—ãƒã‚§ãƒƒã‚¯\n        if (!/[0-9]/.test(password)) {\n            result.errors.push('æ•°å­—ã‚’å«ã‚ã¦ãã ã•ã„');\n        } else {\n            result.score += 1;\n        }\n\n        // ç‰¹æ®Šæ–‡å­—ãƒã‚§ãƒƒã‚¯\n        if (!/[!@#$%^&*()_+\\-=[\\]{};':\"\\\\|,.<>/?]/.test(password)) {\n            result.errors.push('ç‰¹æ®Šæ–‡å­—ã‚’å«ã‚ã¦ãã ã•ã„');\n        } else {\n            result.score += 1;\n        }\n\n        // 12æ–‡å­—ä»¥ä¸Šã§ãƒœãƒ¼ãƒŠã‚¹\n        if (password.length >= 12) {\n            result.score += 1;\n        }\n\n        // å¼·åº¦åˆ¤å®š\n        if (result.score >= 5) {\n            result.strength = 'strong';\n        } else if (result.score >= 3) {\n            result.strength = 'medium';\n        } else {\n            result.strength = 'weak';\n        }\n\n        return result;\n    },\n\n    /**\n     * å¼·åº¦ãƒãƒ¼æ›´æ–°\n     * @param {string} password - ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰\n     * @param {HTMLElement} barElement - ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼è¦ç´ \n     * @param {HTMLElement} textElement - ãƒ†ã‚­ã‚¹ãƒˆè¦ç´ \n     */\n    updateStrengthUI(password, barElement, textElement) {\n        const result = this.check(password);\n\n        const colors = {\n            weak: '#ef4444',\n            medium: '#f59e0b',\n            strong: '#22c55e',\n        };\n\n        const labels = {\n            weak: 'å¼±ã„',\n            medium: 'æ™®é€š',\n            strong: 'å¼·ã„',\n        };\n\n        const widths = {\n            weak: '33%',\n            medium: '66%',\n            strong: '100%',\n        };\n\n        if (barElement) {\n            barElement.style.width = widths[result.strength];\n            barElement.style.backgroundColor = colors[result.strength];\n        }\n\n        if (textElement) {\n            textElement.textContent = labels[result.strength];\n            textElement.style.color = colors[result.strength];\n        }\n    },\n};\n\n// ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°ï¼ˆHTML onclickç”¨ï¼‰\nfunction handleLogin(event) {\n    AuthModule.handleLoginSubmit(event);\n}\n\nfunction handleLogout() {\n    AuthModule.logout();\n}\n\n// Export to global scope\nwindow.AuthModule = AuthModule;\nwindow.PasswordValidator = PasswordValidator;\n","usedDeprecatedRules":[{"ruleId":"semi","replacedBy":["@stylistic/semi"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"semi","url":"https://eslint.style/rules/semi"}}]}},{"ruleId":"quotes","replacedBy":["@stylistic/quotes"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"quotes","url":"https://eslint.style/rules/quotes"}}]}},{"ruleId":"indent","replacedBy":["@stylistic/indent"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"indent","url":"https://eslint.style/rules/indent"}}]}}]},{"filePath":"/home/runner/work/Appsuite-ITSM-Management/Appsuite-ITSM-Management/WebUI-Production/js/backup.js","messages":[{"ruleId":"no-undef","severity":1,"message":"'FileReader' is not defined.","line":502,"column":28,"messageId":"undef","endLine":502,"endColumn":38},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 32.","line":515,"column":1,"messageId":"wrongIndentation","endLine":515,"endColumn":33,"fix":{"range":[15712,15744],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 36.","line":516,"column":1,"messageId":"wrongIndentation","endLine":516,"endColumn":37,"fix":{"range":[15773,15809],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 36.","line":522,"column":1,"messageId":"wrongIndentation","endLine":522,"endColumn":37,"fix":{"range":[16117,16153],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 0 spaces but found 28.","line":523,"column":1,"messageId":"wrongIndentation","endLine":523,"endColumn":29,"fix":{"range":[16158,16186],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 32.","line":525,"column":1,"messageId":"wrongIndentation","endLine":525,"endColumn":33,"fix":{"range":[16219,16251],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 36.","line":526,"column":1,"messageId":"wrongIndentation","endLine":526,"endColumn":37,"fix":{"range":[16282,16318],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 36.","line":532,"column":1,"messageId":"wrongIndentation","endLine":532,"endColumn":37,"fix":{"range":[16629,16665],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 0 spaces but found 28.","line":533,"column":1,"messageId":"wrongIndentation","endLine":533,"endColumn":29,"fix":{"range":[16670,16698],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 24 spaces but found 26.","line":695,"column":1,"messageId":"wrongIndentation","endLine":695,"endColumn":27,"fix":{"range":[23262,23288],"text":"                        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 20 spaces but found 22.","line":697,"column":1,"messageId":"wrongIndentation","endLine":697,"endColumn":23,"fix":{"range":[23397,23419],"text":"                    "}}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":10,"fixableWarningCount":0,"source":"/**\n * AppSuite ITSMç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  - ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ç®¡ç†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«\n * Sprint 4: è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ã€æ¤œè¨¼ã€é¸æŠçš„ãƒªã‚¹ãƒˆã‚¢\n */\n\nconst BackupManager = {\n    // å®šæ•°\n    STORAGE_KEY: 'appsuite_backup_config',\n    HISTORY_KEY: 'backupHistory',\n    AUTO_BACKUP_INTERVAL: null,\n    VERSION: '2.0.0',\n\n    // ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚¹ã‚­ãƒ¼ãƒå®šç¾©\n    SCHEMA: {\n        requiredFields: ['version', 'timestamp'],\n        dataFields: ['settings', 'users', 'apps', 'incidents', 'changes', 'logs'],\n        settingsFields: ['api', 'general', 'notification', 'security', 'workflow', 'backup'],\n    },\n\n    /**\n     * åˆæœŸåŒ–\n     */\n    init() {\n        this.loadConfig();\n        this.startAutoBackup();\n        console.log('[BackupManager] åˆæœŸåŒ–å®Œäº†');\n    },\n\n    /**\n     * ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—\n     */\n    cleanup() {\n        this.stopAutoBackup();\n        console.log('[BackupManager] ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å®Œäº†');\n    },\n\n    /**\n     * è¨­å®šèª­ã¿è¾¼ã¿\n     */\n    loadConfig() {\n        const saved = localStorage.getItem(this.STORAGE_KEY);\n        if (saved) {\n            return JSON.parse(saved);\n        }\n        return {\n            autoBackupEnabled: true,\n            intervalMinutes: 1440, // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 24æ™‚é–“\n            retentionDays: 7,\n            includeData: {\n                settings: true,\n                users: true,\n                apps: true,\n                incidents: true,\n                changes: true,\n                logs: true,\n            },\n            lastAutoBackup: null,\n        };\n    },\n\n    /**\n     * è¨­å®šä¿å­˜\n     */\n    saveConfig(config) {\n        localStorage.setItem(this.STORAGE_KEY, JSON.stringify(config));\n    },\n\n    /**\n     * è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—é–‹å§‹\n     */\n    startAutoBackup() {\n        const config = this.loadConfig();\n\n        if (!config.autoBackupEnabled) {\n            console.log('[BackupManager] è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¯ç„¡åŠ¹ã§ã™');\n            return;\n        }\n\n        // æ—¢å­˜ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«ã‚’ã‚¯ãƒªã‚¢\n        this.stopAutoBackup();\n\n        // ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«ã‚’è¨­å®šï¼ˆæœ€å°5åˆ†ï¼‰\n        const intervalMs = Math.max(config.intervalMinutes, 5) * 60 * 1000;\n\n        this.AUTO_BACKUP_INTERVAL = setInterval(() => {\n            this.performAutoBackup();\n        }, intervalMs);\n\n        console.log(`[BackupManager] è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—é–‹å§‹: ${config.intervalMinutes}åˆ†é–“éš”`);\n\n        // å‰å›ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰æ™‚é–“ãŒçµŒã£ã¦ã„ã‚Œã°ã™ãã«å®Ÿè¡Œ\n        if (config.lastAutoBackup) {\n            const lastBackup = new Date(config.lastAutoBackup);\n            const now = new Date();\n            const elapsed = now - lastBackup;\n            if (elapsed > intervalMs) {\n                console.log('[BackupManager] å‰å›ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰æ™‚é–“çµŒé - å³æ™‚å®Ÿè¡Œ');\n                this.performAutoBackup();\n            }\n        }\n    },\n\n    /**\n     * è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—åœæ­¢\n     */\n    stopAutoBackup() {\n        if (this.AUTO_BACKUP_INTERVAL) {\n            clearInterval(this.AUTO_BACKUP_INTERVAL);\n            this.AUTO_BACKUP_INTERVAL = null;\n            console.log('[BackupManager] è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—åœæ­¢');\n        }\n    },\n\n    /**\n     * è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å®Ÿè¡Œ\n     */\n    performAutoBackup() {\n        const config = this.loadConfig();\n\n        try {\n            const backupData = this.createBackupData(config.includeData);\n\n            // localStorageã«ä¿å­˜ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãªã—ï¼‰\n            const backups = this.getBackupHistory();\n            backups.unshift({\n                id: this.generateBackupId(),\n                date: new Date().toISOString(),\n                type: 'auto',\n                size: new Blob([JSON.stringify(backupData)]).size,\n                data: backupData,\n            });\n\n            // ä¿æŒæœŸé–“ã‚’è¶…ãˆãŸå¤ã„ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’å‰Šé™¤\n            const retentionMs = config.retentionDays * 24 * 60 * 60 * 1000;\n            const now = new Date();\n            const filteredBackups = backups\n                .filter(b => {\n                    const backupDate = new Date(b.date);\n                    return now - backupDate < retentionMs;\n                })\n                .slice(0, 20); // æœ€å¤§20ä»¶\n\n            this.saveBackupHistory(filteredBackups);\n\n            // æœ€çµ‚ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æ™‚åˆ»ã‚’æ›´æ–°\n            config.lastAutoBackup = new Date().toISOString();\n            this.saveConfig(config);\n\n            console.log('[BackupManager] è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å®Œäº†');\n\n            // UIæ›´æ–°\n            if (typeof SettingsModule !== 'undefined' && SettingsModule.updateBackupStatus) {\n                SettingsModule.updateBackupStatus();\n            }\n        } catch (error) {\n            console.error('[BackupManager] è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚¨ãƒ©ãƒ¼:', error);\n        }\n    },\n\n    /**\n     * ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—IDç”Ÿæˆ\n     */\n    generateBackupId() {\n        return 'BKP-' + Date.now().toString(36).toUpperCase();\n    },\n\n    /**\n     * ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ã‚¿ä½œæˆ\n     */\n    createBackupData(includeOptions = null) {\n        const include = includeOptions || {\n            settings: true,\n            users: true,\n            apps: true,\n            incidents: true,\n            changes: true,\n            logs: true,\n        };\n\n        const data = {\n            version: this.VERSION,\n            timestamp: new Date().toISOString(),\n            appVersion: '1.0.0',\n            exportedBy: 'BackupManager',\n        };\n\n        if (include.settings && typeof SettingsModule !== 'undefined') {\n            data.settings = SettingsModule.load();\n        }\n        if (include.users && typeof DataStore !== 'undefined') {\n            data.users = DataStore.users || [];\n        }\n        if (include.apps && typeof DataStore !== 'undefined') {\n            data.apps = DataStore.apps || [];\n        }\n        if (include.incidents && typeof DataStore !== 'undefined') {\n            data.incidents = DataStore.incidents || [];\n        }\n        if (include.changes && typeof DataStore !== 'undefined') {\n            data.changes = DataStore.changes || [];\n        }\n        if (include.logs && typeof DataStore !== 'undefined') {\n            data.logs = DataStore.logs || [];\n        }\n\n        return data;\n    },\n\n    /**\n     * ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å±¥æ­´å–å¾—\n     */\n    getBackupHistory() {\n        const saved = localStorage.getItem(this.HISTORY_KEY);\n        return saved ? JSON.parse(saved) : [];\n    },\n\n    /**\n     * ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å±¥æ­´ä¿å­˜\n     */\n    saveBackupHistory(history) {\n        localStorage.setItem(this.HISTORY_KEY, JSON.stringify(history));\n    },\n\n    /**\n     * æ‰‹å‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼‰\n     */\n    createManualBackup(options = {}) {\n        const includeData = options.includeData || {\n            settings: true,\n            users: true,\n            apps: true,\n            incidents: true,\n            changes: true,\n            logs: true,\n        };\n\n        const backupData = this.createBackupData(includeData);\n\n        // ãƒã‚§ãƒƒã‚¯ã‚µãƒ è¿½åŠ \n        backupData.checksum = this.calculateChecksum(backupData);\n\n        const blob = new Blob([JSON.stringify(backupData, null, 2)], { type: 'application/json' });\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = `appsuite_backup_${new Date().toISOString().split('T')[0]}_${Date.now()}.json`;\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n        URL.revokeObjectURL(url);\n\n        // å±¥æ­´ã«è¿½åŠ \n        const backups = this.getBackupHistory();\n        backups.unshift({\n            id: this.generateBackupId(),\n            date: new Date().toISOString(),\n            type: 'manual',\n            size: blob.size,\n            filename: a.download,\n        });\n        this.saveBackupHistory(backups.slice(0, 50));\n\n        if (typeof showToast === 'function') {\n            showToast('ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’ä½œæˆã—ã¾ã—ãŸ', 'success');\n        }\n        if (typeof LogModule !== 'undefined') {\n            LogModule.addLog('export', 'ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—', 'system', 'æ‰‹å‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’ä½œæˆ');\n        }\n\n        return backupData;\n    },\n\n    /**\n     * ãƒã‚§ãƒƒã‚¯ã‚µãƒ è¨ˆç®—ï¼ˆç°¡æ˜“ç‰ˆï¼‰\n     */\n    calculateChecksum(data) {\n        const str = JSON.stringify({\n            users: data.users?.length || 0,\n            apps: data.apps?.length || 0,\n            incidents: data.incidents?.length || 0,\n            changes: data.changes?.length || 0,\n            logs: data.logs?.length || 0,\n            timestamp: data.timestamp,\n        });\n\n        let hash = 0;\n        for (let i = 0; i < str.length; i++) {\n            const char = str.charCodeAt(i);\n            hash = (hash << 5) - hash + char;\n            hash = hash & hash;\n        }\n        return Math.abs(hash).toString(16);\n    },\n\n    /**\n     * ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æ¤œè¨¼\n     */\n    validateBackup(data) {\n        const errors = [];\n        const warnings = [];\n\n        // å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒã‚§ãƒƒã‚¯\n        for (const field of this.SCHEMA.requiredFields) {\n            if (!data[field]) {\n                errors.push(`å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ \"${field}\" ãŒã‚ã‚Šã¾ã›ã‚“`);\n            }\n        }\n\n        // ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒã‚§ãƒƒã‚¯\n        if (data.version) {\n            const [major] = data.version.split('.');\n            const [currentMajor] = this.VERSION.split('.');\n            if (parseInt(major) > parseInt(currentMajor)) {\n                warnings.push(\n                    `ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒãƒ¼ã‚¸ãƒ§ãƒ³(${data.version})ãŒç¾åœ¨ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³(${this.VERSION})ã‚ˆã‚Šæ–°ã—ã„ã§ã™`\n                );\n            }\n        }\n\n        // ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å‹ãƒã‚§ãƒƒã‚¯\n        for (const field of this.SCHEMA.dataFields) {\n            if (data[field] !== undefined) {\n                if (field === 'settings') {\n                    if (typeof data[field] !== 'object' || Array.isArray(data[field])) {\n                        errors.push(`\"${field}\" ã¯è¨­å®šã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™`);\n                    }\n                } else {\n                    if (!Array.isArray(data[field])) {\n                        errors.push(`\"${field}\" ã¯é…åˆ—ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™`);\n                    }\n                }\n            }\n        }\n\n        // ãƒã‚§ãƒƒã‚¯ã‚µãƒ æ¤œè¨¼\n        if (data.checksum) {\n            const originalChecksum = data.checksum;\n            const dataWithoutChecksum = { ...data };\n            delete dataWithoutChecksum.checksum;\n            const calculatedChecksum = this.calculateChecksum(dataWithoutChecksum);\n            if (originalChecksum !== calculatedChecksum) {\n                warnings.push('ãƒã‚§ãƒƒã‚¯ã‚µãƒ ãŒä¸€è‡´ã—ã¾ã›ã‚“ã€‚ãƒ‡ãƒ¼ã‚¿ãŒå¤‰æ›´ã•ã‚Œã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™');\n            }\n        }\n\n        return {\n            valid: errors.length === 0,\n            errors,\n            warnings,\n            summary: {\n                users: data.users?.length || 0,\n                apps: data.apps?.length || 0,\n                incidents: data.incidents?.length || 0,\n                changes: data.changes?.length || 0,\n                logs: data.logs?.length || 0,\n            },\n        };\n    },\n\n    /**\n     * é¸æŠçš„ãƒªã‚¹ãƒˆã‚¢\n     */\n    selectiveRestore(data, options = {}) {\n        const restoreOptions = {\n            settings: options.settings !== false,\n            users: options.users !== false,\n            apps: options.apps !== false,\n            incidents: options.incidents !== false,\n            changes: options.changes !== false,\n            logs: options.logs !== false,\n            merge: options.merge || false, // true: ãƒãƒ¼ã‚¸, false: ä¸Šæ›¸ã\n        };\n\n        const validation = this.validateBackup(data);\n        if (!validation.valid) {\n            return {\n                success: false,\n                errors: validation.errors,\n            };\n        }\n\n        const restored = {\n            settings: false,\n            users: 0,\n            apps: 0,\n            incidents: 0,\n            changes: 0,\n            logs: 0,\n        };\n\n        try {\n            // è¨­å®šã®ãƒªã‚¹ãƒˆã‚¢\n            if (restoreOptions.settings && data.settings) {\n                if (typeof SettingsModule !== 'undefined') {\n                    SettingsModule.save(data.settings);\n                    restored.settings = true;\n                }\n            }\n\n            // DataStoreã¸ã®ãƒªã‚¹ãƒˆã‚¢\n            if (typeof DataStore !== 'undefined') {\n                if (restoreOptions.users && data.users) {\n                    if (restoreOptions.merge) {\n                        DataStore.users = this.mergeArrays(DataStore.users, data.users, 'id');\n                    } else {\n                        DataStore.users = data.users;\n                    }\n                    restored.users = data.users.length;\n                }\n\n                if (restoreOptions.apps && data.apps) {\n                    if (restoreOptions.merge) {\n                        DataStore.apps = this.mergeArrays(DataStore.apps, data.apps, 'id');\n                    } else {\n                        DataStore.apps = data.apps;\n                    }\n                    restored.apps = data.apps.length;\n                }\n\n                if (restoreOptions.incidents && data.incidents) {\n                    if (restoreOptions.merge) {\n                        DataStore.incidents = this.mergeArrays(\n                            DataStore.incidents,\n                            data.incidents,\n                            'id'\n                        );\n                    } else {\n                        DataStore.incidents = data.incidents;\n                    }\n                    restored.incidents = data.incidents.length;\n                }\n\n                if (restoreOptions.changes && data.changes) {\n                    if (restoreOptions.merge) {\n                        DataStore.changes = this.mergeArrays(DataStore.changes, data.changes, 'id');\n                    } else {\n                        DataStore.changes = data.changes;\n                    }\n                    restored.changes = data.changes.length;\n                }\n\n                if (restoreOptions.logs && data.logs) {\n                    if (restoreOptions.merge) {\n                        DataStore.logs = this.mergeArrays(DataStore.logs, data.logs, 'id');\n                    } else {\n                        DataStore.logs = data.logs;\n                    }\n                    restored.logs = data.logs.length;\n                }\n            }\n\n            // UIæ›´æ–°\n            if (typeof refreshAllModules === 'function') {\n                refreshAllModules();\n            }\n            if (typeof updateDashboard === 'function') {\n                updateDashboard();\n            }\n            if (typeof SettingsModule !== 'undefined' && SettingsModule.loadToForm) {\n                SettingsModule.loadToForm();\n            }\n\n            if (typeof LogModule !== 'undefined') {\n                LogModule.addLog(\n                    'update',\n                    'ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—',\n                    'system',\n                    `é¸æŠçš„ãƒªã‚¹ãƒˆã‚¢å®Ÿè¡Œ: Users=${restored.users}, Apps=${restored.apps}, ` +\n                        `Incidents=${restored.incidents}, Changes=${restored.changes}`\n                );\n            }\n\n            return {\n                success: true,\n                restored,\n                warnings: validation.warnings,\n            };\n        } catch (error) {\n            console.error('[BackupManager] ãƒªã‚¹ãƒˆã‚¢ã‚¨ãƒ©ãƒ¼:', error);\n            return {\n                success: false,\n                errors: [error.message],\n            };\n        }\n    },\n\n    /**\n     * é…åˆ—ãƒãƒ¼ã‚¸ï¼ˆIDã§é‡è¤‡æ’é™¤ï¼‰\n     */\n    mergeArrays(existing, incoming, idField = 'id') {\n        const existingMap = new Map(existing.map(item => [item[idField], item]));\n        for (const item of incoming) {\n            existingMap.set(item[idField], item);\n        }\n        return Array.from(existingMap.values());\n    },\n\n    /**\n     * ãƒªã‚¹ãƒˆã‚¢ãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤º\n     */\n    showRestoreDialog(file) {\n        const reader = new FileReader();\n\n        reader.onload = e => {\n            try {\n                const data = JSON.parse(e.target.result);\n                const validation = this.validateBackup(data);\n\n                const modalContent = `\n                    <div class=\"restore-dialog\">\n                        <div class=\"restore-validation ${validation.valid ? 'valid' : 'invalid'}\">\n                            <h4><i class=\"fas ${validation.valid ? 'fa-check-circle' : 'fa-exclamation-triangle'}\"></i>\n                                æ¤œè¨¼çµæœ: ${validation.valid ? 'æœ‰åŠ¹' : 'ç„¡åŠ¹'}</h4>\n                            ${\n                                validation.errors.length > 0\n                                    ? `\n                                <div class=\"validation-errors\">\n                                    <strong>ã‚¨ãƒ©ãƒ¼:</strong>\n                                    <ul>${validation.errors.map(e => `<li>${escapeHtml(e)}</li>`).join('')}</ul>\n                                </div>\n                            `\n                                    : ''\n                            }\n                            ${\n                                validation.warnings.length > 0\n                                    ? `\n                                <div class=\"validation-warnings\">\n                                    <strong>è­¦å‘Š:</strong>\n                                    <ul>${validation.warnings.map(w => `<li>${escapeHtml(w)}</li>`).join('')}</ul>\n                                </div>\n                            `\n                                    : ''\n                            }\n                        </div>\n\n                        <div class=\"restore-summary\">\n                            <h4><i class=\"fas fa-database\"></i> ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å†…å®¹</h4>\n                            <table class=\"summary-table\">\n                                <tr><td>ãƒãƒ¼ã‚¸ãƒ§ãƒ³</td><td>${escapeHtml(data.version || '-')}</td></tr>\n                                <tr><td>ä½œæˆæ—¥æ™‚</td><td>${data.timestamp ? new Date(data.timestamp).toLocaleString('ja-JP') : '-'}</td></tr>\n                                <tr><td>ãƒ¦ãƒ¼ã‚¶ãƒ¼</td><td>${validation.summary.users}ä»¶</td></tr>\n                                <tr><td>ã‚¢ãƒ—ãƒª</td><td>${validation.summary.apps}ä»¶</td></tr>\n                                <tr><td>ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ</td><td>${validation.summary.incidents}ä»¶</td></tr>\n                                <tr><td>å¤‰æ›´è¦æ±‚</td><td>${validation.summary.changes}ä»¶</td></tr>\n                                <tr><td>ãƒ­ã‚°</td><td>${validation.summary.logs}ä»¶</td></tr>\n                            </table>\n                        </div>\n\n                        <div class=\"restore-options\">\n                            <h4><i class=\"fas fa-cog\"></i> ãƒªã‚¹ãƒˆã‚¢ã‚ªãƒ—ã‚·ãƒ§ãƒ³</h4>\n                            <div class=\"option-group\">\n                                <label><input type=\"checkbox\" id=\"restoreSettings\" checked> è¨­å®š</label>\n                                <label><input type=\"checkbox\" id=\"restoreUsers\" checked> ãƒ¦ãƒ¼ã‚¶ãƒ¼</label>\n                                <label><input type=\"checkbox\" id=\"restoreApps\" checked> ã‚¢ãƒ—ãƒª</label>\n                                <label><input type=\"checkbox\" id=\"restoreIncidents\" checked> ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ</label>\n                                <label><input type=\"checkbox\" id=\"restoreChanges\" checked> å¤‰æ›´è¦æ±‚</label>\n                                <label><input type=\"checkbox\" id=\"restoreLogs\" checked> ãƒ­ã‚°</label>\n                            </div>\n                            <div class=\"merge-option\">\n                                <label><input type=\"checkbox\" id=\"restoreMerge\"> æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã¨ãƒãƒ¼ã‚¸ï¼ˆãƒã‚§ãƒƒã‚¯ãªã—ã§ä¸Šæ›¸ãï¼‰</label>\n                            </div>\n                        </div>\n                    </div>\n                `;\n\n                if (typeof openModal === 'function') {\n                    openModal('ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®ãƒªã‚¹ãƒˆã‚¢', modalContent, () => {\n                        if (!validation.valid) {\n                            showToast('ç„¡åŠ¹ãªãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ•ã‚¡ã‚¤ãƒ«ã§ã™', 'error');\n                            return;\n                        }\n\n                        const options = {\n                            settings: document.getElementById('restoreSettings')?.checked,\n                            users: document.getElementById('restoreUsers')?.checked,\n                            apps: document.getElementById('restoreApps')?.checked,\n                            incidents: document.getElementById('restoreIncidents')?.checked,\n                            changes: document.getElementById('restoreChanges')?.checked,\n                            logs: document.getElementById('restoreLogs')?.checked,\n                            merge: document.getElementById('restoreMerge')?.checked,\n                        };\n\n                        const result = this.selectiveRestore(data, options);\n\n                        if (result.success) {\n                            showToast('ãƒªã‚¹ãƒˆã‚¢ãŒå®Œäº†ã—ã¾ã—ãŸ', 'success');\n                        } else {\n                            showToast(\n                                'ãƒªã‚¹ãƒˆã‚¢ã«å¤±æ•—ã—ã¾ã—ãŸ: ' + result.errors.join(', '),\n                                'error'\n                            );\n                        }\n                    });\n                }\n            } catch (error) {\n                console.error('[BackupManager] ãƒ•ã‚¡ã‚¤ãƒ«è§£æã‚¨ãƒ©ãƒ¼:', error);\n                if (typeof showToast === 'function') {\n                    showToast('ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ•ã‚¡ã‚¤ãƒ«ã®è§£æã«å¤±æ•—ã—ã¾ã—ãŸ', 'error');\n                }\n            }\n        };\n\n        reader.readAsText(file);\n    },\n\n    /**\n     * è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—è¨­å®šUIæ›´æ–°\n     */\n    updateAutoBackupUI() {\n        const config = this.loadConfig();\n\n        const autoBackupEl = document.getElementById('autoBackup');\n        if (autoBackupEl) {\n            autoBackupEl.checked = config.autoBackupEnabled;\n        }\n\n        const intervalEl = document.getElementById('backupInterval');\n        if (intervalEl) {\n            const intervalMap = {\n                60: 'hourly',\n                1440: 'daily',\n                10080: 'weekly',\n            };\n            intervalEl.value = intervalMap[config.intervalMinutes] || 'daily';\n        }\n\n        const retentionEl = document.getElementById('backupRetention');\n        if (retentionEl) {\n            retentionEl.value = config.retentionDays;\n        }\n    },\n\n    /**\n     * è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—è¨­å®šä¿å­˜\n     */\n    saveAutoBackupSettings() {\n        const config = this.loadConfig();\n\n        const autoBackupEl = document.getElementById('autoBackup');\n        if (autoBackupEl) {\n            config.autoBackupEnabled = autoBackupEl.checked;\n        }\n\n        const intervalEl = document.getElementById('backupInterval');\n        if (intervalEl) {\n            const intervalMap = {\n                hourly: 60,\n                daily: 1440,\n                weekly: 10080,\n            };\n            config.intervalMinutes = intervalMap[intervalEl.value] || 1440;\n        }\n\n        const retentionEl = document.getElementById('backupRetention');\n        if (retentionEl) {\n            config.retentionDays = parseInt(retentionEl.value) || 7;\n        }\n\n        this.saveConfig(config);\n\n        // ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ãƒ¼å†èµ·å‹•\n        this.stopAutoBackup();\n        if (config.autoBackupEnabled) {\n            this.startAutoBackup();\n        }\n\n        if (typeof showToast === 'function') {\n            showToast('è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—è¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸ', 'success');\n        }\n        if (typeof LogModule !== 'undefined') {\n            LogModule.addLog('update', 'ã‚·ã‚¹ãƒ†ãƒ è¨­å®š', 'system', 'è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—è¨­å®šã‚’æ›´æ–°');\n        }\n    },\n\n    /**\n     * ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—çµ±è¨ˆå–å¾—\n     */\n    getStatistics() {\n        const history = this.getBackupHistory();\n        const config = this.loadConfig();\n\n        const autoBackups = history.filter(b => b.type === 'auto');\n        const manualBackups = history.filter(b => b.type === 'manual');\n        const totalSize = history.reduce((sum, b) => sum + (b.size || 0), 0);\n\n        return {\n            totalBackups: history.length,\n            autoBackups: autoBackups.length,\n            manualBackups: manualBackups.length,\n            totalSize,\n            lastBackup: history[0]?.date || null,\n            nextScheduled:\n                config.autoBackupEnabled && config.lastAutoBackup\n                    ? new Date(\n                          new Date(config.lastAutoBackup).getTime() +\n                              config.intervalMinutes * 60 * 1000\n                      )\n                    : null,\n            autoBackupEnabled: config.autoBackupEnabled,\n        };\n    },\n};\n\n// ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ\nif (typeof window !== 'undefined') {\n    window.BackupManager = BackupManager;\n}\n","usedDeprecatedRules":[{"ruleId":"semi","replacedBy":["@stylistic/semi"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"semi","url":"https://eslint.style/rules/semi"}}]}},{"ruleId":"quotes","replacedBy":["@stylistic/quotes"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"quotes","url":"https://eslint.style/rules/quotes"}}]}},{"ruleId":"indent","replacedBy":["@stylistic/indent"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"indent","url":"https://eslint.style/rules/indent"}}]}}]},{"filePath":"/home/runner/work/Appsuite-ITSM-Management/Appsuite-ITSM-Management/WebUI-Production/js/components.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Pagination' is assigned a value but never used.","line":9,"column":7,"messageId":"unusedVar","endLine":9,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"Pagination"},"fix":{"range":[102,3711],"text":""},"desc":"Remove unused variable 'Pagination'."}]},{"ruleId":"no-undef","severity":1,"message":"'requestAnimationFrame' is not defined.","line":300,"column":9,"messageId":"undef","endLine":300,"endColumn":30},{"ruleId":"no-unused-vars","severity":1,"message":"'Loading' is assigned a value but never used.","line":364,"column":7,"messageId":"unusedVar","endLine":364,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"Loading"},"fix":{"range":[10445,11576],"text":""},"desc":"Remove unused variable 'Loading'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Tabs' is assigned a value but never used.","line":412,"column":7,"messageId":"unusedVar","endLine":412,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"Tabs"},"fix":{"range":[11599,12575],"text":""},"desc":"Remove unused variable 'Tabs'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'TableSort' is assigned a value but never used.","line":511,"column":7,"messageId":"unusedVar","endLine":511,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"TableSort"},"fix":{"range":[13917,15075],"text":""},"desc":"Remove unused variable 'TableSort'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'SearchHighlight' is assigned a value but never used.","line":552,"column":7,"messageId":"unusedVar","endLine":552,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"SearchHighlight"},"fix":{"range":[15103,15669],"text":""},"desc":"Remove unused variable 'SearchHighlight'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * AppSuite ç®¡ç†é‹ç”¨ã‚·ã‚¹ãƒ†ãƒ  - å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ\n * Phase 3 Sprint 1: å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…\n */\n\n/**\n * ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ\n */\nconst Pagination = {\n    /**\n     * ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç”Ÿæˆ\n     * @param {Object} options - ã‚ªãƒ—ã‚·ãƒ§ãƒ³\n     * @param {number} options.currentPage - ç¾åœ¨ã®ãƒšãƒ¼ã‚¸\n     * @param {number} options.totalItems - ç·ã‚¢ã‚¤ãƒ†ãƒ æ•°\n     * @param {number} options.itemsPerPage - 1ãƒšãƒ¼ã‚¸ã‚ãŸã‚Šã®ã‚¢ã‚¤ãƒ†ãƒ æ•°\n     * @param {Function} options.onPageChange - ãƒšãƒ¼ã‚¸å¤‰æ›´æ™‚ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯\n     * @returns {string} - HTMLæ–‡å­—åˆ—\n     */\n    render(options) {\n        const { currentPage, totalItems, itemsPerPage, containerId } = options;\n        const totalPages = Math.ceil(totalItems / itemsPerPage);\n\n        if (totalPages <= 1) {\n            return '';\n        }\n\n        const startItem = (currentPage - 1) * itemsPerPage + 1;\n        const endItem = Math.min(currentPage * itemsPerPage, totalItems);\n\n        let html = `\n            <div class=\"pagination-container\">\n                <div class=\"pagination-info\">\n                    ${totalItems}ä»¶ä¸­ ${startItem}-${endItem}ä»¶ã‚’è¡¨ç¤º\n                </div>\n                <div class=\"pagination-controls\">\n        `;\n\n        // å‰ã¸ãƒœã‚¿ãƒ³\n        html += `\n            <button class=\"pagination-btn ${currentPage === 1 ? 'disabled' : ''}\"\n                    onclick=\"Pagination.goToPage('${containerId}', ${currentPage - 1})\"\n                    ${currentPage === 1 ? 'disabled' : ''}>\n                <i class=\"fas fa-chevron-left\"></i>\n            </button>\n        `;\n\n        // ãƒšãƒ¼ã‚¸ç•ªå·\n        const maxVisiblePages = 5;\n        let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));\n        const endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);\n\n        if (endPage - startPage < maxVisiblePages - 1) {\n            startPage = Math.max(1, endPage - maxVisiblePages + 1);\n        }\n\n        if (startPage > 1) {\n            html += `<button class=\"pagination-btn\" onclick=\"Pagination.goToPage('${containerId}', 1)\">1</button>`;\n            if (startPage > 2) {\n                html += `<span class=\"pagination-ellipsis\">...</span>`;\n            }\n        }\n\n        for (let i = startPage; i <= endPage; i++) {\n            html += `\n                <button class=\"pagination-btn ${i === currentPage ? 'active' : ''}\"\n                        onclick=\"Pagination.goToPage('${containerId}', ${i})\">\n                    ${i}\n                </button>\n            `;\n        }\n\n        if (endPage < totalPages) {\n            if (endPage < totalPages - 1) {\n                html += `<span class=\"pagination-ellipsis\">...</span>`;\n            }\n            html += `<button class=\"pagination-btn\" onclick=\"Pagination.goToPage('${containerId}', ${totalPages})\">${totalPages}</button>`;\n        }\n\n        // æ¬¡ã¸ãƒœã‚¿ãƒ³\n        html += `\n            <button class=\"pagination-btn ${currentPage === totalPages ? 'disabled' : ''}\"\n                    onclick=\"Pagination.goToPage('${containerId}', ${currentPage + 1})\"\n                    ${currentPage === totalPages ? 'disabled' : ''}>\n                <i class=\"fas fa-chevron-right\"></i>\n            </button>\n        `;\n\n        html += `\n                </div>\n            </div>\n        `;\n\n        return html;\n    },\n\n    // ãƒšãƒ¼ã‚¸å¤‰æ›´ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ï¼ˆå„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ä¸Šæ›¸ãå¯èƒ½ï¼‰\n    handlers: {},\n\n    /**\n     * ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’ç™»éŒ²\n     * @param {string} containerId - ã‚³ãƒ³ãƒ†ãƒŠID\n     * @param {Function} handler - ãƒšãƒ¼ã‚¸å¤‰æ›´ãƒãƒ³ãƒ‰ãƒ©ãƒ¼\n     */\n    registerHandler(containerId, handler) {\n        this.handlers[containerId] = handler;\n    },\n\n    /**\n     * æŒ‡å®šãƒšãƒ¼ã‚¸ã«ç§»å‹•\n     * @param {string} containerId - ã‚³ãƒ³ãƒ†ãƒŠID\n     * @param {number} page - ãƒšãƒ¼ã‚¸ç•ªå·\n     */\n    goToPage(containerId, page) {\n        const handler = this.handlers[containerId];\n        if (handler) {\n            handler(page);\n        }\n    },\n};\n\n/**\n * ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ\n */\nconst Modal = {\n    /**\n     * ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ã\n     * @param {Object} options - ã‚ªãƒ—ã‚·ãƒ§ãƒ³\n     * @param {string} options.title - ã‚¿ã‚¤ãƒˆãƒ«\n     * @param {string} options.content - HTMLå†…å®¹\n     * @param {Array} options.buttons - ãƒœã‚¿ãƒ³é…åˆ—\n     * @param {string} options.size - ã‚µã‚¤ã‚ºï¼ˆ'small', 'medium', 'large'ï¼‰\n     * @param {Function} options.onClose - é–‰ã˜ãŸæ™‚ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯\n     */\n    open(options) {\n        const { title, content, buttons = [], size = 'medium', onClose } = options;\n\n        document.getElementById('modalTitle').textContent = title;\n        document.getElementById('modalBody').innerHTML = content;\n\n        const footer = document.getElementById('modalFooter');\n        footer.innerHTML = buttons\n            .map(btn => {\n                const onclick =\n                    typeof btn.onclick === 'function'\n                        ? `(${btn.onclick.toString()})()`\n                        : btn.onclick;\n                return `<button class=\"btn ${btn.class || ''}\" onclick=\"${onclick}\">${escapeHtml(btn.text)}</button>`;\n            })\n            .join('');\n\n        const modal = document.getElementById('modal');\n        modal.className = `modal modal-${size}`;\n\n        document.getElementById('modalOverlay').classList.add('active');\n\n        this.onCloseCallback = onClose;\n    },\n\n    /**\n     * ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹\n     */\n    close() {\n        document.getElementById('modalOverlay').classList.remove('active');\n\n        if (this.onCloseCallback) {\n            this.onCloseCallback();\n            this.onCloseCallback = null;\n        }\n    },\n\n    /**\n     * ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’è¡¨ç¤º\n     * @param {string} message - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸\n     * @param {Function} onConfirm - ç¢ºèªæ™‚ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯\n     * @param {Function} onCancel - ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ™‚ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯\n     */\n    confirm(message, onConfirm, onCancel) {\n        this.open({\n            title: 'ç¢ºèª',\n            content: `<p>${escapeHtml(message)}</p>`,\n            size: 'small',\n            buttons: [\n                {\n                    text: 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«',\n                    class: 'btn-secondary',\n                    onclick: () => {\n                        Modal.close();\n                        if (onCancel) {\n                            onCancel();\n                        }\n                    },\n                },\n                {\n                    text: 'ç¢ºèª',\n                    class: 'btn-primary',\n                    onclick: () => {\n                        Modal.close();\n                        if (onConfirm) {\n                            onConfirm();\n                        }\n                    },\n                },\n            ],\n        });\n    },\n\n    /**\n     * ã‚¢ãƒ©ãƒ¼ãƒˆãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’è¡¨ç¤º\n     * @param {string} message - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸\n     * @param {string} type - ã‚¿ã‚¤ãƒ—ï¼ˆ'info', 'success', 'warning', 'error'ï¼‰\n     */\n    alert(message, type = 'info') {\n        const icons = {\n            info: 'fa-info-circle',\n            success: 'fa-check-circle',\n            warning: 'fa-exclamation-triangle',\n            error: 'fa-times-circle',\n        };\n\n        const colors = {\n            info: 'var(--info-color)',\n            success: 'var(--success-color)',\n            warning: 'var(--warning-color)',\n            error: 'var(--danger-color)',\n        };\n\n        this.open({\n            title: type === 'error' ? 'ã‚¨ãƒ©ãƒ¼' : type === 'warning' ? 'è­¦å‘Š' : 'ãŠçŸ¥ã‚‰ã›',\n            content: `\n                <div style=\"text-align: center; padding: 20px;\">\n                    <i class=\"fas ${icons[type]}\" style=\"font-size: 48px; color: ${colors[type]}; margin-bottom: 16px;\"></i>\n                    <p style=\"margin: 0;\">${escapeHtml(message)}</p>\n                </div>\n            `,\n            size: 'small',\n            buttons: [\n                {\n                    text: 'OK',\n                    class: 'btn-primary',\n                    onclick: 'Modal.close()',\n                },\n            ],\n        });\n    },\n};\n\n/**\n * ãƒˆãƒ¼ã‚¹ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆå¼·åŒ–ç‰ˆï¼‰\n */\nconst Toast = {\n    container: null,\n    queue: [],\n    maxVisible: 5,\n\n    /**\n     * åˆæœŸåŒ–\n     */\n    init() {\n        this.container = document.getElementById('toastContainer');\n        if (!this.container) {\n            this.container = document.createElement('div');\n            this.container.id = 'toastContainer';\n            this.container.className = 'toast-container';\n            document.body.appendChild(this.container);\n        }\n    },\n\n    /**\n     * ãƒˆãƒ¼ã‚¹ãƒˆã‚’è¡¨ç¤º\n     * @param {string} message - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸\n     * @param {string} type - ã‚¿ã‚¤ãƒ—ï¼ˆ'success', 'error', 'warning', 'info'ï¼‰\n     * @param {number} duration - è¡¨ç¤ºæ™‚é–“ï¼ˆãƒŸãƒªç§’ï¼‰\n     */\n    show(message, type = 'info', duration = 3000) {\n        if (!this.container) {\n            this.init();\n        }\n\n        const toast = document.createElement('div');\n        toast.className = `toast toast-${type}`;\n\n        const icons = {\n            success: 'fa-check-circle',\n            error: 'fa-exclamation-circle',\n            warning: 'fa-exclamation-triangle',\n            info: 'fa-info-circle',\n        };\n\n        toast.innerHTML = `\n            <i class=\"fas ${icons[type]}\"></i>\n            <span class=\"toast-message\">${escapeHtml(message)}</span>\n            <button class=\"toast-close\" onclick=\"Toast.dismiss(this.parentElement)\">\n                <i class=\"fas fa-times\"></i>\n            </button>\n        `;\n\n        this.container.appendChild(toast);\n\n        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é–‹å§‹\n        requestAnimationFrame(() => {\n            toast.classList.add('show');\n        });\n\n        // è‡ªå‹•å‰Šé™¤\n        if (duration > 0) {\n            setTimeout(() => {\n                this.dismiss(toast);\n            }, duration);\n        }\n\n        // æœ€å¤§æ•°ã‚’è¶…ãˆãŸã‚‰å¤ã„ã‚‚ã®ã‚’å‰Šé™¤\n        const toasts = this.container.querySelectorAll('.toast');\n        if (toasts.length > this.maxVisible) {\n            this.dismiss(toasts[0]);\n        }\n    },\n\n    /**\n     * ãƒˆãƒ¼ã‚¹ãƒˆã‚’å‰Šé™¤\n     * @param {HTMLElement} toast - ãƒˆãƒ¼ã‚¹ãƒˆè¦ç´ \n     */\n    dismiss(toast) {\n        if (!toast || !toast.parentElement) {\n            return;\n        }\n\n        toast.classList.add('hide');\n        setTimeout(() => {\n            if (toast.parentElement) {\n                toast.remove();\n            }\n        }, 300);\n    },\n\n    /**\n     * å…¨ãƒˆãƒ¼ã‚¹ãƒˆã‚’ã‚¯ãƒªã‚¢\n     */\n    clear() {\n        if (!this.container) {\n            return;\n        }\n        const toasts = this.container.querySelectorAll('.toast');\n        toasts.forEach(toast => this.dismiss(toast));\n    },\n\n    // ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆãƒ¡ã‚½ãƒƒãƒ‰\n    success(message, duration) {\n        this.show(message, 'success', duration);\n    },\n    error(message, duration) {\n        this.show(message, 'error', duration);\n    },\n    warning(message, duration) {\n        this.show(message, 'warning', duration);\n    },\n    info(message, duration) {\n        this.show(message, 'info', duration);\n    },\n};\n\n/**\n * ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ\n */\nconst Loading = {\n    overlay: null,\n\n    /**\n     * ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º\n     * @param {string} message - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸\n     */\n    show(message = 'èª­ã¿è¾¼ã¿ä¸­...') {\n        if (!this.overlay) {\n            this.overlay = document.createElement('div');\n            this.overlay.className = 'loading-overlay';\n            this.overlay.innerHTML = `\n                <div class=\"loading-content\">\n                    <div class=\"loading-spinner\"></div>\n                    <p class=\"loading-message\">${escapeHtml(message)}</p>\n                </div>\n            `;\n            document.body.appendChild(this.overlay);\n        } else {\n            this.overlay.querySelector('.loading-message').textContent = message;\n        }\n\n        this.overlay.classList.add('active');\n    },\n\n    /**\n     * ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°éè¡¨ç¤º\n     */\n    hide() {\n        if (this.overlay) {\n            this.overlay.classList.remove('active');\n        }\n    },\n\n    /**\n     * ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ›´æ–°\n     * @param {string} message - æ–°ã—ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸\n     */\n    updateMessage(message) {\n        if (this.overlay) {\n            this.overlay.querySelector('.loading-message').textContent = message;\n        }\n    },\n};\n\n/**\n * ã‚¿ãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ\n */\nconst Tabs = {\n    /**\n     * ã‚¿ãƒ–ã‚’åˆæœŸåŒ–\n     * @param {string} containerId - ã‚¿ãƒ–ã‚³ãƒ³ãƒ†ãƒŠã®ID\n     * @param {Function} onChange - ã‚¿ãƒ–å¤‰æ›´æ™‚ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯\n     */\n    init(containerId, onChange) {\n        const container = document.getElementById(containerId);\n        if (!container) {\n            return;\n        }\n\n        const tabs = container.querySelectorAll('.tab-button');\n        const panels = container.querySelectorAll('.tab-panel');\n\n        tabs.forEach(tab => {\n            tab.addEventListener('click', () => {\n                const targetId = tab.dataset.tab;\n\n                // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ\n                tabs.forEach(t => t.classList.remove('active'));\n                tab.classList.add('active');\n\n                // ãƒ‘ãƒãƒ«åˆ‡ã‚Šæ›¿ãˆ\n                panels.forEach(p => {\n                    p.classList.toggle('active', p.id === targetId);\n                });\n\n                if (onChange) {\n                    onChange(targetId);\n                }\n            });\n        });\n    },\n};\n\n/**\n * ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ\n */\nconst Dropdown = {\n    activeDropdown: null,\n\n    /**\n     * åˆæœŸåŒ–\n     */\n    init() {\n        document.addEventListener('click', e => {\n            if (this.activeDropdown && !this.activeDropdown.contains(e.target)) {\n                this.close();\n            }\n        });\n    },\n\n    /**\n     * ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã‚’é–‹ã\n     * @param {HTMLElement} trigger - ãƒˆãƒªã‚¬ãƒ¼è¦ç´ \n     * @param {HTMLElement} dropdown - ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³è¦ç´ \n     */\n    open(trigger, dropdown) {\n        if (this.activeDropdown) {\n            this.close();\n        }\n\n        dropdown.classList.add('active');\n        this.activeDropdown = dropdown;\n\n        // ä½ç½®èª¿æ•´\n        const rect = trigger.getBoundingClientRect();\n        dropdown.style.top = `${rect.bottom + 8}px`;\n        dropdown.style.left = `${rect.left}px`;\n    },\n\n    /**\n     * ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã‚’é–‰ã˜ã‚‹\n     */\n    close() {\n        if (this.activeDropdown) {\n            this.activeDropdown.classList.remove('active');\n            this.activeDropdown = null;\n        }\n    },\n\n    /**\n     * ãƒˆã‚°ãƒ«\n     * @param {HTMLElement} trigger - ãƒˆãƒªã‚¬ãƒ¼è¦ç´ \n     * @param {HTMLElement} dropdown - ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³è¦ç´ \n     */\n    toggle(trigger, dropdown) {\n        if (dropdown.classList.contains('active')) {\n            this.close();\n        } else {\n            this.open(trigger, dropdown);\n        }\n    },\n};\n\n/**\n * ãƒ†ãƒ¼ãƒ–ãƒ«ã‚½ãƒ¼ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ\n */\nconst TableSort = {\n    /**\n     * ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ã‚½ãƒ¼ãƒˆå¯èƒ½ã«ã™ã‚‹\n     * @param {string} tableId - ãƒ†ãƒ¼ãƒ–ãƒ«ID\n     * @param {Function} onSort - ã‚½ãƒ¼ãƒˆæ™‚ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯\n     */\n    init(tableId, onSort) {\n        const table = document.getElementById(tableId);\n        if (!table) {\n            return;\n        }\n\n        const headers = table.querySelectorAll('th[data-sortable]');\n        headers.forEach(header => {\n            header.style.cursor = 'pointer';\n            header.addEventListener('click', () => {\n                const column = header.dataset.column;\n                const currentDir = header.dataset.sortDir || 'none';\n                const newDir = currentDir === 'asc' ? 'desc' : 'asc';\n\n                // ä»–ã®ãƒ˜ãƒƒãƒ€ãƒ¼ã®ã‚½ãƒ¼ãƒˆçŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆ\n                headers.forEach(h => {\n                    h.dataset.sortDir = 'none';\n                    h.classList.remove('sort-asc', 'sort-desc');\n                });\n\n                // ç¾åœ¨ã®ãƒ˜ãƒƒãƒ€ãƒ¼ã®ã‚½ãƒ¼ãƒˆçŠ¶æ…‹ã‚’è¨­å®š\n                header.dataset.sortDir = newDir;\n                header.classList.add(`sort-${newDir}`);\n\n                if (onSort) {\n                    onSort(column, newDir);\n                }\n            });\n        });\n    },\n};\n\n/**\n * æ¤œç´¢ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ\n */\nconst SearchHighlight = {\n    /**\n     * ãƒ†ã‚­ã‚¹ãƒˆå†…ã®æ¤œç´¢æ–‡å­—åˆ—ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆ\n     * @param {string} text - å¯¾è±¡ãƒ†ã‚­ã‚¹ãƒˆ\n     * @param {string} search - æ¤œç´¢æ–‡å­—åˆ—\n     * @returns {string} - ãƒã‚¤ãƒ©ã‚¤ãƒˆã•ã‚ŒãŸHTML\n     */\n    highlight(text, search) {\n        if (!search || !text) {\n            return escapeHtml(text);\n        }\n\n        const escapedSearch = search.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n        const regex = new RegExp(`(${escapedSearch})`, 'gi');\n        const escaped = escapeHtml(text);\n\n        return escaped.replace(regex, '<mark class=\"search-highlight\">$1</mark>');\n    },\n};\n\n// åˆæœŸåŒ–\ndocument.addEventListener('DOMContentLoaded', () => {\n    Toast.init();\n    Dropdown.init();\n});\n","usedDeprecatedRules":[{"ruleId":"semi","replacedBy":["@stylistic/semi"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"semi","url":"https://eslint.style/rules/semi"}}]}},{"ruleId":"quotes","replacedBy":["@stylistic/quotes"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"quotes","url":"https://eslint.style/rules/quotes"}}]}},{"ruleId":"indent","replacedBy":["@stylistic/indent"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"indent","url":"https://eslint.style/rules/indent"}}]}}]},{"filePath":"/home/runner/work/Appsuite-ITSM-Management/Appsuite-ITSM-Management/WebUI-Production/js/crypto-helper.js","messages":[{"ruleId":"no-undef","severity":1,"message":"'TextEncoder' is not defined.","line":27,"column":29,"messageId":"undef","endLine":27,"endColumn":40},{"ruleId":"no-undef","severity":1,"message":"'TextEncoder' is not defined.","line":66,"column":29,"messageId":"undef","endLine":66,"endColumn":40},{"ruleId":"no-undef","severity":1,"message":"'TextDecoder' is not defined.","line":128,"column":33,"messageId":"undef","endLine":128,"endColumn":44},{"ruleId":"no-unused-vars","severity":1,"message":"'cryptoHelper' is assigned a value but never used.","line":242,"column":7,"messageId":"unusedVar","endLine":242,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"cryptoHelper"},"fix":{"range":[6650,6690],"text":""},"desc":"Remove unused variable 'cryptoHelper'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * CryptoHelper - Web Crypto API ãƒ©ãƒƒãƒ‘ãƒ¼\n *\n * APIã‚­ãƒ¼ç­‰ã®æ©Ÿå¯†æƒ…å ±ã‚’æš—å·åŒ–ãƒ»å¾©å·åŒ–ã™ã‚‹ãŸã‚ã®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚¯ãƒ©ã‚¹\n * AES-GCM-256 + PBKDF2 ã«ã‚ˆã‚‹å®‰å…¨ãªæš—å·åŒ–ã‚’æä¾›\n *\n * @version 1.0.0\n * @license MIT\n */\n\nclass CryptoHelper {\n    constructor() {\n        this.algorithm = 'AES-GCM';\n        this.keyLength = 256;\n        this.ivLength = 12; // GCMã§ã¯12ãƒã‚¤ãƒˆæ¨å¥¨\n        this.saltLength = 16;\n        this.iterations = 100000; // PBKDF2ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å›æ•°ï¼ˆOWASPæ¨å¥¨ï¼‰\n    }\n\n    /**\n     * ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‹ã‚‰æš—å·åŒ–ã‚­ãƒ¼ã‚’å°å‡º\n     * @param {string} password - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰\n     * @param {Uint8Array} salt - ã‚½ãƒ«ãƒˆï¼ˆ16ãƒã‚¤ãƒˆï¼‰\n     * @returns {Promise<CryptoKey>}\n     */\n    async deriveKey(password, salt) {\n        const encoder = new TextEncoder();\n        const passwordBuffer = encoder.encode(password);\n\n        // ã‚¹ãƒ†ãƒƒãƒ—1: ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‹ã‚‰ãƒ™ãƒ¼ã‚¹ã‚­ãƒ¼ã‚’ç”Ÿæˆ\n        const baseKey = await crypto.subtle.importKey(\n            'raw',\n            passwordBuffer,\n            { name: 'PBKDF2' },\n            false,\n            ['deriveBits', 'deriveKey']\n        );\n\n        // ã‚¹ãƒ†ãƒƒãƒ—2: PBKDF2ã§AES-GCMç”¨ã‚­ãƒ¼ã‚’å°å‡º\n        const derivedKey = await crypto.subtle.deriveKey(\n            {\n                name: 'PBKDF2',\n                salt: salt,\n                iterations: this.iterations,\n                hash: 'SHA-256',\n            },\n            baseKey,\n            {\n                name: this.algorithm,\n                length: this.keyLength,\n            },\n            false, // extractable: falseï¼ˆã‚­ãƒ¼ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆä¸å¯ï¼‰\n            ['encrypt', 'decrypt']\n        );\n\n        return derivedKey;\n    }\n\n    /**\n     * ãƒ‡ãƒ¼ã‚¿ã‚’æš—å·åŒ–\n     * @param {string} plaintext - å¹³æ–‡ãƒ‡ãƒ¼ã‚¿\n     * @param {string} password - æš—å·åŒ–ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰\n     * @returns {Promise<string>} Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸæš—å·åŒ–ãƒ‡ãƒ¼ã‚¿\n     */\n    async encrypt(plaintext, password) {\n        const encoder = new TextEncoder();\n        const plaintextBuffer = encoder.encode(plaintext);\n\n        // ãƒ©ãƒ³ãƒ€ãƒ ãªã‚½ãƒ«ãƒˆã¨IVã‚’ç”Ÿæˆ\n        const salt = crypto.getRandomValues(new Uint8Array(this.saltLength));\n        const iv = crypto.getRandomValues(new Uint8Array(this.ivLength));\n\n        // æš—å·åŒ–ã‚­ãƒ¼ã‚’å°å‡º\n        const key = await this.deriveKey(password, salt);\n\n        // æš—å·åŒ–å®Ÿè¡Œ\n        const ciphertextBuffer = await crypto.subtle.encrypt(\n            {\n                name: this.algorithm,\n                iv: iv,\n            },\n            key,\n            plaintextBuffer\n        );\n\n        // çµæœã‚’çµåˆ: [salt(16) + iv(12) + ciphertext + authTag(16)]\n        const resultBuffer = new Uint8Array(\n            salt.byteLength + iv.byteLength + ciphertextBuffer.byteLength\n        );\n        resultBuffer.set(salt, 0);\n        resultBuffer.set(iv, salt.byteLength);\n        resultBuffer.set(new Uint8Array(ciphertextBuffer), salt.byteLength + iv.byteLength);\n\n        // Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰\n        return this.arrayBufferToBase64(resultBuffer);\n    }\n\n    /**\n     * ãƒ‡ãƒ¼ã‚¿ã‚’å¾©å·åŒ–\n     * @param {string} encryptedData - Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸæš—å·åŒ–ãƒ‡ãƒ¼ã‚¿\n     * @param {string} password - å¾©å·åŒ–ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰\n     * @returns {Promise<string>} å¾©å·åŒ–ã•ã‚ŒãŸå¹³æ–‡\n     */\n    async decrypt(encryptedData, password) {\n        try {\n            // Base64ãƒ‡ã‚³ãƒ¼ãƒ‰\n            const dataBuffer = this.base64ToArrayBuffer(encryptedData);\n\n            // ã‚½ãƒ«ãƒˆã€IVã€æš—å·æ–‡ã‚’åˆ†é›¢\n            const salt = dataBuffer.slice(0, this.saltLength);\n            const iv = dataBuffer.slice(this.saltLength, this.saltLength + this.ivLength);\n            const ciphertext = dataBuffer.slice(this.saltLength + this.ivLength);\n\n            // æš—å·åŒ–ã‚­ãƒ¼ã‚’å°å‡º\n            const key = await this.deriveKey(password, salt);\n\n            // å¾©å·åŒ–å®Ÿè¡Œ\n            const plaintextBuffer = await crypto.subtle.decrypt(\n                {\n                    name: this.algorithm,\n                    iv: iv,\n                },\n                key,\n                ciphertext\n            );\n\n            // ãƒ†ã‚­ã‚¹ãƒˆã«å¤‰æ›\n            const decoder = new TextDecoder();\n            return decoder.decode(plaintextBuffer);\n        } catch (error) {\n            console.error('å¾©å·åŒ–ã‚¨ãƒ©ãƒ¼:', error);\n            throw new Error('å¾©å·åŒ–ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒæ­£ã—ã„ã‹ç¢ºèªã—ã¦ãã ã•ã„ã€‚');\n        }\n    }\n\n    /**\n     * ArrayBufferã‚’Base64æ–‡å­—åˆ—ã«å¤‰æ›\n     * @param {ArrayBuffer} buffer\n     * @returns {string}\n     */\n    arrayBufferToBase64(buffer) {\n        const bytes = new Uint8Array(buffer);\n        let binary = '';\n        for (let i = 0; i < bytes.byteLength; i++) {\n            binary += String.fromCharCode(bytes[i]);\n        }\n        return btoa(binary);\n    }\n\n    /**\n     * Base64æ–‡å­—åˆ—ã‚’ArrayBufferã«å¤‰æ›\n     * @param {string} base64\n     * @returns {Uint8Array}\n     */\n    base64ToArrayBuffer(base64) {\n        const binary = atob(base64);\n        const bytes = new Uint8Array(binary.length);\n        for (let i = 0; i < binary.length; i++) {\n            bytes[i] = binary.charCodeAt(i);\n        }\n        return bytes;\n    }\n\n    /**\n     * ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¼·åº¦ãƒã‚§ãƒƒã‚¯\n     * @param {string} password\n     * @returns {object} { valid: boolean, strength: string, messages: Array }\n     */\n    checkPasswordStrength(password) {\n        const result = {\n            valid: false,\n            strength: 'weak',\n            messages: [],\n        };\n\n        if (!password || password.length < 8) {\n            result.messages.push('ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯8æ–‡å­—ä»¥ä¸Šã«ã—ã¦ãã ã•ã„');\n            return result;\n        }\n\n        let strength = 0;\n\n        // é•·ã•ãƒã‚§ãƒƒã‚¯\n        if (password.length >= 12) {\n            strength++;\n        }\n        if (password.length >= 16) {\n            strength++;\n        }\n\n        // è¤‡é›‘æ€§ãƒã‚§ãƒƒã‚¯\n        if (/[a-z]/.test(password)) {\n            strength++;\n        } // å°æ–‡å­—\n        if (/[A-Z]/.test(password)) {\n            strength++;\n        } // å¤§æ–‡å­—\n        if (/[0-9]/.test(password)) {\n            strength++;\n        } // æ•°å­—\n        if (/[^a-zA-Z0-9]/.test(password)) {\n            strength++;\n        } // ç‰¹æ®Šæ–‡å­—\n\n        if (strength <= 2) {\n            result.strength = 'weak';\n            result.messages.push(\n                'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒå¼±ã„ã§ã™ã€‚è‹±å¤§å°æ–‡å­—ãƒ»æ•°å­—ãƒ»è¨˜å·ã‚’çµ„ã¿åˆã‚ã›ã¦ãã ã•ã„ã€‚'\n            );\n        } else if (strength <= 4) {\n            result.strength = 'medium';\n            result.valid = true;\n        } else {\n            result.strength = 'strong';\n            result.valid = true;\n        }\n\n        return result;\n    }\n\n    /**\n     * ãƒ©ãƒ³ãƒ€ãƒ ãªãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ç”Ÿæˆ\n     * @param {number} length - ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰é•·ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 16ï¼‰\n     * @returns {string}\n     */\n    generateRandomPassword(length = 16) {\n        const charset =\n            'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+-=[]{}|;:,.<>?';\n        const randomValues = new Uint8Array(length);\n        crypto.getRandomValues(randomValues);\n\n        let password = '';\n        for (let i = 0; i < length; i++) {\n            password += charset[randomValues[i] % charset.length];\n        }\n\n        return password;\n    }\n}\n\n// ã‚·ãƒ³ã‚°ãƒ«ãƒˆãƒ³ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹\nconst cryptoHelper = new CryptoHelper();\n","usedDeprecatedRules":[{"ruleId":"semi","replacedBy":["@stylistic/semi"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"semi","url":"https://eslint.style/rules/semi"}}]}},{"ruleId":"quotes","replacedBy":["@stylistic/quotes"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"quotes","url":"https://eslint.style/rules/quotes"}}]}},{"ruleId":"indent","replacedBy":["@stylistic/indent"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"indent","url":"https://eslint.style/rules/indent"}}]}}]},{"filePath":"/home/runner/work/Appsuite-ITSM-Management/Appsuite-ITSM-Management/WebUI-Production/js/dashboard.js","messages":[{"ruleId":"quotes","severity":2,"message":"Strings must use singlequote.","line":53,"column":38,"messageId":"wrongQuotes","endLine":53,"endColumn":83,"fix":{"range":[1063,1108],"text":"'\\'Noto Sans JP\\', \\'Hiragino Sans\\', sans-serif'"}},{"ruleId":"no-undef","severity":1,"message":"'requestAnimationFrame' is not defined.","line":553,"column":17,"messageId":"undef","endLine":553,"endColumn":38},{"ruleId":"no-undef","severity":1,"message":"'requestAnimationFrame' is not defined.","line":557,"column":9,"messageId":"undef","endLine":557,"endColumn":30},{"ruleId":"no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":589,"column":22,"messageId":"unusedVar","endLine":589,"endColumn":23},{"ruleId":"indent","severity":2,"message":"Expected indentation of 20 spaces but found 22.","line":773,"column":1,"messageId":"wrongIndentation","endLine":773,"endColumn":23,"fix":{"range":[21995,22017],"text":"                    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 16 spaces but found 18.","line":775,"column":1,"messageId":"wrongIndentation","endLine":775,"endColumn":19,"fix":{"range":[22126,22144],"text":"                "}}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":3,"fixableWarningCount":0,"source":"/**\n * AppSuite ç®¡ç†é‹ç”¨ã‚·ã‚¹ãƒ†ãƒ  - ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«\n * Phase 3 Sprint 2: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰å¼·åŒ–ãƒ»ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ãƒ»ã‚°ãƒ©ãƒ•/ãƒãƒ£ãƒ¼ãƒˆ\n */\n\n/**\n * ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼\n * ã‚°ãƒ©ãƒ•ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ã€ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆç®¡ç†ã‚’çµ±æ‹¬\n */\nconst DashboardManager = {\n    // æ›´æ–°é–“éš”ï¼ˆãƒŸãƒªç§’ï¼‰\n    UPDATE_INTERVAL: 30000, // 30ç§’\n\n    // æ›´æ–°ã‚¿ã‚¤ãƒãƒ¼ID\n    updateTimer: null,\n\n    // Chart.jsã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹\n    charts: {\n        incidentTrend: null,\n        appStatus: null,\n        incidentPriority: null,\n        changeType: null,\n        weeklyActivity: null,\n    },\n\n    // ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆè¨­å®š\n    widgets: [],\n\n    /**\n     * åˆæœŸåŒ–\n     */\n    init() {\n        this.loadWidgetSettings();\n        this.initCharts();\n        this.startAutoUpdate();\n        this.initWidgetControls();\n\n        // ãƒšãƒ¼ã‚¸é›¢è„±æ™‚ã«ã‚¿ã‚¤ãƒãƒ¼åœæ­¢\n        window.addEventListener('beforeunload', () => this.stopAutoUpdate());\n    },\n\n    /**\n     * ã‚°ãƒ©ãƒ•åˆæœŸåŒ–\n     */\n    initCharts() {\n        // Chart.jsãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª\n        if (typeof Chart === 'undefined') {\n            console.warn('Chart.js is not loaded. Charts will not be displayed.');\n            return;\n        }\n\n        // ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®š\n        Chart.defaults.font.family = \"'Noto Sans JP', 'Hiragino Sans', sans-serif\";\n        Chart.defaults.responsive = true;\n        Chart.defaults.maintainAspectRatio = false;\n\n        // å„ãƒãƒ£ãƒ¼ãƒˆã‚’åˆæœŸåŒ–\n        this.initIncidentTrendChart();\n        this.initAppStatusChart();\n        this.initIncidentPriorityChart();\n        this.initChangeTypeChart();\n        this.initWeeklyActivityChart();\n    },\n\n    /**\n     * ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆãƒˆãƒ¬ãƒ³ãƒ‰ãƒãƒ£ãƒ¼ãƒˆï¼ˆæŠ˜ã‚Œç·šã‚°ãƒ©ãƒ•ï¼‰\n     */\n    initIncidentTrendChart() {\n        const ctx = document.getElementById('incidentTrendChart');\n        if (!ctx) {\n            return;\n        }\n\n        const data = this.getIncidentTrendData();\n\n        this.charts.incidentTrend = new Chart(ctx, {\n            type: 'line',\n            data: {\n                labels: data.labels,\n                datasets: [\n                    {\n                        label: 'æ–°è¦',\n                        data: data.newIncidents,\n                        borderColor: '#f59e0b',\n                        backgroundColor: 'rgba(245, 158, 11, 0.1)',\n                        fill: true,\n                        tension: 0.4,\n                    },\n                    {\n                        label: 'è§£æ±ºæ¸ˆã¿',\n                        data: data.resolvedIncidents,\n                        borderColor: '#10b981',\n                        backgroundColor: 'rgba(16, 185, 129, 0.1)',\n                        fill: true,\n                        tension: 0.4,\n                    },\n                ],\n            },\n            options: {\n                plugins: {\n                    legend: {\n                        position: 'bottom',\n                    },\n                    title: {\n                        display: true,\n                        text: 'ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆæ¨ç§»ï¼ˆéå»7æ—¥é–“ï¼‰',\n                    },\n                },\n                scales: {\n                    y: {\n                        beginAtZero: true,\n                        ticks: {\n                            stepSize: 1,\n                        },\n                    },\n                },\n            },\n        });\n    },\n\n    /**\n     * ã‚¢ãƒ—ãƒªã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹åˆ†å¸ƒãƒãƒ£ãƒ¼ãƒˆï¼ˆãƒ‰ãƒ¼ãƒŠãƒ„ï¼‰\n     */\n    initAppStatusChart() {\n        const ctx = document.getElementById('appStatusChart');\n        if (!ctx) {\n            return;\n        }\n\n        const data = this.getAppStatusData();\n\n        this.charts.appStatus = new Chart(ctx, {\n            type: 'doughnut',\n            data: {\n                labels: ['ç¨¼åƒä¸­', 'ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹', 'åœæ­¢ä¸­'],\n                datasets: [\n                    {\n                        data: [data.active, data.maintenance, data.inactive],\n                        backgroundColor: ['#10b981', '#f59e0b', '#6b7280'],\n                        borderWidth: 0,\n                    },\n                ],\n            },\n            options: {\n                plugins: {\n                    legend: {\n                        position: 'bottom',\n                    },\n                    title: {\n                        display: true,\n                        text: 'ã‚¢ãƒ—ãƒªç¨¼åƒçŠ¶æ³',\n                    },\n                },\n                cutout: '60%',\n            },\n        });\n    },\n\n    /**\n     * ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå„ªå…ˆåº¦åˆ†å¸ƒãƒãƒ£ãƒ¼ãƒˆï¼ˆå††ã‚°ãƒ©ãƒ•ï¼‰\n     */\n    initIncidentPriorityChart() {\n        const ctx = document.getElementById('incidentPriorityChart');\n        if (!ctx) {\n            return;\n        }\n\n        const data = this.getIncidentPriorityData();\n\n        this.charts.incidentPriority = new Chart(ctx, {\n            type: 'pie',\n            data: {\n                labels: ['é«˜', 'ä¸­', 'ä½'],\n                datasets: [\n                    {\n                        data: [data.high, data.medium, data.low],\n                        backgroundColor: ['#ef4444', '#f59e0b', '#3b82f6'],\n                        borderWidth: 0,\n                    },\n                ],\n            },\n            options: {\n                plugins: {\n                    legend: {\n                        position: 'bottom',\n                    },\n                    title: {\n                        display: true,\n                        text: 'ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå„ªå…ˆåº¦',\n                    },\n                },\n            },\n        });\n    },\n\n    /**\n     * å¤‰æ›´ã‚¿ã‚¤ãƒ—åˆ†å¸ƒãƒãƒ£ãƒ¼ãƒˆï¼ˆæ£’ã‚°ãƒ©ãƒ•ï¼‰\n     */\n    initChangeTypeChart() {\n        const ctx = document.getElementById('changeTypeChart');\n        if (!ctx) {\n            return;\n        }\n\n        const data = this.getChangeTypeData();\n\n        this.charts.changeType = new Chart(ctx, {\n            type: 'bar',\n            data: {\n                labels: ['æ©Ÿèƒ½è¿½åŠ ', 'æ©Ÿèƒ½å¤‰æ›´', 'ãƒã‚°ä¿®æ­£', 'æ”¹å–„'],\n                datasets: [\n                    {\n                        label: 'ä»¶æ•°',\n                        data: [data.feature, data.modification, data.bugfix, data.improvement],\n                        backgroundColor: ['#8b5cf6', '#3b82f6', '#ef4444', '#10b981'],\n                        borderRadius: 4,\n                    },\n                ],\n            },\n            options: {\n                plugins: {\n                    legend: {\n                        display: false,\n                    },\n                    title: {\n                        display: true,\n                        text: 'å¤‰æ›´è¦æ±‚ã‚¿ã‚¤ãƒ—åˆ¥',\n                    },\n                },\n                scales: {\n                    y: {\n                        beginAtZero: true,\n                        ticks: {\n                            stepSize: 1,\n                        },\n                    },\n                },\n            },\n        });\n    },\n\n    /**\n     * é€±é–“ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ãƒãƒ£ãƒ¼ãƒˆï¼ˆè¤‡åˆã‚°ãƒ©ãƒ•ï¼‰\n     */\n    initWeeklyActivityChart() {\n        const ctx = document.getElementById('weeklyActivityChart');\n        if (!ctx) {\n            return;\n        }\n\n        const data = this.getWeeklyActivityData();\n\n        this.charts.weeklyActivity = new Chart(ctx, {\n            type: 'bar',\n            data: {\n                labels: data.labels,\n                datasets: [\n                    {\n                        label: 'ãƒ­ã‚°ã‚¤ãƒ³',\n                        data: data.logins,\n                        backgroundColor: 'rgba(59, 130, 246, 0.7)',\n                        borderRadius: 4,\n                    },\n                    {\n                        label: 'æ“ä½œ',\n                        data: data.actions,\n                        backgroundColor: 'rgba(16, 185, 129, 0.7)',\n                        borderRadius: 4,\n                    },\n                ],\n            },\n            options: {\n                plugins: {\n                    legend: {\n                        position: 'bottom',\n                    },\n                    title: {\n                        display: true,\n                        text: 'é€±é–“ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£',\n                    },\n                },\n                scales: {\n                    y: {\n                        beginAtZero: true,\n                    },\n                },\n            },\n        });\n    },\n\n    /**\n     * ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆãƒˆãƒ¬ãƒ³ãƒ‰ãƒ‡ãƒ¼ã‚¿å–å¾—\n     */\n    getIncidentTrendData() {\n        const incidents = DataStore.incidents || [];\n        const labels = [];\n        const newIncidents = [];\n        const resolvedIncidents = [];\n\n        // éå»7æ—¥é–“ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆ\n        for (let i = 6; i >= 0; i--) {\n            const date = new Date();\n            date.setDate(date.getDate() - i);\n            const dateStr = DateUtils.format(date, 'MM/dd');\n            labels.push(dateStr);\n\n            const dayStart = new Date(date);\n            dayStart.setHours(0, 0, 0, 0);\n            const dayEnd = new Date(date);\n            dayEnd.setHours(23, 59, 59, 999);\n\n            // ãã®æ—¥ã«ä½œæˆã•ã‚ŒãŸã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ\n            const created = incidents.filter(inc => {\n                const createdDate = new Date(inc.created);\n                return createdDate >= dayStart && createdDate <= dayEnd;\n            }).length;\n            newIncidents.push(created);\n\n            // ãã®æ—¥ã«è§£æ±ºã•ã‚ŒãŸã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ\n            const resolved = incidents.filter(inc => {\n                if (!inc.resolvedAt) {\n                    return false;\n                }\n                const resolvedDate = new Date(inc.resolvedAt);\n                return resolvedDate >= dayStart && resolvedDate <= dayEnd;\n            }).length;\n            resolvedIncidents.push(resolved);\n        }\n\n        return { labels, newIncidents, resolvedIncidents };\n    },\n\n    /**\n     * ã‚¢ãƒ—ãƒªã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ‡ãƒ¼ã‚¿å–å¾—\n     */\n    getAppStatusData() {\n        const apps = DataStore.apps || [];\n        return {\n            active: apps.filter(a => a.status === 'active').length,\n            maintenance: apps.filter(a => a.status === 'maintenance').length,\n            inactive: apps.filter(a => a.status === 'inactive').length,\n        };\n    },\n\n    /**\n     * ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå„ªå…ˆåº¦ãƒ‡ãƒ¼ã‚¿å–å¾—\n     */\n    getIncidentPriorityData() {\n        const incidents = DataStore.incidents || [];\n        const openIncidents = incidents.filter(i => i.status !== 'closed');\n        return {\n            high: openIncidents.filter(i => i.priority === 'high').length,\n            medium: openIncidents.filter(i => i.priority === 'medium').length,\n            low: openIncidents.filter(i => i.priority === 'low').length,\n        };\n    },\n\n    /**\n     * å¤‰æ›´ã‚¿ã‚¤ãƒ—ãƒ‡ãƒ¼ã‚¿å–å¾—\n     */\n    getChangeTypeData() {\n        const changes = DataStore.changes || [];\n        return {\n            feature: changes.filter(c => c.type === 'feature').length,\n            modification: changes.filter(c => c.type === 'modification').length,\n            bugfix: changes.filter(c => c.type === 'bugfix').length,\n            improvement: changes.filter(c => c.type === 'improvement').length,\n        };\n    },\n\n    /**\n     * é€±é–“ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ãƒ‡ãƒ¼ã‚¿å–å¾—\n     */\n    getWeeklyActivityData() {\n        const logs = DataStore.logs || [];\n        const labels = [];\n        const logins = [];\n        const actions = [];\n\n        const dayNames = ['æ—¥', 'æœˆ', 'ç«', 'æ°´', 'æœ¨', 'é‡‘', 'åœŸ'];\n\n        for (let i = 6; i >= 0; i--) {\n            const date = new Date();\n            date.setDate(date.getDate() - i);\n            labels.push(dayNames[date.getDay()]);\n\n            const dayStart = new Date(date);\n            dayStart.setHours(0, 0, 0, 0);\n            const dayEnd = new Date(date);\n            dayEnd.setHours(23, 59, 59, 999);\n\n            const dayLogs = logs.filter(log => {\n                const logDate = new Date(log.timestamp);\n                return logDate >= dayStart && logDate <= dayEnd;\n            });\n\n            logins.push(dayLogs.filter(l => l.action === 'login').length);\n            actions.push(dayLogs.filter(l => l.action !== 'login' && l.action !== 'logout').length);\n        }\n\n        return { labels, logins, actions };\n    },\n\n    /**\n     * å…¨ãƒãƒ£ãƒ¼ãƒˆã‚’æ›´æ–°\n     */\n    updateCharts() {\n        if (!this.charts.incidentTrend) {\n            return;\n        }\n\n        // ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆãƒˆãƒ¬ãƒ³ãƒ‰æ›´æ–°\n        const trendData = this.getIncidentTrendData();\n        this.charts.incidentTrend.data.labels = trendData.labels;\n        this.charts.incidentTrend.data.datasets[0].data = trendData.newIncidents;\n        this.charts.incidentTrend.data.datasets[1].data = trendData.resolvedIncidents;\n        this.charts.incidentTrend.update('none');\n\n        // ã‚¢ãƒ—ãƒªã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°\n        const appData = this.getAppStatusData();\n        this.charts.appStatus.data.datasets[0].data = [\n            appData.active,\n            appData.maintenance,\n            appData.inactive,\n        ];\n        this.charts.appStatus.update('none');\n\n        // ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå„ªå…ˆåº¦æ›´æ–°\n        const priorityData = this.getIncidentPriorityData();\n        this.charts.incidentPriority.data.datasets[0].data = [\n            priorityData.high,\n            priorityData.medium,\n            priorityData.low,\n        ];\n        this.charts.incidentPriority.update('none');\n\n        // å¤‰æ›´ã‚¿ã‚¤ãƒ—æ›´æ–°\n        const changeData = this.getChangeTypeData();\n        this.charts.changeType.data.datasets[0].data = [\n            changeData.feature,\n            changeData.modification,\n            changeData.bugfix,\n            changeData.improvement,\n        ];\n        this.charts.changeType.update('none');\n\n        // é€±é–“ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£æ›´æ–°\n        const activityData = this.getWeeklyActivityData();\n        this.charts.weeklyActivity.data.labels = activityData.labels;\n        this.charts.weeklyActivity.data.datasets[0].data = activityData.logins;\n        this.charts.weeklyActivity.data.datasets[1].data = activityData.actions;\n        this.charts.weeklyActivity.update('none');\n    },\n\n    /**\n     * è‡ªå‹•æ›´æ–°é–‹å§‹\n     */\n    startAutoUpdate() {\n        if (this.updateTimer) {\n            return;\n        }\n\n        this.updateTimer = setInterval(() => {\n            this.refresh();\n        }, this.UPDATE_INTERVAL);\n\n        // æ›´æ–°ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼è¡¨ç¤º\n        this.updateLastRefreshTime();\n    },\n\n    /**\n     * è‡ªå‹•æ›´æ–°åœæ­¢\n     */\n    stopAutoUpdate() {\n        if (this.updateTimer) {\n            clearInterval(this.updateTimer);\n            this.updateTimer = null;\n        }\n    },\n\n    /**\n     * æ‰‹å‹•æ›´æ–°\n     */\n    refresh() {\n        // çµ±è¨ˆã‚«ãƒ¼ãƒ‰æ›´æ–°\n        this.updateStatCards();\n\n        // ãƒãƒ£ãƒ¼ãƒˆæ›´æ–°\n        this.updateCharts();\n\n        // æœ€è¿‘ã®ãƒ­ã‚°æ›´æ–°\n        if (typeof LogModule !== 'undefined') {\n            LogModule.renderRecent();\n        }\n\n        // ã‚¢ãƒ—ãƒªã‚µãƒãƒªãƒ¼æ›´æ–°\n        if (typeof renderAppSummary === 'function') {\n            renderAppSummary();\n        }\n\n        // æœ€çµ‚æ›´æ–°æ™‚åˆ»æ›´æ–°\n        this.updateLastRefreshTime();\n\n        // æ›´æ–°ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³\n        this.showRefreshAnimation();\n    },\n\n    /**\n     * çµ±è¨ˆã‚«ãƒ¼ãƒ‰æ›´æ–°\n     */\n    updateStatCards() {\n        const stats = DataStore.getStats();\n\n        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ä»˜ãã§æ•°å€¤æ›´æ–°\n        this.animateNumber('totalUsers', stats.totalUsers);\n        this.animateNumber('activeUsers', stats.activeUsers);\n        this.animateNumber('totalApps', stats.totalApps);\n        this.animateNumber('activeApps', stats.activeApps);\n        this.animateNumber('openIncidents', stats.openIncidents);\n        this.animateNumber('pendingChanges', stats.pendingChanges);\n    },\n\n    /**\n     * æ•°å€¤ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³æ›´æ–°\n     */\n    animateNumber(elementId, targetValue) {\n        const element = document.getElementById(elementId);\n        if (!element) {\n            return;\n        }\n\n        const currentValue = parseInt(element.textContent) || 0;\n        const diff = targetValue - currentValue;\n\n        if (diff === 0) {\n            return;\n        }\n\n        const duration = 500;\n        const startTime = performance.now();\n\n        const animate = currentTime => {\n            const elapsed = currentTime - startTime;\n            const progress = Math.min(elapsed / duration, 1);\n\n            // ã‚¤ãƒ¼ã‚¸ãƒ³ã‚°é–¢æ•°ï¼ˆeaseOutQuadï¼‰\n            const eased = 1 - (1 - progress) * (1 - progress);\n\n            const value = Math.round(currentValue + diff * eased);\n            element.textContent = value;\n\n            if (progress < 1) {\n                requestAnimationFrame(animate);\n            }\n        };\n\n        requestAnimationFrame(animate);\n    },\n\n    /**\n     * æœ€çµ‚æ›´æ–°æ™‚åˆ»ã‚’æ›´æ–°\n     */\n    updateLastRefreshTime() {\n        const element = document.getElementById('lastRefreshTime');\n        if (element) {\n            element.textContent = DateUtils.format(new Date(), 'HH:mm:ss');\n        }\n    },\n\n    /**\n     * æ›´æ–°ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¡¨ç¤º\n     */\n    showRefreshAnimation() {\n        const btn = document.getElementById('refreshDashboard');\n        if (btn) {\n            btn.classList.add('refreshing');\n            setTimeout(() => btn.classList.remove('refreshing'), 1000);\n        }\n    },\n\n    /**\n     * ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆè¨­å®šèª­ã¿è¾¼ã¿\n     */\n    loadWidgetSettings() {\n        const saved = localStorage.getItem('appsuite_dashboard_widgets');\n        if (saved) {\n            try {\n                this.widgets = JSON.parse(saved);\n            } catch (e) {\n                this.widgets = this.getDefaultWidgets();\n            }\n        } else {\n            this.widgets = this.getDefaultWidgets();\n        }\n    },\n\n    /**\n     * ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆè¨­å®š\n     */\n    getDefaultWidgets() {\n        return [\n            { id: 'stats', name: 'çµ±è¨ˆã‚«ãƒ¼ãƒ‰', visible: true, order: 1 },\n            { id: 'incidentTrend', name: 'ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆæ¨ç§»', visible: true, order: 2 },\n            { id: 'appStatus', name: 'ã‚¢ãƒ—ãƒªç¨¼åƒçŠ¶æ³', visible: true, order: 3 },\n            { id: 'incidentPriority', name: 'ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå„ªå…ˆåº¦', visible: true, order: 4 },\n            { id: 'changeType', name: 'å¤‰æ›´è¦æ±‚ã‚¿ã‚¤ãƒ—', visible: true, order: 5 },\n            { id: 'weeklyActivity', name: 'é€±é–“ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£', visible: true, order: 6 },\n            { id: 'recentLogs', name: 'æœ€è¿‘ã®æ“ä½œãƒ­ã‚°', visible: true, order: 7 },\n            { id: 'appSummary', name: 'ã‚¢ãƒ—ãƒªä¸€è¦§', visible: true, order: 8 },\n        ];\n    },\n\n    /**\n     * ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆè¨­å®šä¿å­˜\n     */\n    saveWidgetSettings() {\n        localStorage.setItem('appsuite_dashboard_widgets', JSON.stringify(this.widgets));\n    },\n\n    /**\n     * ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆè¡¨ç¤º/éè¡¨ç¤ºåˆ‡æ›¿\n     */\n    toggleWidget(widgetId) {\n        const widget = this.widgets.find(w => w.id === widgetId);\n        if (widget) {\n            widget.visible = !widget.visible;\n            this.saveWidgetSettings();\n            this.applyWidgetVisibility();\n        }\n    },\n\n    /**\n     * ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆè¡¨ç¤ºçŠ¶æ…‹ã‚’é©ç”¨\n     */\n    applyWidgetVisibility() {\n        this.widgets.forEach(widget => {\n            const element = document.getElementById(`widget-${widget.id}`);\n            if (element) {\n                element.style.display = widget.visible ? '' : 'none';\n            }\n        });\n    },\n\n    /**\n     * ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«åˆæœŸåŒ–\n     */\n    initWidgetControls() {\n        const container = document.getElementById('widgetControlList');\n        if (!container) {\n            return;\n        }\n\n        container.innerHTML = this.widgets\n            .map(\n                widget => `\n            <label class=\"widget-control-item\">\n                <input type=\"checkbox\"\n                       ${widget.visible ? 'checked' : ''}\n                       onchange=\"DashboardManager.toggleWidget('${widget.id}')\">\n                <span>${escapeHtml(widget.name)}</span>\n            </label>\n        `\n            )\n            .join('');\n    },\n\n    /**\n     * ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆè¨­å®šãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ã\n     */\n    openWidgetSettings() {\n        Modal.open({\n            title: 'ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¨­å®š',\n            content: `\n                <div class=\"widget-settings\">\n                    <p>è¡¨ç¤ºã™ã‚‹ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã‚’é¸æŠã—ã¦ãã ã•ã„ï¼š</p>\n                    <div class=\"widget-control-list\" id=\"widgetControlList\"></div>\n                    <div class=\"widget-settings-actions\">\n                        <button class=\"btn btn-secondary btn-sm\" onclick=\"DashboardManager.resetWidgets()\">\n                            <i class=\"fas fa-undo\"></i> ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«æˆ»ã™\n                        </button>\n                    </div>\n                </div>\n            `,\n            size: 'small',\n            buttons: [\n                {\n                    text: 'é–‰ã˜ã‚‹',\n                    class: 'btn-primary',\n                    onclick: 'Modal.close()',\n                },\n            ],\n        });\n\n        this.initWidgetControls();\n    },\n\n    /**\n     * ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆè¨­å®šã‚’ãƒªã‚»ãƒƒãƒˆ\n     */\n    resetWidgets() {\n        this.widgets = this.getDefaultWidgets();\n        this.saveWidgetSettings();\n        this.applyWidgetVisibility();\n        this.initWidgetControls();\n        Toast.success('ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆè¨­å®šã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸ');\n    },\n\n    /**\n     * æ›´æ–°é–“éš”è¨­å®š\n     */\n    setUpdateInterval(interval) {\n        this.UPDATE_INTERVAL = interval;\n        this.stopAutoUpdate();\n        if (interval > 0) {\n            this.startAutoUpdate();\n        }\n    },\n\n    /**\n     * ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ï¼ˆãƒãƒ£ãƒ¼ãƒˆã®ç ´æ£„ï¼‰\n     */\n    destroy() {\n        this.stopAutoUpdate();\n        Object.values(this.charts).forEach(chart => {\n            if (chart) {\n                chart.destroy();\n            }\n        });\n        this.charts = {};\n    },\n};\n\n/**\n * KPIã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ\n * é‡è¦æ¥­ç¸¾è©•ä¾¡æŒ‡æ¨™ã®è¡¨ç¤º\n */\nconst KPIWidget = {\n    /**\n     * KPIãƒ‡ãƒ¼ã‚¿ã‚’è¨ˆç®—\n     */\n    calculate() {\n        const incidents = DataStore.incidents || [];\n        const changes = DataStore.changes || [];\n\n        // å¹³å‡è§£æ±ºæ™‚é–“ï¼ˆæ™‚é–“ï¼‰\n        const resolvedIncidents = incidents.filter(i => i.resolvedAt && i.created);\n        let avgResolutionTime = 0;\n        if (resolvedIncidents.length > 0) {\n            const totalTime = resolvedIncidents.reduce((sum, inc) => {\n                return sum + (new Date(inc.resolvedAt) - new Date(inc.created));\n            }, 0);\n            avgResolutionTime =\n                Math.round((totalTime / resolvedIncidents.length / (1000 * 60 * 60)) * 10) / 10;\n        }\n\n        // SLAé”æˆç‡ï¼ˆ24æ™‚é–“ä»¥å†…ã«è§£æ±ºã—ãŸå‰²åˆï¼‰\n        const slaTarget = 24 * 60 * 60 * 1000; // 24æ™‚é–“\n        const withinSla = resolvedIncidents.filter(inc => {\n            const resolutionTime = new Date(inc.resolvedAt) - new Date(inc.created);\n            return resolutionTime <= slaTarget;\n        }).length;\n        const slaRate =\n            resolvedIncidents.length > 0\n                ? Math.round((withinSla / resolvedIncidents.length) * 100)\n                : 100;\n\n        // å¤‰æ›´æˆåŠŸç‡\n        const completedChanges = changes.filter(c => c.status === 'completed');\n        const failedChanges = changes.filter(c => c.status === 'rejected');\n        const changeSuccessRate =\n            completedChanges.length + failedChanges.length > 0\n                ? Math.round(\n                      (completedChanges.length / (completedChanges.length + failedChanges.length)) *\n                          100\n                  )\n                : 100;\n\n        // ä»Šæœˆã®ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆæ•°\n        const now = new Date();\n        const monthStart = new Date(now.getFullYear(), now.getMonth(), 1);\n        const monthlyIncidents = incidents.filter(i => new Date(i.created) >= monthStart).length;\n\n        return {\n            avgResolutionTime,\n            slaRate,\n            changeSuccessRate,\n            monthlyIncidents,\n        };\n    },\n\n    /**\n     * KPIã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°\n     */\n    render() {\n        const container = document.getElementById('kpiWidget');\n        if (!container) {\n            return;\n        }\n\n        const kpi = this.calculate();\n\n        container.innerHTML = `\n            <div class=\"kpi-grid\">\n                <div class=\"kpi-item\">\n                    <div class=\"kpi-value\">${kpi.avgResolutionTime}<small>æ™‚é–“</small></div>\n                    <div class=\"kpi-label\">å¹³å‡è§£æ±ºæ™‚é–“</div>\n                    <div class=\"kpi-trend ${kpi.avgResolutionTime <= 8 ? 'good' : 'warning'}\">\n                        <i class=\"fas fa-${kpi.avgResolutionTime <= 8 ? 'arrow-down' : 'arrow-up'}\"></i>\n                    </div>\n                </div>\n                <div class=\"kpi-item\">\n                    <div class=\"kpi-value\">${kpi.slaRate}<small>%</small></div>\n                    <div class=\"kpi-label\">SLAé”æˆç‡</div>\n                    <div class=\"kpi-trend ${kpi.slaRate >= 90 ? 'good' : 'warning'}\">\n                        <i class=\"fas fa-${kpi.slaRate >= 90 ? 'check' : 'exclamation'}\"></i>\n                    </div>\n                </div>\n                <div class=\"kpi-item\">\n                    <div class=\"kpi-value\">${kpi.changeSuccessRate}<small>%</small></div>\n                    <div class=\"kpi-label\">å¤‰æ›´æˆåŠŸç‡</div>\n                    <div class=\"kpi-trend ${kpi.changeSuccessRate >= 95 ? 'good' : 'warning'}\">\n                        <i class=\"fas fa-${kpi.changeSuccessRate >= 95 ? 'check' : 'exclamation'}\"></i>\n                    </div>\n                </div>\n                <div class=\"kpi-item\">\n                    <div class=\"kpi-value\">${kpi.monthlyIncidents}</div>\n                    <div class=\"kpi-label\">ä»Šæœˆã®ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ</div>\n                    <div class=\"kpi-trend neutral\">\n                        <i class=\"fas fa-chart-line\"></i>\n                    </div>\n                </div>\n            </div>\n        `;\n    },\n};\n\n/**\n * ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ\n */\nconst QuickActions = {\n    /**\n     * ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°\n     */\n    render() {\n        const container = document.getElementById('quickActions');\n        if (!container) {\n            return;\n        }\n\n        container.innerHTML = `\n            <div class=\"quick-actions-grid\">\n                <button class=\"quick-action-btn\" onclick=\"QuickActions.newIncident()\">\n                    <i class=\"fas fa-exclamation-triangle\"></i>\n                    <span>æ–°è¦ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ</span>\n                </button>\n                <button class=\"quick-action-btn\" onclick=\"QuickActions.newChange()\">\n                    <i class=\"fas fa-code-branch\"></i>\n                    <span>æ–°è¦å¤‰æ›´è¦æ±‚</span>\n                </button>\n                <button class=\"quick-action-btn\" onclick=\"QuickActions.viewMyTasks()\">\n                    <i class=\"fas fa-tasks\"></i>\n                    <span>æ‹…å½“ã‚¿ã‚¹ã‚¯</span>\n                </button>\n                <button class=\"quick-action-btn\" onclick=\"QuickActions.viewReports()\">\n                    <i class=\"fas fa-chart-bar\"></i>\n                    <span>ãƒ¬ãƒãƒ¼ãƒˆ</span>\n                </button>\n            </div>\n        `;\n    },\n\n    /**\n     * æ–°è¦ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆä½œæˆ\n     */\n    newIncident() {\n        // ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ç§»å‹•ã—ã¦æ–°è¦ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ã\n        showSection('incidents');\n        document.querySelector('[data-section=\"incidents\"]').classList.add('active');\n        setTimeout(() => IncidentModule.showAddModal(), 100);\n    },\n\n    /**\n     * æ–°è¦å¤‰æ›´è¦æ±‚ä½œæˆ\n     */\n    newChange() {\n        showSection('changes');\n        document.querySelector('[data-section=\"changes\"]').classList.add('active');\n        setTimeout(() => ChangeModule.showAddModal(), 100);\n    },\n\n    /**\n     * æ‹…å½“ã‚¿ã‚¹ã‚¯è¡¨ç¤º\n     */\n    viewMyTasks() {\n        const currentUser = AuthModule.getCurrentUser();\n        if (!currentUser) {\n            return;\n        }\n\n        const myIncidents = (DataStore.incidents || []).filter(\n            i => i.assignee === currentUser.username && i.status !== 'closed'\n        );\n        const myChanges = (DataStore.changes || []).filter(\n            c => c.assignee === currentUser.username && c.status !== 'completed'\n        );\n\n        let content = '<div class=\"my-tasks\">';\n\n        if (myIncidents.length === 0 && myChanges.length === 0) {\n            content += '<p class=\"text-muted\">æ‹…å½“ã‚¿ã‚¹ã‚¯ã¯ã‚ã‚Šã¾ã›ã‚“</p>';\n        } else {\n            if (myIncidents.length > 0) {\n                content += '<h4><i class=\"fas fa-exclamation-triangle\"></i> ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ</h4>';\n                content += '<ul class=\"task-list\">';\n                myIncidents.forEach(inc => {\n                    content += `\n                        <li class=\"task-item priority-${inc.priority}\">\n                            <span class=\"task-id\">${escapeHtml(inc.id)}</span>\n                            <span class=\"task-title\">${escapeHtml(inc.title)}</span>\n                            <span class=\"badge badge-${inc.priority}\">${inc.priority}</span>\n                        </li>\n                    `;\n                });\n                content += '</ul>';\n            }\n\n            if (myChanges.length > 0) {\n                content += '<h4><i class=\"fas fa-code-branch\"></i> å¤‰æ›´è¦æ±‚</h4>';\n                content += '<ul class=\"task-list\">';\n                myChanges.forEach(chg => {\n                    content += `\n                        <li class=\"task-item\">\n                            <span class=\"task-id\">${escapeHtml(chg.id)}</span>\n                            <span class=\"task-title\">${escapeHtml(chg.title)}</span>\n                            <span class=\"badge\">${escapeHtml(chg.status)}</span>\n                        </li>\n                    `;\n                });\n                content += '</ul>';\n            }\n        }\n\n        content += '</div>';\n\n        Modal.open({\n            title: 'æ‹…å½“ã‚¿ã‚¹ã‚¯ä¸€è¦§',\n            content: content,\n            size: 'medium',\n            buttons: [\n                {\n                    text: 'é–‰ã˜ã‚‹',\n                    class: 'btn-primary',\n                    onclick: 'Modal.close()',\n                },\n            ],\n        });\n    },\n\n    /**\n     * ãƒ¬ãƒãƒ¼ãƒˆè¡¨ç¤º\n     */\n    viewReports() {\n        Modal.open({\n            title: 'ãƒ¬ãƒãƒ¼ãƒˆ',\n            content: `\n                <div class=\"reports-menu\">\n                    <button class=\"btn btn-block\" onclick=\"QuickActions.generateIncidentReport()\">\n                        <i class=\"fas fa-file-pdf\"></i> ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆãƒ¬ãƒãƒ¼ãƒˆ\n                    </button>\n                    <button class=\"btn btn-block\" onclick=\"QuickActions.generateChangeReport()\">\n                        <i class=\"fas fa-file-pdf\"></i> å¤‰æ›´ç®¡ç†ãƒ¬ãƒãƒ¼ãƒˆ\n                    </button>\n                    <button class=\"btn btn-block\" onclick=\"QuickActions.generateActivityReport()\">\n                        <i class=\"fas fa-file-pdf\"></i> ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ãƒ¬ãƒãƒ¼ãƒˆ\n                    </button>\n                </div>\n            `,\n            size: 'small',\n            buttons: [\n                {\n                    text: 'é–‰ã˜ã‚‹',\n                    class: 'btn-secondary',\n                    onclick: 'Modal.close()',\n                },\n            ],\n        });\n    },\n\n    /**\n     * ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ\n     */\n    generateIncidentReport() {\n        Toast.info('ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆæ©Ÿèƒ½ã¯ä»Šå¾Œã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã§å®Ÿè£…äºˆå®šã§ã™');\n    },\n\n    /**\n     * å¤‰æ›´ç®¡ç†ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ\n     */\n    generateChangeReport() {\n        Toast.info('ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆæ©Ÿèƒ½ã¯ä»Šå¾Œã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã§å®Ÿè£…äºˆå®šã§ã™');\n    },\n\n    /**\n     * ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ\n     */\n    generateActivityReport() {\n        Toast.info('ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆæ©Ÿèƒ½ã¯ä»Šå¾Œã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã§å®Ÿè£…äºˆå®šã§ã™');\n    },\n};\n\n/**\n * ã‚·ã‚¹ãƒ†ãƒ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ\n */\nconst SystemStatus = {\n    /**\n     * ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°\n     */\n    render() {\n        const container = document.getElementById('systemStatus');\n        if (!container) {\n            return;\n        }\n\n        const status = this.getStatus();\n\n        container.innerHTML = `\n            <div class=\"system-status-grid\">\n                <div class=\"status-indicator ${status.api}\">\n                    <i class=\"fas fa-plug\"></i>\n                    <span>APIæ¥ç¶š</span>\n                </div>\n                <div class=\"status-indicator ${status.storage}\">\n                    <i class=\"fas fa-database\"></i>\n                    <span>ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸</span>\n                </div>\n                <div class=\"status-indicator ${status.sync}\">\n                    <i class=\"fas fa-sync\"></i>\n                    <span>åŒæœŸ</span>\n                </div>\n            </div>\n            <div class=\"storage-usage\">\n                <div class=\"storage-label\">\n                    <span>ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ä½¿ç”¨é‡</span>\n                    <span>${status.storageUsed} / ${status.storageMax}</span>\n                </div>\n                <div class=\"storage-bar\">\n                    <div class=\"storage-fill\" style=\"width: ${status.storagePercent}%\"></div>\n                </div>\n            </div>\n        `;\n    },\n\n    /**\n     * ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å–å¾—\n     */\n    getStatus() {\n        // localStorageä½¿ç”¨é‡ã‚’è¨ˆç®—\n        let totalSize = 0;\n        for (const key in localStorage) {\n            if (\n                Object.prototype.hasOwnProperty.call(localStorage, key) &&\n                key.startsWith('appsuite_')\n            ) {\n                totalSize += (localStorage.getItem(key) || '').length * 2; // UTF-16\n            }\n        }\n\n        const maxSize = 5 * 1024 * 1024; // 5MBï¼ˆä¸€èˆ¬çš„ãªlocalStorageä¸Šé™ï¼‰\n        const usedKB = Math.round(totalSize / 1024);\n        const maxKB = Math.round(maxSize / 1024);\n        const percent = Math.round((totalSize / maxSize) * 100);\n\n        return {\n            api: 'offline', // å®Ÿéš›ã®æ¥ç¶šçŠ¶æ…‹ã«å¿œã˜ã¦å¤‰æ›´\n            storage: percent < 80 ? 'online' : 'warning',\n            sync: 'offline',\n            storageUsed: `${usedKB}KB`,\n            storageMax: `${maxKB}KB`,\n            storagePercent: percent,\n        };\n    },\n};\n\n// Export to global scope\nwindow.DashboardManager = DashboardManager;\nwindow.KPIWidget = KPIWidget;\nwindow.QuickActions = QuickActions;\nwindow.SystemStatus = SystemStatus;\n\n// åˆæœŸåŒ–ã¯app.jsã‹ã‚‰å‘¼ã³å‡ºã•ã‚Œã‚‹\n","usedDeprecatedRules":[{"ruleId":"semi","replacedBy":["@stylistic/semi"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"semi","url":"https://eslint.style/rules/semi"}}]}},{"ruleId":"quotes","replacedBy":["@stylistic/quotes"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"quotes","url":"https://eslint.style/rules/quotes"}}]}},{"ruleId":"indent","replacedBy":["@stylistic/indent"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"indent","url":"https://eslint.style/rules/indent"}}]}}]},{"filePath":"/home/runner/work/Appsuite-ITSM-Management/Appsuite-ITSM-Management/WebUI-Production/js/modules.js","messages":[{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 24.","line":171,"column":1,"messageId":"wrongIndentation","endLine":171,"endColumn":25,"fix":{"range":[5809,5833],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 28.","line":172,"column":1,"messageId":"wrongIndentation","endLine":172,"endColumn":29,"fix":{"range":[5839,5867],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 24.","line":173,"column":1,"messageId":"wrongIndentation","endLine":173,"endColumn":25,"fix":{"range":[5939,5963],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 24.","line":174,"column":1,"messageId":"wrongIndentation","endLine":174,"endColumn":25,"fix":{"range":[5965,5989],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 24.","line":409,"column":1,"messageId":"wrongIndentation","endLine":409,"endColumn":25,"fix":{"range":[15086,15110],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 24.","line":410,"column":1,"messageId":"wrongIndentation","endLine":410,"endColumn":25,"fix":{"range":[15185,15209],"text":"        "}},{"ruleId":"no-undef","severity":1,"message":"'FileReader' is not defined.","line":1553,"column":28,"messageId":"undef","endLine":1553,"endColumn":38},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":1584,"column":22,"messageId":"unusedVar","endLine":1584,"endColumn":27}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":6,"fixableWarningCount":0,"source":"/**\n * AppSuite ç®¡ç†é‹ç”¨ã‚·ã‚¹ãƒ†ãƒ  - æ©Ÿèƒ½ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«\n */\n\n/**\n * ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹æ¤œè¨¼\n * @param {string} value - æ¤œè¨¼ã™ã‚‹å€¤\n * @returns {boolean} - æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®å ´åˆtrue\n */\nfunction isValidEmail(value) {\n    return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(value);\n}\n\n/**\n * æ©Ÿå¯†æƒ…å ±ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ï¼ˆãƒ­ã‚°ãƒ»ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆç”¨ï¼‰\n * CVE-004å¯¾ç­–: ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã€APIã‚­ãƒ¼ã€ãƒˆãƒ¼ã‚¯ãƒ³ç­‰ã®æ©Ÿå¯†æƒ…å ±ã‚’é™¤å¤–\n * @param {string} text - ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å¯¾è±¡ã®ãƒ†ã‚­ã‚¹ãƒˆ\n * @returns {string} - æ©Ÿå¯†æƒ…å ±ã‚’ãƒã‚¹ã‚­ãƒ³ã‚°ã—ãŸãƒ†ã‚­ã‚¹ãƒˆ\n */\nfunction sanitizeSensitiveData(text) {\n    if (!text || typeof text !== 'string') {\n        return text;\n    }\n\n    // æ©Ÿå¯†æƒ…å ±ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ãƒã‚¹ã‚­ãƒ³ã‚°\n    let sanitized = text;\n\n    // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰é–¢é€£\n    sanitized = sanitized.replace(\n        /(password|passwd|pwd)[\\s:=]+['\"]?[\\w!@#$%^&*()_+-=]+['\"]?/gi,\n        '$1: ******'\n    );\n\n    // APIã‚­ãƒ¼é–¢é€£\n    sanitized = sanitized.replace(\n        /(api[-_]?key|apikey|token|bearer)[\\s:=]+['\"]?[\\w-]+['\"]?/gi,\n        '$1: ******'\n    );\n\n    // èªè¨¼æƒ…å ±\n    sanitized = sanitized.replace(/(authorization)[\\s:=]+['\"]?[\\w\\s]+['\"]?/gi, '$1: ******');\n\n    // ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ç•ªå·ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆå¿µã®ãŸã‚ï¼‰\n    sanitized = sanitized.replace(\n        /\\b\\d{4}[\\s-]?\\d{4}[\\s-]?\\d{4}[\\s-]?\\d{4}\\b/g,\n        '****-****-****-****'\n    );\n\n    return sanitized;\n}\n\n// ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«\nconst UserModule = {\n    refresh() {\n        this.render(DataStore.users);\n    },\n\n    render(users) {\n        const readOnly = window.ApiSync?.isReadOnly;\n        const tbody = document.getElementById('usersTableBody');\n        tbody.innerHTML = users\n            .map(\n                user => `\n            <tr>\n                <td>${escapeHtml(user.id)}</td>\n                <td>${escapeHtml(user.username)}</td>\n                <td>${escapeHtml(user.email)}</td>\n                <td>${escapeHtml(user.department)}</td>\n                <td><span class=\"badge ${user.role === 'ç®¡ç†è€…' ? 'badge-primary' : 'badge-info'}\">${escapeHtml(user.role)}</span></td>\n                <td><span class=\"badge ${user.status === 'active' ? 'badge-success' : 'badge-secondary'}\">${user.status === 'active' ? 'æœ‰åŠ¹' : 'ç„¡åŠ¹'}</span></td>\n                <td>${escapeHtml(user.lastLogin)}</td>\n                <td>\n                    <button class=\"action-btn edit\" onclick=\"UserModule.edit('${escapeHtml(user.id)}')\" title=\"${readOnly ? 'å‚ç…§å°‚ç”¨ã®ãŸã‚ç·¨é›†ä¸å¯' : 'ç·¨é›†'}\" ${readOnly ? 'disabled' : ''}><i class=\"fas fa-edit\"></i></button>\n                    <button class=\"action-btn delete\" onclick=\"UserModule.delete('${escapeHtml(user.id)}')\" title=\"${readOnly ? 'å‚ç…§å°‚ç”¨ã®ãŸã‚å‰Šé™¤ä¸å¯' : 'å‰Šé™¤'}\" ${readOnly ? 'disabled' : ''}><i class=\"fas fa-trash\"></i></button>\n                </td>\n            </tr>\n        `\n            )\n            .join('');\n    },\n\n    showAddModal() {\n        openModal(\n            'ãƒ¦ãƒ¼ã‚¶ãƒ¼è¿½åŠ ',\n            `\n            <div class=\"form-group\">\n                <label>ãƒ¦ãƒ¼ã‚¶ãƒ¼å</label>\n                <input type=\"text\" id=\"newUserName\" required>\n            </div>\n            <div class=\"form-group\">\n                <label>ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>\n                <input type=\"email\" id=\"newUserEmail\" required>\n            </div>\n            <div class=\"form-group\">\n                <label>éƒ¨ç½²</label>\n                <select id=\"newUserDept\">\n                    <option>æƒ…å ±ã‚·ã‚¹ãƒ†ãƒ éƒ¨</option>\n                    <option>å–¶æ¥­éƒ¨</option>\n                    <option>ç·å‹™éƒ¨</option>\n                    <option>é–‹ç™ºéƒ¨</option>\n                    <option>çµŒç†éƒ¨</option>\n                </select>\n            </div>\n            <div class=\"form-group\">\n                <label>æ¨©é™</label>\n                <select id=\"newUserRole\">\n                    <option value=\"ãƒ¦ãƒ¼ã‚¶ãƒ¼\">ãƒ¦ãƒ¼ã‚¶ãƒ¼</option>\n                    <option value=\"ç®¡ç†è€…\">ç®¡ç†è€…</option>\n                </select>\n            </div>\n            <div class=\"form-group\">\n                <label>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</label>\n                <select id=\"newUserStatus\">\n                    <option value=\"active\">æœ‰åŠ¹</option>\n                    <option value=\"inactive\">ç„¡åŠ¹</option>\n                </select>\n            </div>\n        `,\n            [\n                { text: 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«', class: 'btn-secondary', onclick: 'closeModal()' },\n                { text: 'è¿½åŠ ', class: 'btn-primary', onclick: 'UserModule.add()' },\n            ]\n        );\n    },\n\n    add() {\n        const username = document.getElementById('newUserName').value.trim();\n        const email = document.getElementById('newUserEmail').value.trim();\n        if (!username || username.length > 50) {\n            showToast('ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¯1-50æ–‡å­—ã§å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');\n            return;\n        }\n        if (!isValidEmail(email)) {\n            showToast('ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å½¢å¼ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“', 'error');\n            return;\n        }\n        const newUser = {\n            id: 'U' + String(DataStore.users.length + 1).padStart(4, '0'),\n            username: username,\n            email: email,\n            department: document.getElementById('newUserDept').value,\n            role: document.getElementById('newUserRole').value,\n            status: document.getElementById('newUserStatus').value,\n            lastLogin: '-',\n        };\n        DataStore.users.push(newUser);\n        this.refresh();\n        closeModal();\n        showToast('ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’è¿½åŠ ã—ã¾ã—ãŸ', 'success');\n        LogModule.addLog('create', 'ãƒ¦ãƒ¼ã‚¶ãƒ¼', 'user', 'æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼è¿½åŠ : ' + newUser.username);\n        updateDashboard();\n    },\n\n    edit(id) {\n        const user = DataStore.users.find(u => u.id === id);\n        openModal(\n            'ãƒ¦ãƒ¼ã‚¶ãƒ¼ç·¨é›†',\n            `\n            <div class=\"form-group\">\n                <label>ãƒ¦ãƒ¼ã‚¶ãƒ¼å</label>\n                <input type=\"text\" id=\"editUserName\" value=\"${user.username}\">\n            </div>\n            <div class=\"form-group\">\n                <label>ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>\n                <input type=\"email\" id=\"editUserEmail\" value=\"${user.email}\">\n            </div>\n            <div class=\"form-group\">\n                <label>éƒ¨ç½²</label>\n                <select id=\"editUserDept\">\n                    ${['æƒ…å ±ã‚·ã‚¹ãƒ†ãƒ éƒ¨', 'å–¶æ¥­éƒ¨', 'ç·å‹™éƒ¨', 'é–‹ç™ºéƒ¨', 'çµŒç†éƒ¨']\n                        .map(\n                            d => `<option ${d === user.department ? 'selected' : ''}>${d}</option>`\n                        )\n                        .join('')}\n                </select>\n            </div>\n            <div class=\"form-group\">\n                <label>æ¨©é™</label>\n                <select id=\"editUserRole\">\n                    <option ${user.role === 'ãƒ¦ãƒ¼ã‚¶ãƒ¼' ? 'selected' : ''}>ãƒ¦ãƒ¼ã‚¶ãƒ¼</option>\n                    <option ${user.role === 'ç®¡ç†è€…' ? 'selected' : ''}>ç®¡ç†è€…</option>\n                </select>\n            </div>\n            <div class=\"form-group\">\n                <label>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</label>\n                <select id=\"editUserStatus\">\n                    <option value=\"active\" ${user.status === 'active' ? 'selected' : ''}>æœ‰åŠ¹</option>\n                    <option value=\"inactive\" ${user.status === 'inactive' ? 'selected' : ''}>ç„¡åŠ¹</option>\n                </select>\n            </div>\n        `,\n            [\n                { text: 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«', class: 'btn-secondary', onclick: 'closeModal()' },\n                { text: 'ä¿å­˜', class: 'btn-primary', onclick: `UserModule.save('${id}')` },\n            ]\n        );\n    },\n\n    save(id) {\n        const user = DataStore.users.find(u => u.id === id);\n        const username = document.getElementById('editUserName').value.trim();\n        const email = document.getElementById('editUserEmail').value.trim();\n        if (!username || username.length > 50) {\n            showToast('ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¯1-50æ–‡å­—ã§å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');\n            return;\n        }\n        if (!isValidEmail(email)) {\n            showToast('ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å½¢å¼ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“', 'error');\n            return;\n        }\n        user.username = username;\n        user.email = email;\n        user.department = document.getElementById('editUserDept').value;\n        user.role = document.getElementById('editUserRole').value;\n        user.status = document.getElementById('editUserStatus').value;\n        this.refresh();\n        closeModal();\n        showToast('ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’æ›´æ–°ã—ã¾ã—ãŸ', 'success');\n        LogModule.addLog('update', 'ãƒ¦ãƒ¼ã‚¶ãƒ¼', 'user', 'ãƒ¦ãƒ¼ã‚¶ãƒ¼æ›´æ–°: ' + user.username);\n        updateDashboard();\n    },\n\n    delete(id) {\n        const user = DataStore.users.find(u => u.id === id);\n        if (confirm(`ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€Œ${user.username}ã€ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ`)) {\n            const idx = DataStore.users.findIndex(u => u.id === id);\n            DataStore.users.splice(idx, 1);\n            this.refresh();\n            showToast('ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å‰Šé™¤ã—ã¾ã—ãŸ', 'success');\n            LogModule.addLog('delete', 'ãƒ¦ãƒ¼ã‚¶ãƒ¼', 'user', 'ãƒ¦ãƒ¼ã‚¶ãƒ¼å‰Šé™¤: ' + user.username);\n            updateDashboard();\n        }\n    },\n\n    filter() {\n        const search = document.getElementById('userSearch').value.toLowerCase();\n        const status = document.getElementById('userStatusFilter').value;\n        const role = document.getElementById('userRoleFilter').value;\n\n        let filtered = DataStore.users;\n\n        if (search) {\n            filtered = filtered.filter(\n                u =>\n                    u.username.toLowerCase().includes(search) ||\n                    u.email.toLowerCase().includes(search)\n            );\n        }\n        if (status) {\n            filtered = filtered.filter(u => u.status === status);\n        }\n        if (role) {\n            filtered = filtered.filter(u => u.role === role);\n        }\n\n        this.render(filtered);\n    },\n};\n\n// ã‚¢ãƒ—ãƒªç®¡ç†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«\nconst AppModule = {\n    refresh() {\n        this.render(DataStore.apps);\n    },\n\n    render(apps) {\n        const readOnly = window.ApiSync?.isReadOnly;\n        const tbody = document.getElementById('appsTableBody');\n        tbody.innerHTML = apps\n            .map(\n                app => `\n            <tr>\n                <td>${escapeHtml(app.id)}</td>\n                <td>${escapeHtml(app.name)}</td>\n                <td>${escapeHtml(app.category)}</td>\n                <td>${escapeHtml(app.creator)}</td>\n                <td>${app.records.toLocaleString()}</td>\n                <td><span class=\"badge ${this.getStatusBadge(app.status)}\">${this.getStatusText(app.status)}</span></td>\n                <td>${escapeHtml(app.updated)}</td>\n                <td>\n                    <button class=\"action-btn view\" onclick=\"AppModule.view('${escapeHtml(app.id)}')\" title=\"è©³ç´°\"><i class=\"fas fa-eye\"></i></button>\n                    <button class=\"action-btn edit\" onclick=\"AppModule.edit('${escapeHtml(app.id)}')\" title=\"${readOnly ? 'å‚ç…§å°‚ç”¨ã®ãŸã‚ç·¨é›†ä¸å¯' : 'ç·¨é›†'}\" ${readOnly ? 'disabled' : ''}><i class=\"fas fa-edit\"></i></button>\n                    <button class=\"action-btn delete\" onclick=\"AppModule.delete('${escapeHtml(app.id)}')\" title=\"${readOnly ? 'å‚ç…§å°‚ç”¨ã®ãŸã‚å‰Šé™¤ä¸å¯' : 'å‰Šé™¤'}\" ${readOnly ? 'disabled' : ''}><i class=\"fas fa-trash\"></i></button>\n                </td>\n            </tr>\n        `\n            )\n            .join('');\n    },\n\n    getStatusBadge(status) {\n        const badges = {\n            active: 'badge-success',\n            maintenance: 'badge-warning',\n            inactive: 'badge-secondary',\n        };\n        return badges[status] || 'badge-secondary';\n    },\n\n    getStatusText(status) {\n        const texts = { active: 'ç¨¼åƒä¸­', maintenance: 'ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹', inactive: 'åœæ­¢ä¸­' };\n        return texts[status] || status;\n    },\n\n    showAddModal() {\n        openModal(\n            'æ–°è¦ã‚¢ãƒ—ãƒªç™»éŒ²',\n            `\n            <div class=\"form-group\">\n                <label>ã‚¢ãƒ—ãƒªå</label>\n                <input type=\"text\" id=\"newAppName\" required>\n            </div>\n            <div class=\"form-group\">\n                <label>ã‚«ãƒ†ã‚´ãƒª</label>\n                <select id=\"newAppCategory\">\n                    <option>æ¥­å‹™ç®¡ç†</option>\n                    <option>ç”³è«‹ãƒ»æ‰¿èª</option>\n                    <option>ãƒ‡ãƒ¼ã‚¿ç®¡ç†</option>\n                    <option>ãã®ä»–</option>\n                </select>\n            </div>\n            <div class=\"form-group\">\n                <label>ä½œæˆè€…</label>\n                <input type=\"text\" id=\"newAppCreator\" value=\"${document.getElementById('currentUser').textContent}\">\n            </div>\n            <div class=\"form-group\">\n                <label>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</label>\n                <select id=\"newAppStatus\">\n                    <option value=\"active\">ç¨¼åƒä¸­</option>\n                    <option value=\"maintenance\">ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹</option>\n                    <option value=\"inactive\">åœæ­¢ä¸­</option>\n                </select>\n            </div>\n            <div class=\"form-group\">\n                <label>èª¬æ˜</label>\n                <textarea id=\"newAppDesc\" rows=\"3\" style=\"width:100%;padding:10px;border:1px solid #e2e8f0;border-radius:8px;\"></textarea>\n            </div>\n        `,\n            [\n                { text: 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«', class: 'btn-secondary', onclick: 'closeModal()' },\n                { text: 'ç™»éŒ²', class: 'btn-primary', onclick: 'AppModule.add()' },\n            ]\n        );\n    },\n\n    add() {\n        const name = document.getElementById('newAppName').value.trim();\n        const creator = document.getElementById('newAppCreator').value.trim();\n        if (!name || name.length > 100) {\n            showToast('ã‚¢ãƒ—ãƒªåã¯1-100æ–‡å­—ã§å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');\n            return;\n        }\n        if (!creator || creator.length > 50) {\n            showToast('ä½œæˆè€…ã¯1-50æ–‡å­—ã§å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');\n            return;\n        }\n        const newApp = {\n            id: 'APP' + String(DataStore.apps.length + 1).padStart(3, '0'),\n            name: name,\n            category: document.getElementById('newAppCategory').value,\n            creator: creator,\n            records: 0,\n            status: document.getElementById('newAppStatus').value,\n            updated: new Date().toISOString().split('T')[0],\n            description: document.getElementById('newAppDesc').value.trim(),\n        };\n        DataStore.apps.push(newApp);\n        this.refresh();\n        closeModal();\n        showToast('ã‚¢ãƒ—ãƒªã‚’ç™»éŒ²ã—ã¾ã—ãŸ', 'success');\n        LogModule.addLog('create', newApp.name, 'app', 'æ–°è¦ã‚¢ãƒ—ãƒªä½œæˆ');\n        updateDashboard();\n    },\n\n    view(id) {\n        const app = DataStore.apps.find(a => a.id === id);\n        openModal(\n            'ã‚¢ãƒ—ãƒªè©³ç´°: ' + app.name,\n            `\n            <div style=\"line-height: 2;\">\n                <p><strong>ã‚¢ãƒ—ãƒªID:</strong> ${app.id}</p>\n                <p><strong>ã‚¢ãƒ—ãƒªå:</strong> ${app.name}</p>\n                <p><strong>ã‚«ãƒ†ã‚´ãƒª:</strong> ${app.category}</p>\n                <p><strong>ä½œæˆè€…:</strong> ${app.creator}</p>\n                <p><strong>ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°:</strong> ${app.records.toLocaleString()}ä»¶</p>\n                <p><strong>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:</strong> ${this.getStatusText(app.status)}</p>\n                <p><strong>æœ€çµ‚æ›´æ–°:</strong> ${app.updated}</p>\n                <p><strong>èª¬æ˜:</strong></p>\n                <p style=\"background:#f8fafc;padding:10px;border-radius:8px;\">${app.description || 'ï¼ˆãªã—ï¼‰'}</p>\n            </div>\n        `,\n            [{ text: 'é–‰ã˜ã‚‹', class: 'btn-secondary', onclick: 'closeModal()' }]\n        );\n    },\n\n    edit(id) {\n        const app = DataStore.apps.find(a => a.id === id);\n        openModal(\n            'ã‚¢ãƒ—ãƒªç·¨é›†: ' + app.name,\n            `\n            <div class=\"form-group\">\n                <label>ã‚¢ãƒ—ãƒªå</label>\n                <input type=\"text\" id=\"editAppName\" value=\"${app.name}\">\n            </div>\n            <div class=\"form-group\">\n                <label>ã‚«ãƒ†ã‚´ãƒª</label>\n                <select id=\"editAppCategory\">\n                    ${['æ¥­å‹™ç®¡ç†', 'ç”³è«‹ãƒ»æ‰¿èª', 'ãƒ‡ãƒ¼ã‚¿ç®¡ç†', 'ãã®ä»–']\n                        .map(c => `<option ${c === app.category ? 'selected' : ''}>${c}</option>`)\n                        .join('')}\n                </select>\n            </div>\n            <div class=\"form-group\">\n                <label>ä½œæˆè€…</label>\n                <input type=\"text\" id=\"editAppCreator\" value=\"${app.creator}\">\n            </div>\n            <div class=\"form-group\">\n                <label>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</label>\n                <select id=\"editAppStatus\">\n                    <option value=\"active\" ${app.status === 'active' ? 'selected' : ''}>ç¨¼åƒä¸­</option>\n                    <option value=\"maintenance\" ${app.status === 'maintenance' ? 'selected' : ''}>ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹</option>\n                    <option value=\"inactive\" ${app.status === 'inactive' ? 'selected' : ''}>åœæ­¢ä¸­</option>\n                </select>\n            </div>\n            <div class=\"form-group\">\n                <label>èª¬æ˜</label>\n                <textarea id=\"editAppDesc\" rows=\"3\" style=\"width:100%;padding:10px;border:1px solid #e2e8f0;border-radius:8px;\">${app.description || ''}</textarea>\n            </div>\n        `,\n            [\n                { text: 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«', class: 'btn-secondary', onclick: 'closeModal()' },\n                { text: 'ä¿å­˜', class: 'btn-primary', onclick: `AppModule.save('${id}')` },\n            ]\n        );\n    },\n\n    save(id) {\n        const app = DataStore.apps.find(a => a.id === id);\n        const name = document.getElementById('editAppName').value.trim();\n        const creator = document.getElementById('editAppCreator').value.trim();\n        if (!name || name.length > 100) {\n            showToast('ã‚¢ãƒ—ãƒªåã¯1-100æ–‡å­—ã§å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');\n            return;\n        }\n        if (!creator || creator.length > 50) {\n            showToast('ä½œæˆè€…ã¯1-50æ–‡å­—ã§å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');\n            return;\n        }\n        app.name = name;\n        app.category = document.getElementById('editAppCategory').value;\n        app.creator = creator;\n        app.status = document.getElementById('editAppStatus').value;\n        app.updated = new Date().toISOString().split('T')[0];\n        app.description = document.getElementById('editAppDesc').value.trim();\n        this.refresh();\n        closeModal();\n        showToast('ã‚¢ãƒ—ãƒªæƒ…å ±ã‚’æ›´æ–°ã—ã¾ã—ãŸ', 'success');\n        LogModule.addLog('update', app.name, 'app', 'ã‚¢ãƒ—ãƒªè¨­å®šã‚’æ›´æ–°');\n        updateDashboard();\n    },\n\n    delete(id) {\n        const app = DataStore.apps.find(a => a.id === id);\n        if (\n            confirm(\n                `ã‚¢ãƒ—ãƒªã€Œ${app.name}ã€ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ\\nâ€» ${app.records}ä»¶ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚‚å‰Šé™¤ã•ã‚Œã¾ã™ã€‚`\n            )\n        ) {\n            const idx = DataStore.apps.findIndex(a => a.id === id);\n            DataStore.apps.splice(idx, 1);\n            this.refresh();\n            showToast('ã‚¢ãƒ—ãƒªã‚’å‰Šé™¤ã—ã¾ã—ãŸ', 'success');\n            LogModule.addLog('delete', app.name, 'app', 'ã‚¢ãƒ—ãƒªå‰Šé™¤');\n            updateDashboard();\n        }\n    },\n\n    filter() {\n        const search = document.getElementById('appSearch').value.toLowerCase();\n        const category = document.getElementById('appCategoryFilter').value;\n        const status = document.getElementById('appStatusFilter').value;\n\n        let filtered = DataStore.apps;\n\n        if (search) {\n            filtered = filtered.filter(a => a.name.toLowerCase().includes(search));\n        }\n        if (category) {\n            filtered = filtered.filter(a => a.category === category);\n        }\n        if (status) {\n            filtered = filtered.filter(a => a.status === status);\n        }\n\n        this.render(filtered);\n    },\n};\n\n// ç›£æŸ»ãƒ­ã‚°ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«\nconst LogModule = {\n    refresh() {\n        this.render(DataStore.logs);\n    },\n\n    render(logs) {\n        const tbody = document.getElementById('logsTableBody');\n        tbody.innerHTML = logs\n            .map(\n                log => `\n            <tr>\n                <td>${escapeHtml(log.timestamp)}</td>\n                <td>${escapeHtml(log.user)}</td>\n                <td><span class=\"badge ${this.getActionBadge(log.action)}\">${this.getActionText(log.action)}</span></td>\n                <td>${escapeHtml(log.target)}</td>\n                <td>${escapeHtml(log.detail)}</td>\n                <td>${escapeHtml(log.ip)}</td>\n            </tr>\n        `\n            )\n            .join('');\n    },\n\n    getActionBadge(action) {\n        const badges = {\n            login: 'badge-success',\n            logout: 'badge-secondary',\n            create: 'badge-info',\n            update: 'badge-warning',\n            delete: 'badge-danger',\n            export: 'badge-info',\n            escalation: 'badge-danger',\n        };\n        return badges[action] || 'badge-secondary';\n    },\n\n    getActionText(action) {\n        const texts = {\n            login: 'ãƒ­ã‚°ã‚¤ãƒ³',\n            logout: 'ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ',\n            create: 'ä½œæˆ',\n            update: 'æ›´æ–°',\n            delete: 'å‰Šé™¤',\n            export: 'ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ',\n            escalation: 'ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ãƒˆ',\n        };\n        return texts[action] || action;\n    },\n\n    addLog(action, target, targetType, detail) {\n        const now = new Date();\n        const timestamp = `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}-${String(now.getDate()).padStart(2, '0')} ${String(now.getHours()).padStart(2, '0')}:${String(now.getMinutes()).padStart(2, '0')}:${String(now.getSeconds()).padStart(2, '0')}`;\n\n        // IPã‚¢ãƒ‰ãƒ¬ã‚¹ã®å–å¾—\n        // æ³¨æ„: ãƒ–ãƒ©ã‚¦ã‚¶ç’°å¢ƒã§ã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆIPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ç›´æ¥å–å¾—ã™ã‚‹ã“ã¨ã¯\n        // ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šã®ç†ç”±ã«ã‚ˆã‚Šä¸å¯èƒ½ã§ã™ã€‚\n        // æœ¬ç•ªç’°å¢ƒã§ã¯ã€ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆX-Forwarded-Forç­‰ï¼‰ã‹ã‚‰\n        // IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å–å¾—ã—ã€APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«å«ã‚ã‚‹ã‹ã€ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§ãƒ­ã‚°ã‚’è¨˜éŒ²ã—ã¦ãã ã•ã„ã€‚\n        const clientIp = this.getClientIP();\n\n        // CVE-004å¯¾ç­–: æ©Ÿå¯†æƒ…å ±ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°\n        const sanitizedDetail = sanitizeSensitiveData(detail);\n        const sanitizedTarget = sanitizeSensitiveData(target);\n\n        DataStore.logs.unshift({\n            timestamp: timestamp,\n            user: document.getElementById('currentUser').textContent,\n            action: action,\n            target: sanitizedTarget,\n            targetType: targetType,\n            detail: sanitizedDetail,\n            ip: clientIp,\n        });\n    },\n\n    /**\n     * ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆIPã‚¢ãƒ‰ãƒ¬ã‚¹å–å¾—ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ç’°å¢ƒã§ã¯åˆ¶é™ã‚ã‚Šï¼‰\n     * @returns {string} IPã‚¢ãƒ‰ãƒ¬ã‚¹ï¼ˆå–å¾—ä¸å¯ã®å ´åˆã¯'N/A'ï¼‰\n     */\n    getClientIP() {\n        // ãƒ–ãƒ©ã‚¦ã‚¶ç’°å¢ƒã§ã¯çœŸã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆIPã‚’å–å¾—ã§ããªã„ãŸã‚ã€\n        // 'N/A'ã‚’è¿”ã—ã¾ã™ã€‚\n        //\n        // æœ¬ç•ªç’°å¢ƒã§ã®æ¨å¥¨å®Ÿè£…:\n        // 1. ã‚µãƒ¼ãƒãƒ¼APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼ˆ/api/client-infoï¼‰ã‚’ä½œæˆ\n        // 2. ã‚µãƒ¼ãƒãƒ¼å´ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ˜ãƒƒãƒ€ãƒ¼ã‹ã‚‰IPã‚’å–å¾—\n        //    - req.headers['x-forwarded-for']ï¼ˆãƒ—ãƒ­ã‚­ã‚·çµŒç”±ã®å ´åˆï¼‰\n        //    - req.connection.remoteAddressï¼ˆç›´æ¥æ¥ç¶šã®å ´åˆï¼‰\n        // 3. å„ãƒ­ã‚°è¨˜éŒ²æ™‚ã«APIã‚’å‘¼ã³å‡ºã—ã¦IPã‚’å–å¾—\n        //\n        // å°†æ¥ã®å®Ÿè£…ä¾‹:\n        // if (typeof ApiClient !== 'undefined' && ApiClient.getClientInfo) {\n        //     return await ApiClient.getClientInfo();\n        // }\n\n        return 'N/A (ãƒ–ãƒ©ã‚¦ã‚¶å´ã§ã¯å–å¾—ä¸å¯)';\n    },\n\n    search() {\n        const from = document.getElementById('logDateFrom').value;\n        const to = document.getElementById('logDateTo').value;\n        const actionType = document.getElementById('logTypeFilter').value;\n        const targetType = document.getElementById('logTargetFilter').value;\n\n        let filtered = DataStore.logs;\n\n        if (actionType) {\n            filtered = filtered.filter(l => l.action === actionType);\n        }\n        if (targetType) {\n            filtered = filtered.filter(l => l.targetType === targetType);\n        }\n        if (from) {\n            filtered = filtered.filter(l => l.timestamp >= from);\n        }\n        if (to) {\n            filtered = filtered.filter(l => l.timestamp <= to + ' 23:59:59');\n        }\n\n        this.render(filtered);\n        showToast(`${filtered.length}ä»¶ã®ãƒ­ã‚°ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ`, 'success');\n    },\n\n    export() {\n        const now = new Date();\n        const timestamp = `${now.getFullYear()}${String(now.getMonth() + 1).padStart(2, '0')}${String(now.getDate()).padStart(2, '0')}_${String(now.getHours()).padStart(2, '0')}${String(now.getMinutes()).padStart(2, '0')}${String(now.getSeconds()).padStart(2, '0')}`;\n        const csv =\n            '\\uFEFFæ—¥æ™‚,ãƒ¦ãƒ¼ã‚¶ãƒ¼,æ“ä½œã‚¿ã‚¤ãƒ—,å¯¾è±¡,è©³ç´°,IPã‚¢ãƒ‰ãƒ¬ã‚¹\\n' +\n            DataStore.logs\n                .map(\n                    l =>\n                        `\"${l.timestamp}\",\"${l.user}\",\"${this.getActionText(l.action)}\",\"${l.target}\",\"${l.detail}\",\"${l.ip}\"`\n                )\n                .join('\\n');\n\n        const blob = new Blob([csv], { type: 'text/csv;charset=utf-8' });\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = 'audit_log_' + timestamp + '.csv';\n        a.click();\n        showToast('ãƒ­ã‚°ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã—ãŸ', 'success');\n        this.addLog('export', 'ç›£æŸ»ãƒ­ã‚°', 'system', 'CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå®Ÿè¡Œ');\n    },\n\n    /**\n     * JSONå½¢å¼ã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ\n     */\n    exportJSON() {\n        const now = new Date();\n        const timestamp = `${now.getFullYear()}${String(now.getMonth() + 1).padStart(2, '0')}${String(now.getDate()).padStart(2, '0')}_${String(now.getHours()).padStart(2, '0')}${String(now.getMinutes()).padStart(2, '0')}${String(now.getSeconds()).padStart(2, '0')}`;\n\n        const data = {\n            exportedAt: now.toISOString(),\n            version: '1.0.0',\n            totalCount: DataStore.logs.length,\n            logs: DataStore.logs.map(log => ({\n                timestamp: log.timestamp,\n                user: log.user,\n                action: log.action,\n                actionLabel: this.getActionText(log.action),\n                target: log.target,\n                targetType: log.targetType,\n                detail: log.detail,\n                ip: log.ip,\n            })),\n        };\n\n        const blob = new Blob([JSON.stringify(data, null, 2)], {\n            type: 'application/json;charset=utf-8',\n        });\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = 'audit_log_' + timestamp + '.json';\n        a.click();\n        URL.revokeObjectURL(url);\n\n        showToast('ãƒ­ã‚°ã‚’JSONå½¢å¼ã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã—ãŸ', 'success');\n        this.addLog('export', 'ç›£æŸ»ãƒ­ã‚°', 'system', 'JSONã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå®Ÿè¡Œ');\n    },\n\n    /**\n     * ãƒ•ã‚£ãƒ«ã‚¿ä»˜ãã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ\n     * @param {string} format - 'csv' ã¾ãŸã¯ 'json'\n     * @param {Object} filter - ãƒ•ã‚£ãƒ«ã‚¿æ¡ä»¶\n     */\n    exportFiltered(format, filter = {}) {\n        let logs = [...DataStore.logs];\n\n        // ãƒ•ã‚£ãƒ«ã‚¿é©ç”¨\n        if (filter.from) {\n            logs = logs.filter(l => l.timestamp >= filter.from);\n        }\n        if (filter.to) {\n            logs = logs.filter(l => l.timestamp <= filter.to + ' 23:59:59');\n        }\n        if (filter.action) {\n            logs = logs.filter(l => l.action === filter.action);\n        }\n        if (filter.targetType) {\n            logs = logs.filter(l => l.targetType === filter.targetType);\n        }\n\n        const now = new Date();\n        const timestamp = `${now.getFullYear()}${String(now.getMonth() + 1).padStart(2, '0')}${String(now.getDate()).padStart(2, '0')}_${String(now.getHours()).padStart(2, '0')}${String(now.getMinutes()).padStart(2, '0')}${String(now.getSeconds()).padStart(2, '0')}`;\n\n        if (format === 'json') {\n            const data = {\n                exportedAt: now.toISOString(),\n                version: '1.0.0',\n                filter: filter,\n                totalCount: logs.length,\n                logs: logs.map(log => ({\n                    timestamp: log.timestamp,\n                    user: log.user,\n                    action: log.action,\n                    actionLabel: this.getActionText(log.action),\n                    target: log.target,\n                    targetType: log.targetType,\n                    detail: log.detail,\n                    ip: log.ip,\n                })),\n            };\n\n            const blob = new Blob([JSON.stringify(data, null, 2)], {\n                type: 'application/json;charset=utf-8',\n            });\n            const url = URL.createObjectURL(blob);\n            const a = document.createElement('a');\n            a.href = url;\n            a.download = 'audit_log_filtered_' + timestamp + '.json';\n            a.click();\n            URL.revokeObjectURL(url);\n        } else {\n            const csv =\n                '\\uFEFFæ—¥æ™‚,ãƒ¦ãƒ¼ã‚¶ãƒ¼,æ“ä½œã‚¿ã‚¤ãƒ—,å¯¾è±¡,è©³ç´°,IPã‚¢ãƒ‰ãƒ¬ã‚¹\\n' +\n                logs\n                    .map(\n                        l =>\n                            `\"${l.timestamp}\",\"${l.user}\",\"${this.getActionText(l.action)}\",\"${l.target}\",\"${l.detail}\",\"${l.ip}\"`\n                    )\n                    .join('\\n');\n\n            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8' });\n            const url = URL.createObjectURL(blob);\n            const a = document.createElement('a');\n            a.href = url;\n            a.download = 'audit_log_filtered_' + timestamp + '.csv';\n            a.click();\n            URL.revokeObjectURL(url);\n        }\n\n        showToast(\n            `${logs.length}ä»¶ã®ãƒ­ã‚°ã‚’${format.toUpperCase()}å½¢å¼ã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã—ãŸ`,\n            'success'\n        );\n        this.addLog(\n            'export',\n            'ç›£æŸ»ãƒ­ã‚°',\n            'system',\n            `${format.toUpperCase()}ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå®Ÿè¡Œï¼ˆãƒ•ã‚£ãƒ«ã‚¿é©ç”¨ï¼‰`\n        );\n    },\n\n    renderRecent() {\n        const recentLogs = DataStore.logs.slice(0, 10);\n        const container = document.getElementById('recentLogs');\n        container.innerHTML = recentLogs\n            .map(\n                log => `\n            <div class=\"log-item\">\n                <span class=\"log-time\">${escapeHtml(log.timestamp)}</span>\n                <span class=\"log-user\">${escapeHtml(log.user)}</span>ãŒ\n                <span class=\"badge ${this.getActionBadge(log.action)}\" style=\"font-size:0.7rem;\">${this.getActionText(log.action)}</span>\n                ${escapeHtml(log.target)}\n            </div>\n        `\n            )\n            .join('');\n    },\n};\n\n// ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆç®¡ç†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«\nconst IncidentModule = {\n    refresh() {\n        this.render(DataStore.incidents);\n    },\n\n    render(incidents) {\n        const tbody = document.getElementById('incidentsTableBody');\n        tbody.innerHTML = incidents\n            .map(\n                inc => `\n            <tr>\n                <td>${escapeHtml(inc.id)}</td>\n                <td>${escapeHtml(inc.title)}</td>\n                <td>${escapeHtml(inc.appName)}</td>\n                <td><span class=\"badge ${this.getPriorityBadge(inc.priority)}\">${this.getPriorityText(inc.priority)}</span></td>\n                <td><span class=\"badge ${this.getStatusBadge(inc.status)}\">${this.getStatusText(inc.status)}</span></td>\n                <td>${escapeHtml(inc.reporter)}</td>\n                <td>${escapeHtml(inc.assignee)}</td>\n                <td>${escapeHtml(inc.created)}</td>\n                <td>\n                    <button class=\"action-btn view\" onclick=\"IncidentModule.view('${escapeHtml(inc.id)}')\" title=\"è©³ç´°\"><i class=\"fas fa-eye\"></i></button>\n                    <button class=\"action-btn edit\" onclick=\"IncidentModule.edit('${escapeHtml(inc.id)}')\" title=\"ç·¨é›†\"><i class=\"fas fa-edit\"></i></button>\n                    <button class=\"action-btn delete\" onclick=\"IncidentModule.delete('${escapeHtml(inc.id)}')\" title=\"å‰Šé™¤\"><i class=\"fas fa-trash\"></i></button>\n                </td>\n            </tr>\n        `\n            )\n            .join('');\n    },\n\n    getPriorityBadge(priority) {\n        const badges = { high: 'badge-danger', medium: 'badge-warning', low: 'badge-info' };\n        return badges[priority] || 'badge-secondary';\n    },\n\n    getPriorityText(priority) {\n        const texts = { high: 'é«˜', medium: 'ä¸­', low: 'ä½' };\n        return texts[priority] || priority;\n    },\n\n    getStatusBadge(status) {\n        const badges = {\n            open: 'badge-danger',\n            in_progress: 'badge-warning',\n            resolved: 'badge-info',\n            closed: 'badge-success',\n        };\n        return badges[status] || 'badge-secondary';\n    },\n\n    getStatusText(status) {\n        const texts = {\n            open: 'ã‚ªãƒ¼ãƒ—ãƒ³',\n            in_progress: 'å¯¾å¿œä¸­',\n            resolved: 'è§£æ±ºæ¸ˆ',\n            closed: 'ã‚¯ãƒ­ãƒ¼ã‚º',\n        };\n        return texts[status] || status;\n    },\n\n    showAddModal() {\n        const appOptions = DataStore.apps\n            .map(a => `<option value=\"${a.id}\" data-name=\"${a.name}\">${a.name}</option>`)\n            .join('');\n        const userOptions = DataStore.users\n            .filter(u => u.status === 'active')\n            .map(u => `<option value=\"${u.username}\">${u.username}</option>`)\n            .join('');\n\n        openModal(\n            'ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆç™»éŒ²',\n            `\n            <div class=\"form-group\">\n                <label>ã‚¿ã‚¤ãƒˆãƒ«</label>\n                <input type=\"text\" id=\"newIncTitle\" required>\n            </div>\n            <div class=\"form-group\">\n                <label>å¯¾è±¡ã‚¢ãƒ—ãƒª</label>\n                <select id=\"newIncApp\">\n                    ${appOptions}\n                </select>\n            </div>\n            <div class=\"form-group\">\n                <label>å„ªå…ˆåº¦</label>\n                <select id=\"newIncPriority\">\n                    <option value=\"low\">ä½</option>\n                    <option value=\"medium\" selected>ä¸­</option>\n                    <option value=\"high\">é«˜</option>\n                </select>\n            </div>\n            <div class=\"form-group\">\n                <label>æ‹…å½“è€…</label>\n                <select id=\"newIncAssignee\">\n                    <option value=\"-\">æœªå‰²å½“</option>\n                    ${userOptions}\n                </select>\n            </div>\n            <div class=\"form-group\">\n                <label>èª¬æ˜</label>\n                <textarea id=\"newIncDesc\" rows=\"3\" style=\"width:100%;padding:10px;border:1px solid #e2e8f0;border-radius:8px;\"></textarea>\n            </div>\n        `,\n            [\n                { text: 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«', class: 'btn-secondary', onclick: 'closeModal()' },\n                { text: 'ç™»éŒ²', class: 'btn-primary', onclick: 'IncidentModule.add()' },\n            ]\n        );\n    },\n\n    add() {\n        const appSelect = document.getElementById('newIncApp');\n        const selectedOption = appSelect.options[appSelect.selectedIndex];\n        const newInc = {\n            id: 'INC' + String(DataStore.incidents.length + 1).padStart(3, '0'),\n            title: document.getElementById('newIncTitle').value,\n            appId: appSelect.value,\n            appName: selectedOption.dataset.name,\n            priority: document.getElementById('newIncPriority').value,\n            status: 'open',\n            reporter: document.getElementById('currentUser').textContent,\n            assignee: document.getElementById('newIncAssignee').value,\n            created: new Date().toISOString().split('T')[0],\n            description: document.getElementById('newIncDesc').value,\n        };\n        DataStore.incidents.push(newInc);\n        this.refresh();\n        closeModal();\n        showToast('ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã‚’ç™»éŒ²ã—ã¾ã—ãŸ', 'success');\n        LogModule.addLog(\n            'create',\n            'ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ',\n            'incident',\n            'æ–°è¦ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆç™»éŒ²: ' + newInc.title\n        );\n        updateDashboard();\n\n        // é€šçŸ¥ãƒˆãƒªã‚¬ãƒ¼\n        if (typeof NotificationManager !== 'undefined') {\n            NotificationManager.notifyIncidentCreated(newInc);\n            if (newInc.priority === 'high') {\n                NotificationManager.notifyHighPriorityIncident(newInc);\n            }\n        }\n    },\n\n    view(id) {\n        const inc = DataStore.incidents.find(i => i.id === id);\n        openModal(\n            'ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆè©³ç´°: ' + inc.id,\n            `\n            <div style=\"line-height: 2;\">\n                <p><strong>ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆID:</strong> ${inc.id}</p>\n                <p><strong>ã‚¿ã‚¤ãƒˆãƒ«:</strong> ${inc.title}</p>\n                <p><strong>å¯¾è±¡ã‚¢ãƒ—ãƒª:</strong> ${inc.appName}</p>\n                <p><strong>å„ªå…ˆåº¦:</strong> <span class=\"badge ${this.getPriorityBadge(inc.priority)}\">${this.getPriorityText(inc.priority)}</span></p>\n                <p><strong>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:</strong> <span class=\"badge ${this.getStatusBadge(inc.status)}\">${this.getStatusText(inc.status)}</span></p>\n                <p><strong>å ±å‘Šè€…:</strong> ${inc.reporter}</p>\n                <p><strong>æ‹…å½“è€…:</strong> ${inc.assignee}</p>\n                <p><strong>ç™»éŒ²æ—¥:</strong> ${inc.created}</p>\n                <p><strong>èª¬æ˜:</strong></p>\n                <p style=\"background:#f8fafc;padding:10px;border-radius:8px;\">${inc.description || 'ï¼ˆãªã—ï¼‰'}</p>\n            </div>\n        `,\n            [{ text: 'é–‰ã˜ã‚‹', class: 'btn-secondary', onclick: 'closeModal()' }]\n        );\n    },\n\n    edit(id) {\n        const inc = DataStore.incidents.find(i => i.id === id);\n        const appOptions = DataStore.apps\n            .map(\n                a =>\n                    `<option value=\"${a.id}\" data-name=\"${a.name}\" ${a.id === inc.appId ? 'selected' : ''}>${a.name}</option>`\n            )\n            .join('');\n        const userOptions = DataStore.users\n            .filter(u => u.status === 'active')\n            .map(\n                u =>\n                    `<option value=\"${u.username}\" ${u.username === inc.assignee ? 'selected' : ''}>${u.username}</option>`\n            )\n            .join('');\n\n        openModal(\n            'ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆç·¨é›†: ' + inc.id,\n            `\n            <div class=\"form-group\">\n                <label>ã‚¿ã‚¤ãƒˆãƒ«</label>\n                <input type=\"text\" id=\"editIncTitle\" value=\"${inc.title}\">\n            </div>\n            <div class=\"form-group\">\n                <label>å¯¾è±¡ã‚¢ãƒ—ãƒª</label>\n                <select id=\"editIncApp\">\n                    ${appOptions}\n                </select>\n            </div>\n            <div class=\"form-group\">\n                <label>å„ªå…ˆåº¦</label>\n                <select id=\"editIncPriority\">\n                    <option value=\"low\" ${inc.priority === 'low' ? 'selected' : ''}>ä½</option>\n                    <option value=\"medium\" ${inc.priority === 'medium' ? 'selected' : ''}>ä¸­</option>\n                    <option value=\"high\" ${inc.priority === 'high' ? 'selected' : ''}>é«˜</option>\n                </select>\n            </div>\n            <div class=\"form-group\">\n                <label>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</label>\n                <select id=\"editIncStatus\">\n                    <option value=\"open\" ${inc.status === 'open' ? 'selected' : ''}>ã‚ªãƒ¼ãƒ—ãƒ³</option>\n                    <option value=\"in_progress\" ${inc.status === 'in_progress' ? 'selected' : ''}>å¯¾å¿œä¸­</option>\n                    <option value=\"resolved\" ${inc.status === 'resolved' ? 'selected' : ''}>è§£æ±ºæ¸ˆ</option>\n                    <option value=\"closed\" ${inc.status === 'closed' ? 'selected' : ''}>ã‚¯ãƒ­ãƒ¼ã‚º</option>\n                </select>\n            </div>\n            <div class=\"form-group\">\n                <label>æ‹…å½“è€…</label>\n                <select id=\"editIncAssignee\">\n                    <option value=\"-\" ${inc.assignee === '-' ? 'selected' : ''}>æœªå‰²å½“</option>\n                    ${userOptions}\n                </select>\n            </div>\n            <div class=\"form-group\">\n                <label>èª¬æ˜</label>\n                <textarea id=\"editIncDesc\" rows=\"3\" style=\"width:100%;padding:10px;border:1px solid #e2e8f0;border-radius:8px;\">${inc.description || ''}</textarea>\n            </div>\n        `,\n            [\n                { text: 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«', class: 'btn-secondary', onclick: 'closeModal()' },\n                { text: 'ä¿å­˜', class: 'btn-primary', onclick: `IncidentModule.save('${id}')` },\n            ]\n        );\n    },\n\n    save(id) {\n        const inc = DataStore.incidents.find(i => i.id === id);\n        const appSelect = document.getElementById('editIncApp');\n        const selectedOption = appSelect.options[appSelect.selectedIndex];\n        const nextStatus = document.getElementById('editIncStatus').value;\n        const newAssignee = document.getElementById('editIncAssignee').value;\n\n        // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹é·ç§»æ¤œè¨¼ï¼ˆWorkflowEngineã¾ãŸã¯ãƒ­ãƒ¼ã‚«ãƒ«æ¤œè¨¼ï¼‰\n        if (typeof WorkflowEngine !== 'undefined') {\n            const result = WorkflowEngine.isValidIncidentTransition(inc.status, nextStatus);\n            if (!result.valid) {\n                showToast(result.message, 'error');\n                return;\n            }\n        } else if (!this.isValidStatusTransition(inc.status, nextStatus)) {\n            showToast('ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹é·ç§»ãƒ«ãƒ¼ãƒ«ã«é•åã—ã¦ã„ã¾ã™', 'error');\n            return;\n        }\n\n        // å¤‰æ›´å‰ã®å€¤ã‚’ä¿å­˜ï¼ˆé€šçŸ¥ç”¨ï¼‰\n        const oldStatus = inc.status;\n        const oldAssignee = inc.assignee;\n\n        // å€¤ã‚’æ›´æ–°\n        inc.title = document.getElementById('editIncTitle').value;\n        inc.appId = appSelect.value;\n        inc.appName = selectedOption.dataset.name;\n        inc.priority = document.getElementById('editIncPriority').value;\n        inc.status = nextStatus;\n        inc.assignee = newAssignee;\n        inc.description = document.getElementById('editIncDesc').value;\n        inc.updatedAt = new Date().toISOString();\n\n        this.refresh();\n        closeModal();\n        showToast('ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã‚’æ›´æ–°ã—ã¾ã—ãŸ', 'success');\n        LogModule.addLog('update', 'ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ', 'incident', 'ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆæ›´æ–°: ' + inc.title);\n        updateDashboard();\n\n        // é€šçŸ¥ãƒˆãƒªã‚¬ãƒ¼\n        if (typeof NotificationManager !== 'undefined') {\n            // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å¤‰æ›´é€šçŸ¥\n            if (oldStatus !== nextStatus) {\n                NotificationManager.notifyStatusChange(inc, 'incident', nextStatus);\n            }\n            // æ‹…å½“è€…å¤‰æ›´é€šçŸ¥\n            if (oldAssignee !== newAssignee && newAssignee !== '-') {\n                NotificationManager.notifyAssignment(inc);\n            }\n        }\n    },\n\n    delete(id) {\n        const inc = DataStore.incidents.find(i => i.id === id);\n        if (confirm(`ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã€Œ${inc.title}ã€ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ`)) {\n            const idx = DataStore.incidents.findIndex(i => i.id === id);\n            DataStore.incidents.splice(idx, 1);\n            this.refresh();\n            showToast('ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã‚’å‰Šé™¤ã—ã¾ã—ãŸ', 'success');\n            LogModule.addLog(\n                'delete',\n                'ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ',\n                'incident',\n                'ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå‰Šé™¤: ' + inc.title\n            );\n            updateDashboard();\n        }\n    },\n\n    filter() {\n        const search = document.getElementById('incidentSearch').value.toLowerCase();\n        const priority = document.getElementById('incidentPriorityFilter').value;\n        const status = document.getElementById('incidentStatusFilter').value;\n\n        let filtered = DataStore.incidents;\n\n        if (search) {\n            filtered = filtered.filter(\n                i =>\n                    i.title.toLowerCase().includes(search) ||\n                    (i.description || '').toLowerCase().includes(search)\n            );\n        }\n        if (priority) {\n            filtered = filtered.filter(i => i.priority === priority);\n        }\n        if (status) {\n            filtered = filtered.filter(i => i.status === status);\n        }\n\n        this.render(filtered);\n    },\n\n    isValidStatusTransition(currentStatus, nextStatus) {\n        if (currentStatus === nextStatus) {\n            return true;\n        }\n        const transitions = {\n            open: ['in_progress', 'closed'],\n            in_progress: ['resolved', 'open'],\n            resolved: ['closed', 'in_progress'],\n            closed: ['in_progress'],\n        };\n        return (transitions[currentStatus] || []).includes(nextStatus);\n    },\n};\n\n// ã‚·ã‚¹ãƒ†ãƒ è¨­å®šãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«\nconst SettingsModule = {\n    // è¨­å®šãƒ‡ãƒ¼ã‚¿ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤\n    defaults: {\n        api: {\n            url: '',\n            key: '',\n            authMethod: 'bearer',\n            timeout: 30,\n            syncInterval: 30,\n        },\n        general: {\n            systemName: 'AppSuite ç®¡ç†é‹ç”¨ã‚·ã‚¹ãƒ†ãƒ ',\n            orgName: '',\n            adminEmail: '',\n            theme: 'light',\n            language: 'ja',\n            dateFormat: 'yyyy-MM-dd',\n            pageSize: 25,\n        },\n        notification: {\n            incidentNew: true,\n            incidentHigh: true,\n            changeApproval: true,\n            changeComplete: false,\n            smtpHost: '',\n            smtpPort: 587,\n            smtpUser: '',\n            smtpPass: '',\n            smtpSsl: true,\n        },\n        security: {\n            pwMinLength: 8,\n            pwRequireUpper: true,\n            pwRequireNumber: true,\n            pwRequireSpecial: false,\n            pwExpireDays: 90,\n            sessionTimeout: 30,\n            maxSessions: 3,\n            enableTwoFactor: false,\n            maxLoginAttempts: 5,\n            lockoutDuration: 15,\n        },\n        workflow: {\n            incidentAutoAssign: false,\n            incidentDefaultAssignee: '',\n            incidentEscalation: 24,\n            changeRequireApproval: true,\n            changeApprover: 'manager',\n            changeLeadTime: 3,\n            allowSkipStatus: false,\n            requireComment: true,\n        },\n        backup: {\n            autoBackup: true,\n            backupInterval: 'daily',\n            backupRetention: 7,\n        },\n    },\n\n    // è¨­å®šèª­ã¿è¾¼ã¿\n    load() {\n        const saved = localStorage.getItem('appsuiteSettings');\n        return saved ? JSON.parse(saved) : this.defaults;\n    },\n\n    // è¨­å®šä¿å­˜\n    save(settings) {\n        localStorage.setItem('appsuiteSettings', JSON.stringify(settings));\n    },\n\n    // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆåˆæœŸåŒ–\n    initTabs() {\n        document.querySelectorAll('.settings-tab').forEach(tab => {\n            tab.addEventListener('click', () => {\n                // ã‚¿ãƒ–ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã‚’åˆ‡ã‚Šæ›¿ãˆ\n                document\n                    .querySelectorAll('.settings-tab')\n                    .forEach(t => t.classList.remove('active'));\n                tab.classList.add('active');\n\n                // ãƒ‘ãƒãƒ«ã®è¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆ\n                const tabName = tab.dataset.tab;\n                document\n                    .querySelectorAll('.settings-panel')\n                    .forEach(p => p.classList.remove('active'));\n                document.getElementById('panel-' + tabName).classList.add('active');\n            });\n        });\n    },\n\n    // ãƒ•ã‚©ãƒ¼ãƒ ã«è¨­å®šã‚’åæ˜ \n    loadToForm() {\n        const settings = this.load();\n\n        // APIè¨­å®š\n        document.getElementById('apiUrl').value = settings.api?.url || '';\n        document.getElementById('apiKey').value = settings.api?.key || '';\n        document.getElementById('authMethod').value = settings.api?.authMethod || 'bearer';\n        document.getElementById('timeout').value = settings.api?.timeout || 30;\n        document.getElementById('syncInterval').value = settings.api?.syncInterval || 30;\n\n        // åŸºæœ¬è¨­å®š\n        document.getElementById('systemName').value =\n            settings.general?.systemName || 'AppSuite ç®¡ç†é‹ç”¨ã‚·ã‚¹ãƒ†ãƒ ';\n        document.getElementById('orgName').value = settings.general?.orgName || '';\n        document.getElementById('adminEmail').value = settings.general?.adminEmail || '';\n        document.getElementById('themeSelect').value = settings.general?.theme || 'light';\n        document.getElementById('langSelect').value = settings.general?.language || 'ja';\n        document.getElementById('dateFormat').value = settings.general?.dateFormat || 'yyyy-MM-dd';\n        document.getElementById('pageSize').value = settings.general?.pageSize || 25;\n\n        // é€šçŸ¥è¨­å®š\n        document.getElementById('notifyIncidentNew').checked =\n            settings.notification?.incidentNew !== false;\n        document.getElementById('notifyIncidentHigh').checked =\n            settings.notification?.incidentHigh !== false;\n        document.getElementById('notifyChangeApproval').checked =\n            settings.notification?.changeApproval !== false;\n        document.getElementById('notifyChangeComplete').checked =\n            settings.notification?.changeComplete === true;\n        document.getElementById('smtpHost').value = settings.notification?.smtpHost || '';\n        document.getElementById('smtpPort').value = settings.notification?.smtpPort || 587;\n        document.getElementById('smtpUser').value = settings.notification?.smtpUser || '';\n        document.getElementById('smtpPass').value = settings.notification?.smtpPass || '';\n        document.getElementById('smtpSsl').checked = settings.notification?.smtpSsl !== false;\n\n        // ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š\n        document.getElementById('pwMinLength').value = settings.security?.pwMinLength || 8;\n        document.getElementById('pwRequireUpper').checked =\n            settings.security?.pwRequireUpper !== false;\n        document.getElementById('pwRequireNumber').checked =\n            settings.security?.pwRequireNumber !== false;\n        document.getElementById('pwRequireSpecial').checked =\n            settings.security?.pwRequireSpecial === true;\n        document.getElementById('pwExpireDays').value = settings.security?.pwExpireDays || 90;\n        document.getElementById('sessionTimeout').value = settings.security?.sessionTimeout || 30;\n        document.getElementById('maxSessions').value = settings.security?.maxSessions || 3;\n        document.getElementById('enableTwoFactor').checked =\n            settings.security?.enableTwoFactor === true;\n        document.getElementById('maxLoginAttempts').value =\n            settings.security?.maxLoginAttempts || 5;\n        document.getElementById('lockoutDuration').value = settings.security?.lockoutDuration || 15;\n\n        // ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è¨­å®š\n        document.getElementById('incidentAutoAssign').checked =\n            settings.workflow?.incidentAutoAssign === true;\n        document.getElementById('incidentDefaultAssignee').value =\n            settings.workflow?.incidentDefaultAssignee || '';\n        document.getElementById('incidentEscalation').value =\n            settings.workflow?.incidentEscalation || 24;\n        document.getElementById('changeRequireApproval').checked =\n            settings.workflow?.changeRequireApproval !== false;\n        document.getElementById('changeApprover').value =\n            settings.workflow?.changeApprover || 'manager';\n        document.getElementById('changeLeadTime').value = settings.workflow?.changeLeadTime || 3;\n        document.getElementById('allowSkipStatus').checked =\n            settings.workflow?.allowSkipStatus === true;\n        document.getElementById('requireComment').checked =\n            settings.workflow?.requireComment !== false;\n\n        // ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—è¨­å®šï¼ˆBackupManagerã¨é€£æºï¼‰\n        if (typeof BackupManager !== 'undefined') {\n            BackupManager.updateAutoBackupUI();\n        } else {\n            document.getElementById('autoBackup').checked = settings.backup?.autoBackup !== false;\n            document.getElementById('backupInterval').value =\n                settings.backup?.backupInterval || 'daily';\n            document.getElementById('backupRetention').value =\n                settings.backup?.backupRetention || 7;\n        }\n\n        // ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—çŠ¶æ…‹ã‚’æ›´æ–°\n        this.updateBackupStatus();\n    },\n\n    // APIè¨­å®šä¿å­˜\n    saveApi() {\n        const settings = this.load();\n        settings.api = {\n            url: document.getElementById('apiUrl').value,\n            key: document.getElementById('apiKey').value,\n            authMethod: document.getElementById('authMethod').value,\n            timeout: parseInt(document.getElementById('timeout').value),\n            syncInterval: parseInt(document.getElementById('syncInterval').value),\n        };\n        this.save(settings);\n        showToast('APIè¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸ', 'success');\n        LogModule.addLog('update', 'ã‚·ã‚¹ãƒ†ãƒ è¨­å®š', 'system', 'APIè¨­å®šã‚’æ›´æ–°');\n        if (window.ApiSync) {\n            ApiSync.applySettings();\n        }\n    },\n\n    // APIæ¥ç¶šãƒ†ã‚¹ãƒˆ\n    testApi() {\n        const url = document.getElementById('apiUrl').value;\n        if (!url) {\n            showToast('APIã®URLã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');\n            return;\n        }\n\n        showToast('æ¥ç¶šãƒ†ã‚¹ãƒˆä¸­...', 'info');\n        // ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆå®Ÿéš›ã®å®Ÿè£…ã§ã¯fetchã‚’ä½¿ç”¨ï¼‰\n        setTimeout(() => {\n            document.getElementById('apiStatus').textContent = 'æ¥ç¶šæˆåŠŸ';\n            document.getElementById('apiStatus').className = 'status-value badge badge-success';\n            document.getElementById('lastSync').textContent = new Date().toLocaleString('ja-JP');\n            document.getElementById('apiVersion').textContent = 'V7.5';\n            showToast('APIæ¥ç¶šã«æˆåŠŸã—ã¾ã—ãŸ', 'success');\n        }, 1500);\n    },\n\n    syncNow() {\n        if (window.ApiSync) {\n            ApiSync.syncAll();\n        }\n    },\n\n    // åŸºæœ¬è¨­å®šä¿å­˜\n    saveGeneral() {\n        const settings = this.load();\n        settings.general = {\n            systemName: document.getElementById('systemName').value,\n            orgName: document.getElementById('orgName').value,\n            adminEmail: document.getElementById('adminEmail').value,\n            theme: document.getElementById('themeSelect').value,\n            language: document.getElementById('langSelect').value,\n            dateFormat: document.getElementById('dateFormat').value,\n            pageSize: parseInt(document.getElementById('pageSize').value),\n        };\n        this.save(settings);\n\n        // ã‚·ã‚¹ãƒ†ãƒ åã‚’åæ˜ \n        document.querySelector('.sidebar-header h1').innerHTML =\n            '<i class=\"fas fa-cogs\"></i> ' + settings.general.systemName.substring(0, 15);\n\n        showToast('åŸºæœ¬è¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸ', 'success');\n        LogModule.addLog('update', 'ã‚·ã‚¹ãƒ†ãƒ è¨­å®š', 'system', 'åŸºæœ¬è¨­å®šã‚’æ›´æ–°');\n    },\n\n    // åŸºæœ¬è¨­å®šãƒªã‚»ãƒƒãƒˆ\n    resetGeneral() {\n        if (confirm('åŸºæœ¬è¨­å®šã‚’åˆæœŸå€¤ã«ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ')) {\n            const settings = this.load();\n            settings.general = this.defaults.general;\n            this.save(settings);\n            this.loadToForm();\n            showToast('åŸºæœ¬è¨­å®šã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸ', 'success');\n        }\n    },\n\n    // é€šçŸ¥è¨­å®šä¿å­˜\n    saveNotification() {\n        const settings = this.load();\n        settings.notification = {\n            incidentNew: document.getElementById('notifyIncidentNew').checked,\n            incidentHigh: document.getElementById('notifyIncidentHigh').checked,\n            changeApproval: document.getElementById('notifyChangeApproval').checked,\n            changeComplete: document.getElementById('notifyChangeComplete').checked,\n            smtpHost: document.getElementById('smtpHost').value,\n            smtpPort: parseInt(document.getElementById('smtpPort').value),\n            smtpUser: document.getElementById('smtpUser').value,\n            smtpPass: document.getElementById('smtpPass').value,\n            smtpSsl: document.getElementById('smtpSsl').checked,\n        };\n        this.save(settings);\n        showToast('é€šçŸ¥è¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸ', 'success');\n        LogModule.addLog('update', 'ã‚·ã‚¹ãƒ†ãƒ è¨­å®š', 'system', 'é€šçŸ¥è¨­å®šã‚’æ›´æ–°');\n    },\n\n    // ãƒ†ã‚¹ãƒˆãƒ¡ãƒ¼ãƒ«é€ä¿¡\n    testEmail() {\n        const host = document.getElementById('smtpHost').value;\n        if (!host) {\n            showToast('SMTPãƒ›ã‚¹ãƒˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');\n            return;\n        }\n        showToast('ãƒ†ã‚¹ãƒˆãƒ¡ãƒ¼ãƒ«ã‚’é€ä¿¡ä¸­...', 'info');\n        setTimeout(() => {\n            showToast('ãƒ†ã‚¹ãƒˆãƒ¡ãƒ¼ãƒ«ã‚’é€ä¿¡ã—ã¾ã—ãŸ', 'success');\n        }, 1500);\n    },\n\n    // ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šä¿å­˜\n    saveSecurity() {\n        const settings = this.load();\n        settings.security = {\n            pwMinLength: parseInt(document.getElementById('pwMinLength').value),\n            pwRequireUpper: document.getElementById('pwRequireUpper').checked,\n            pwRequireNumber: document.getElementById('pwRequireNumber').checked,\n            pwRequireSpecial: document.getElementById('pwRequireSpecial').checked,\n            pwExpireDays: parseInt(document.getElementById('pwExpireDays').value),\n            sessionTimeout: parseInt(document.getElementById('sessionTimeout').value),\n            maxSessions: parseInt(document.getElementById('maxSessions').value),\n            enableTwoFactor: document.getElementById('enableTwoFactor').checked,\n            maxLoginAttempts: parseInt(document.getElementById('maxLoginAttempts').value),\n            lockoutDuration: parseInt(document.getElementById('lockoutDuration').value),\n        };\n        this.save(settings);\n        showToast('ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸ', 'success');\n        LogModule.addLog('update', 'ã‚·ã‚¹ãƒ†ãƒ è¨­å®š', 'system', 'ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šã‚’æ›´æ–°');\n    },\n\n    // ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è¨­å®šä¿å­˜\n    saveWorkflow() {\n        const settings = this.load();\n        settings.workflow = {\n            incidentAutoAssign: document.getElementById('incidentAutoAssign').checked,\n            incidentDefaultAssignee: document.getElementById('incidentDefaultAssignee').value,\n            incidentEscalation: parseInt(document.getElementById('incidentEscalation').value),\n            changeRequireApproval: document.getElementById('changeRequireApproval').checked,\n            changeApprover: document.getElementById('changeApprover').value,\n            changeLeadTime: parseInt(document.getElementById('changeLeadTime').value),\n            allowSkipStatus: document.getElementById('allowSkipStatus').checked,\n            requireComment: document.getElementById('requireComment').checked,\n        };\n        this.save(settings);\n        showToast('ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸ', 'success');\n        LogModule.addLog('update', 'ã‚·ã‚¹ãƒ†ãƒ è¨­å®š', 'system', 'ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è¨­å®šã‚’æ›´æ–°');\n    },\n\n    // ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆ\n    createBackup() {\n        const data = {\n            version: '1.0.0',\n            timestamp: new Date().toISOString(),\n            settings: this.load(),\n            users: DataStore.users,\n            apps: DataStore.apps,\n            incidents: DataStore.incidents,\n            changes: DataStore.changes,\n            logs: DataStore.logs,\n        };\n\n        const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = 'appsuite_backup_' + new Date().toISOString().split('T')[0] + '.json';\n        a.click();\n\n        // ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å±¥æ­´ã‚’ä¿å­˜\n        const backups = JSON.parse(localStorage.getItem('backupHistory') || '[]');\n        backups.unshift({\n            date: new Date().toISOString(),\n            size: blob.size,\n        });\n        localStorage.setItem('backupHistory', JSON.stringify(backups.slice(0, 10)));\n\n        this.updateBackupStatus();\n        showToast('ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’ä½œæˆã—ã¾ã—ãŸ', 'success');\n        LogModule.addLog('export', 'ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—', 'system', 'ãƒ‡ãƒ¼ã‚¿ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’ä½œæˆ');\n    },\n\n    // ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—çŠ¶æ…‹æ›´æ–°\n    updateBackupStatus() {\n        const backups = JSON.parse(localStorage.getItem('backupHistory') || '[]');\n        document.getElementById('lastBackup').textContent =\n            backups.length > 0 ? new Date(backups[0].date).toLocaleString('ja-JP') : '-';\n        document.getElementById('backupCount').textContent = backups.length;\n\n        // ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚ºã‚’è¨ˆç®—\n        const dataSize = new Blob([\n            JSON.stringify({\n                settings: this.load(),\n                users: DataStore.users,\n                apps: DataStore.apps,\n                incidents: DataStore.incidents,\n                changes: DataStore.changes,\n                logs: DataStore.logs,\n            }),\n        ]).size;\n        document.getElementById('dataSize').textContent = this.formatBytes(dataSize);\n\n        // ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒªã‚¹ãƒˆè¡¨ç¤º\n        const listEl = document.getElementById('backupList');\n        if (backups.length > 0) {\n            listEl.innerHTML = backups\n                .slice(0, 5)\n                .map(\n                    b => `\n                <div class=\"backup-item\">\n                    <span>${new Date(b.date).toLocaleString('ja-JP')}${b.type === 'auto' ? ' <small>(è‡ªå‹•)</small>' : ''}</span>\n                    <span>${this.formatBytes(b.size)}</span>\n                </div>\n            `\n                )\n                .join('');\n        } else {\n            listEl.innerHTML = '<p class=\"text-muted\">ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¯ã‚ã‚Šã¾ã›ã‚“</p>';\n        }\n\n        // è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—çŠ¶æ…‹è¡¨ç¤º\n        const autoBackupStatusEl = document.getElementById('autoBackupStatus');\n        if (autoBackupStatusEl && typeof BackupManager !== 'undefined') {\n            const stats = BackupManager.getStatistics();\n            if (stats.autoBackupEnabled) {\n                autoBackupStatusEl.innerHTML = '<span class=\"badge badge-success\">æœ‰åŠ¹</span>';\n            } else {\n                autoBackupStatusEl.innerHTML = '<span class=\"badge badge-secondary\">ç„¡åŠ¹</span>';\n            }\n        }\n    },\n\n    // ãƒã‚¤ãƒˆæ•°ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ\n    formatBytes(bytes) {\n        if (bytes === 0) {\n            return '0 Bytes';\n        }\n        const k = 1024;\n        const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n        const i = Math.floor(Math.log(bytes) / Math.log(k));\n        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n    },\n\n    // ãƒªã‚¹ãƒˆã‚¢å®Ÿè¡Œ\n    restoreBackup() {\n        const fileInput = document.getElementById('restoreFile');\n        const file = fileInput.files[0];\n\n        if (!file) {\n            showToast('ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„', 'error');\n            return;\n        }\n\n        if (!confirm('ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿ã¯ä¸Šæ›¸ãã•ã‚Œã¾ã™ã€‚ãƒªã‚¹ãƒˆã‚¢ã‚’å®Ÿè¡Œã—ã¾ã™ã‹ï¼Ÿ')) {\n            return;\n        }\n\n        const reader = new FileReader();\n        reader.onload = e => {\n            try {\n                const data = JSON.parse(e.target.result);\n\n                // ãƒ‡ãƒ¼ã‚¿ã®å¾©å…ƒ\n                if (data.settings) {\n                    this.save(data.settings);\n                }\n                if (data.users) {\n                    DataStore.users = data.users;\n                }\n                if (data.apps) {\n                    DataStore.apps = data.apps;\n                }\n                if (data.incidents) {\n                    DataStore.incidents = data.incidents;\n                }\n                if (data.changes) {\n                    DataStore.changes = data.changes;\n                }\n                if (data.logs) {\n                    DataStore.logs = data.logs;\n                }\n\n                this.loadToForm();\n                refreshAllModules();\n                updateDashboard();\n\n                showToast('ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªã‚¹ãƒˆã‚¢ã—ã¾ã—ãŸ', 'success');\n                LogModule.addLog('update', 'ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—', 'system', 'ãƒ‡ãƒ¼ã‚¿ãƒªã‚¹ãƒˆã‚¢ã‚’å®Ÿè¡Œ');\n            } catch (error) {\n                showToast('ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ', 'error');\n            }\n        };\n        reader.readAsText(file);\n    },\n\n    // ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ\n    exportData() {\n        const data = {\n            exportDate: new Date().toISOString(),\n            users: DataStore.users,\n            apps: DataStore.apps,\n            incidents: DataStore.incidents,\n            changes: DataStore.changes,\n        };\n\n        const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = 'appsuite_data_' + new Date().toISOString().split('T')[0] + '.json';\n        a.click();\n\n        showToast('ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã—ãŸ', 'success');\n        LogModule.addLog('export', 'ãƒ‡ãƒ¼ã‚¿', 'system', 'ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã‚’å®Ÿè¡Œ');\n    },\n\n    // ãƒ‡ãƒ¼ã‚¿åˆæœŸåŒ–\n    clearData() {\n        if (!confirm('å…¨ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚’åˆæœŸåŒ–ã—ã¾ã™ã‹ï¼Ÿã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚')) {\n            return;\n        }\n        if (!confirm('æœ¬å½“ã«åˆæœŸåŒ–ã—ã¦ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ')) {\n            return;\n        }\n\n        localStorage.removeItem('appsuiteSettings');\n        localStorage.removeItem('backupHistory');\n        DataStore.users = [];\n        DataStore.apps = [];\n        DataStore.incidents = [];\n        DataStore.changes = [];\n        DataStore.logs = [];\n\n        this.loadToForm();\n        refreshAllModules();\n        updateDashboard();\n\n        showToast('ãƒ‡ãƒ¼ã‚¿ã‚’åˆæœŸåŒ–ã—ã¾ã—ãŸ', 'warning');\n    },\n};\n\n// å¤‰æ›´ç®¡ç†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«\nconst ChangeModule = {\n    refresh() {\n        this.render(DataStore.changes);\n    },\n\n    render(changes) {\n        const tbody = document.getElementById('changesTableBody');\n        tbody.innerHTML = changes\n            .map(\n                chg => `\n            <tr>\n                <td>${escapeHtml(chg.id)}</td>\n                <td>${escapeHtml(chg.title)}</td>\n                <td>${escapeHtml(chg.appName)}</td>\n                <td><span class=\"badge ${this.getTypeBadge(chg.type)}\">${this.getTypeText(chg.type)}</span></td>\n                <td><span class=\"badge ${this.getStatusBadge(chg.status)}\">${this.getStatusText(chg.status)}</span></td>\n                <td>${escapeHtml(chg.requester)}</td>\n                <td>${escapeHtml(chg.scheduled)}</td>\n                <td>\n                    <button class=\"action-btn view\" onclick=\"ChangeModule.view('${escapeHtml(chg.id)}')\" title=\"è©³ç´°\"><i class=\"fas fa-eye\"></i></button>\n                    <button class=\"action-btn edit\" onclick=\"ChangeModule.edit('${escapeHtml(chg.id)}')\" title=\"ç·¨é›†\"><i class=\"fas fa-edit\"></i></button>\n                    <button class=\"action-btn delete\" onclick=\"ChangeModule.delete('${escapeHtml(chg.id)}')\" title=\"å‰Šé™¤\"><i class=\"fas fa-trash\"></i></button>\n                </td>\n            </tr>\n        `\n            )\n            .join('');\n    },\n\n    getTypeBadge(type) {\n        const badges = {\n            feature: 'badge-success',\n            improvement: 'badge-info',\n            modification: 'badge-warning',\n            bugfix: 'badge-danger',\n        };\n        return badges[type] || 'badge-secondary';\n    },\n\n    getTypeText(type) {\n        const texts = {\n            feature: 'æ–°æ©Ÿèƒ½',\n            improvement: 'æ”¹å–„',\n            modification: 'å¤‰æ›´',\n            bugfix: 'ãƒã‚°ä¿®æ­£',\n        };\n        return texts[type] || type;\n    },\n\n    getStatusBadge(status) {\n        const badges = {\n            draft: 'badge-secondary',\n            pending: 'badge-warning',\n            approved: 'badge-info',\n            in_progress: 'badge-primary',\n            completed: 'badge-success',\n            rejected: 'badge-danger',\n        };\n        return badges[status] || 'badge-secondary';\n    },\n\n    getStatusText(status) {\n        const texts = {\n            draft: 'ä¸‹æ›¸ã',\n            pending: 'ç”³è«‹ä¸­',\n            approved: 'æ‰¿èªæ¸ˆ',\n            in_progress: 'å®Ÿæ–½ä¸­',\n            completed: 'å®Œäº†',\n            rejected: 'å´ä¸‹',\n        };\n        return texts[status] || status;\n    },\n\n    showAddModal() {\n        const appOptions = DataStore.apps\n            .map(a => `<option value=\"${a.id}\" data-name=\"${a.name}\">${a.name}</option>`)\n            .join('');\n\n        openModal(\n            'å¤‰æ›´è¦æ±‚ç™»éŒ²',\n            `\n            <div class=\"form-group\">\n                <label>ã‚¿ã‚¤ãƒˆãƒ«</label>\n                <input type=\"text\" id=\"newChgTitle\" required>\n            </div>\n            <div class=\"form-group\">\n                <label>å¯¾è±¡ã‚¢ãƒ—ãƒª</label>\n                <select id=\"newChgApp\">\n                    ${appOptions}\n                </select>\n            </div>\n            <div class=\"form-group\">\n                <label>å¤‰æ›´ç¨®åˆ¥</label>\n                <select id=\"newChgType\">\n                    <option value=\"feature\">æ–°æ©Ÿèƒ½</option>\n                    <option value=\"improvement\">æ”¹å–„</option>\n                    <option value=\"modification\">å¤‰æ›´</option>\n                    <option value=\"bugfix\">ãƒã‚°ä¿®æ­£</option>\n                </select>\n            </div>\n            <div class=\"form-group\">\n                <label>å®Ÿæ–½äºˆå®šæ—¥</label>\n                <input type=\"date\" id=\"newChgScheduled\">\n            </div>\n            <div class=\"form-group\">\n                <label>èª¬æ˜</label>\n                <textarea id=\"newChgDesc\" rows=\"3\" style=\"width:100%;padding:10px;border:1px solid #e2e8f0;border-radius:8px;\"></textarea>\n            </div>\n        `,\n            [\n                { text: 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«', class: 'btn-secondary', onclick: 'closeModal()' },\n                { text: 'ç™»éŒ²', class: 'btn-primary', onclick: 'ChangeModule.add()' },\n            ]\n        );\n    },\n\n    add() {\n        const appSelect = document.getElementById('newChgApp');\n        const selectedOption = appSelect.options[appSelect.selectedIndex];\n        const newChg = {\n            id: 'CHG' + String(DataStore.changes.length + 1).padStart(3, '0'),\n            title: document.getElementById('newChgTitle').value,\n            appId: appSelect.value,\n            appName: selectedOption.dataset.name,\n            type: document.getElementById('newChgType').value,\n            status: 'draft',\n            requester: document.getElementById('currentUser').textContent,\n            scheduled: document.getElementById('newChgScheduled').value || '-',\n            description: document.getElementById('newChgDesc').value,\n        };\n        DataStore.changes.push(newChg);\n        this.refresh();\n        closeModal();\n        showToast('å¤‰æ›´è¦æ±‚ã‚’ç™»éŒ²ã—ã¾ã—ãŸ', 'success');\n        LogModule.addLog('create', 'å¤‰æ›´è¦æ±‚', 'change', 'æ–°è¦å¤‰æ›´è¦æ±‚ç™»éŒ²: ' + newChg.title);\n        updateDashboard();\n    },\n\n    view(id) {\n        const chg = DataStore.changes.find(c => c.id === id);\n        openModal(\n            'å¤‰æ›´è¦æ±‚è©³ç´°: ' + chg.id,\n            `\n            <div style=\"line-height: 2;\">\n                <p><strong>å¤‰æ›´ID:</strong> ${chg.id}</p>\n                <p><strong>ã‚¿ã‚¤ãƒˆãƒ«:</strong> ${chg.title}</p>\n                <p><strong>å¯¾è±¡ã‚¢ãƒ—ãƒª:</strong> ${chg.appName}</p>\n                <p><strong>å¤‰æ›´ç¨®åˆ¥:</strong> <span class=\"badge ${this.getTypeBadge(chg.type)}\">${this.getTypeText(chg.type)}</span></p>\n                <p><strong>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:</strong> <span class=\"badge ${this.getStatusBadge(chg.status)}\">${this.getStatusText(chg.status)}</span></p>\n                <p><strong>ä¾é ¼è€…:</strong> ${chg.requester}</p>\n                <p><strong>å®Ÿæ–½äºˆå®šæ—¥:</strong> ${chg.scheduled}</p>\n                <p><strong>èª¬æ˜:</strong></p>\n                <p style=\"background:#f8fafc;padding:10px;border-radius:8px;\">${chg.description || 'ï¼ˆãªã—ï¼‰'}</p>\n            </div>\n        `,\n            [{ text: 'é–‰ã˜ã‚‹', class: 'btn-secondary', onclick: 'closeModal()' }]\n        );\n    },\n\n    edit(id) {\n        const chg = DataStore.changes.find(c => c.id === id);\n        const appOptions = DataStore.apps\n            .map(\n                a =>\n                    `<option value=\"${a.id}\" data-name=\"${a.name}\" ${a.id === chg.appId ? 'selected' : ''}>${a.name}</option>`\n            )\n            .join('');\n\n        openModal(\n            'å¤‰æ›´è¦æ±‚ç·¨é›†: ' + chg.id,\n            `\n            <div class=\"form-group\">\n                <label>ã‚¿ã‚¤ãƒˆãƒ«</label>\n                <input type=\"text\" id=\"editChgTitle\" value=\"${chg.title}\">\n            </div>\n            <div class=\"form-group\">\n                <label>å¯¾è±¡ã‚¢ãƒ—ãƒª</label>\n                <select id=\"editChgApp\">\n                    ${appOptions}\n                </select>\n            </div>\n            <div class=\"form-group\">\n                <label>å¤‰æ›´ç¨®åˆ¥</label>\n                <select id=\"editChgType\">\n                    <option value=\"feature\" ${chg.type === 'feature' ? 'selected' : ''}>æ–°æ©Ÿèƒ½</option>\n                    <option value=\"improvement\" ${chg.type === 'improvement' ? 'selected' : ''}>æ”¹å–„</option>\n                    <option value=\"modification\" ${chg.type === 'modification' ? 'selected' : ''}>å¤‰æ›´</option>\n                    <option value=\"bugfix\" ${chg.type === 'bugfix' ? 'selected' : ''}>ãƒã‚°ä¿®æ­£</option>\n                </select>\n            </div>\n            <div class=\"form-group\">\n                <label>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</label>\n                <select id=\"editChgStatus\">\n                    <option value=\"draft\" ${chg.status === 'draft' ? 'selected' : ''}>ä¸‹æ›¸ã</option>\n                    <option value=\"pending\" ${chg.status === 'pending' ? 'selected' : ''}>ç”³è«‹ä¸­</option>\n                    <option value=\"approved\" ${chg.status === 'approved' ? 'selected' : ''}>æ‰¿èªæ¸ˆ</option>\n                    <option value=\"in_progress\" ${chg.status === 'in_progress' ? 'selected' : ''}>å®Ÿæ–½ä¸­</option>\n                    <option value=\"completed\" ${chg.status === 'completed' ? 'selected' : ''}>å®Œäº†</option>\n                    <option value=\"rejected\" ${chg.status === 'rejected' ? 'selected' : ''}>å´ä¸‹</option>\n                </select>\n            </div>\n            <div class=\"form-group\">\n                <label>å®Ÿæ–½äºˆå®šæ—¥</label>\n                <input type=\"date\" id=\"editChgScheduled\" value=\"${chg.scheduled !== '-' ? chg.scheduled : ''}\">\n            </div>\n            <div class=\"form-group\">\n                <label>èª¬æ˜</label>\n                <textarea id=\"editChgDesc\" rows=\"3\" style=\"width:100%;padding:10px;border:1px solid #e2e8f0;border-radius:8px;\">${chg.description || ''}</textarea>\n            </div>\n        `,\n            [\n                { text: 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«', class: 'btn-secondary', onclick: 'closeModal()' },\n                { text: 'ä¿å­˜', class: 'btn-primary', onclick: `ChangeModule.save('${id}')` },\n            ]\n        );\n    },\n\n    save(id) {\n        const chg = DataStore.changes.find(c => c.id === id);\n        const appSelect = document.getElementById('editChgApp');\n        const selectedOption = appSelect.options[appSelect.selectedIndex];\n        const nextStatus = document.getElementById('editChgStatus').value;\n\n        // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹é·ç§»æ¤œè¨¼ï¼ˆWorkflowEngineãŒåˆ©ç”¨å¯èƒ½ãªå ´åˆï¼‰\n        if (typeof WorkflowEngine !== 'undefined') {\n            const result = WorkflowEngine.isValidChangeTransition(chg.status, nextStatus);\n            if (!result.valid) {\n                showToast(result.message, 'error');\n                return;\n            }\n        }\n\n        // å¤‰æ›´å‰ã®å€¤ã‚’ä¿å­˜ï¼ˆé€šçŸ¥ç”¨ï¼‰\n        const oldStatus = chg.status;\n\n        // å€¤ã‚’æ›´æ–°\n        chg.title = document.getElementById('editChgTitle').value;\n        chg.appId = appSelect.value;\n        chg.appName = selectedOption.dataset.name;\n        chg.type = document.getElementById('editChgType').value;\n        chg.status = nextStatus;\n        chg.scheduled = document.getElementById('editChgScheduled').value || '-';\n        chg.description = document.getElementById('editChgDesc').value;\n        chg.updatedAt = new Date().toISOString();\n\n        this.refresh();\n        closeModal();\n        showToast('å¤‰æ›´è¦æ±‚ã‚’æ›´æ–°ã—ã¾ã—ãŸ', 'success');\n        LogModule.addLog('update', 'å¤‰æ›´è¦æ±‚', 'change', 'å¤‰æ›´è¦æ±‚æ›´æ–°: ' + chg.title);\n        updateDashboard();\n\n        // é€šçŸ¥ãƒˆãƒªã‚¬ãƒ¼\n        if (typeof NotificationManager !== 'undefined' && oldStatus !== nextStatus) {\n            // æ‰¿èªå¾…ã¡ã«ãªã£ãŸå ´åˆ\n            if (nextStatus === 'pending') {\n                NotificationManager.notifyChangeApproval(chg);\n            }\n            // æ‰¿èªã¾ãŸã¯å´ä¸‹ã•ã‚ŒãŸå ´åˆ\n            if (nextStatus === 'approved' || nextStatus === 'rejected') {\n                NotificationManager.notifyChangeDecision(chg, nextStatus);\n            }\n            // ãã®ä»–ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å¤‰æ›´\n            NotificationManager.notifyStatusChange(chg, 'change', nextStatus);\n        }\n    },\n\n    delete(id) {\n        const chg = DataStore.changes.find(c => c.id === id);\n        if (confirm(`å¤‰æ›´è¦æ±‚ã€Œ${chg.title}ã€ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ`)) {\n            const idx = DataStore.changes.findIndex(c => c.id === id);\n            DataStore.changes.splice(idx, 1);\n            this.refresh();\n            showToast('å¤‰æ›´è¦æ±‚ã‚’å‰Šé™¤ã—ã¾ã—ãŸ', 'success');\n            LogModule.addLog('delete', 'å¤‰æ›´è¦æ±‚', 'change', 'å¤‰æ›´è¦æ±‚å‰Šé™¤: ' + chg.title);\n            updateDashboard();\n        }\n    },\n\n    filter() {\n        const search = document.getElementById('changeSearch').value.toLowerCase();\n        const type = document.getElementById('changeTypeFilter').value;\n        const status = document.getElementById('changeStatusFilter').value;\n\n        let filtered = DataStore.changes;\n\n        if (search) {\n            filtered = filtered.filter(\n                c =>\n                    c.title.toLowerCase().includes(search) ||\n                    (c.description || '').toLowerCase().includes(search)\n            );\n        }\n        if (type) {\n            filtered = filtered.filter(c => c.type === type);\n        }\n        if (status) {\n            filtered = filtered.filter(c => c.status === status);\n        }\n\n        this.render(filtered);\n    },\n};\n\n// Export modules to global scope for inline onclick handlers and testing\nwindow.UserModule = UserModule;\nwindow.AppModule = AppModule;\nwindow.IncidentModule = IncidentModule;\nwindow.ChangeModule = ChangeModule;\nwindow.LogModule = LogModule;\nwindow.SettingsModule = SettingsModule;\n","usedDeprecatedRules":[{"ruleId":"semi","replacedBy":["@stylistic/semi"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"semi","url":"https://eslint.style/rules/semi"}}]}},{"ruleId":"quotes","replacedBy":["@stylistic/quotes"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"quotes","url":"https://eslint.style/rules/quotes"}}]}},{"ruleId":"indent","replacedBy":["@stylistic/indent"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"indent","url":"https://eslint.style/rules/indent"}}]}}]},{"filePath":"/home/runner/work/Appsuite-ITSM-Management/Appsuite-ITSM-Management/WebUI-Production/js/notification.js","messages":[{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 12.","line":203,"column":1,"messageId":"wrongIndentation","endLine":203,"endColumn":13,"fix":{"range":[5375,5387],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 12.","line":204,"column":1,"messageId":"wrongIndentation","endLine":204,"endColumn":13,"fix":{"range":[5409,5421],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 12.","line":205,"column":1,"messageId":"wrongIndentation","endLine":205,"endColumn":13,"fix":{"range":[5443,5455],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 16.","line":206,"column":1,"messageId":"wrongIndentation","endLine":206,"endColumn":17,"fix":{"range":[5474,5490],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 12.","line":207,"column":1,"messageId":"wrongIndentation","endLine":207,"endColumn":13,"fix":{"range":[5506,5518],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 16.","line":208,"column":1,"messageId":"wrongIndentation","endLine":208,"endColumn":17,"fix":{"range":[5538,5554],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 12.","line":209,"column":1,"messageId":"wrongIndentation","endLine":209,"endColumn":13,"fix":{"range":[5572,5584],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 12.","line":210,"column":1,"messageId":"wrongIndentation","endLine":210,"endColumn":13,"fix":{"range":[5608,5620],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 16.","line":211,"column":1,"messageId":"wrongIndentation","endLine":211,"endColumn":17,"fix":{"range":[5646,5662],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 12.","line":212,"column":1,"messageId":"wrongIndentation","endLine":212,"endColumn":13,"fix":{"range":[5680,5692],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 16.","line":213,"column":1,"messageId":"wrongIndentation","endLine":213,"endColumn":17,"fix":{"range":[5701,5717],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 20.","line":530,"column":1,"messageId":"wrongIndentation","endLine":530,"endColumn":21,"fix":{"range":[14178,14198],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 24.","line":531,"column":1,"messageId":"wrongIndentation","endLine":531,"endColumn":25,"fix":{"range":[14225,14249],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 24.","line":532,"column":1,"messageId":"wrongIndentation","endLine":532,"endColumn":25,"fix":{"range":[14296,14320],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 0 spaces but found 16.","line":533,"column":1,"messageId":"wrongIndentation","endLine":533,"endColumn":17,"fix":{"range":[14386,14402],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 20.","line":537,"column":1,"messageId":"wrongIndentation","endLine":537,"endColumn":21,"fix":{"range":[14494,14514],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 24.","line":538,"column":1,"messageId":"wrongIndentation","endLine":538,"endColumn":25,"fix":{"range":[14544,14568],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 24.","line":541,"column":1,"messageId":"wrongIndentation","endLine":541,"endColumn":25,"fix":{"range":[14760,14784],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 0 spaces but found 16.","line":542,"column":1,"messageId":"wrongIndentation","endLine":542,"endColumn":17,"fix":{"range":[14862,14878],"text":""}}],"suppressedMessages":[],"errorCount":19,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":19,"fixableWarningCount":0,"source":"/**\n * NotificationManager - é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ \n *\n * ãƒ–ãƒ©ã‚¦ã‚¶é€šçŸ¥APIçµ±åˆã€é€šçŸ¥å±¥æ­´ç®¡ç†ã€UIãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’æ‹…å½“\n *\n * @version 1.0.0\n * @since Sprint 3\n */\n\nconst NotificationManager = {\n    // ========================================\n    // è¨­å®šå®šæ•°\n    // ========================================\n\n    /** é€šçŸ¥å±¥æ­´ã®localStorageã‚­ãƒ¼ */\n    STORAGE_KEY: 'appsuite_notifications',\n\n    /** é€šçŸ¥å±¥æ­´ã®æœ€å¤§ä¿æŒæ•° */\n    MAX_HISTORY: 100,\n\n    /** é€šçŸ¥ãƒ‘ãƒãƒ«ãŒé–‹ã„ã¦ã„ã‚‹ã‹ */\n    isPanelOpen: false,\n\n    /** ãƒ–ãƒ©ã‚¦ã‚¶é€šçŸ¥ã®è¨±å¯çŠ¶æ…‹ */\n    permission: null,\n\n    /** é€šçŸ¥å±¥æ­´ */\n    history: [],\n\n    /** åˆæœŸåŒ–æ¸ˆã¿ãƒ•ãƒ©ã‚° */\n    initialized: false,\n\n    /** æœ€å¾Œã®é€šçŸ¥IDï¼ˆé‡è¤‡é˜²æ­¢ç”¨ï¼‰ */\n    lastNotificationIds: new Set(),\n\n    // ========================================\n    // åˆæœŸåŒ–ãƒ»ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—\n    // ========================================\n\n    /**\n     * é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ ã‚’åˆæœŸåŒ–\n     */\n    init() {\n        if (this.initialized) {\n            console.warn('NotificationManager: æ—¢ã«åˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã™');\n            return;\n        }\n\n        console.log('NotificationManager: åˆæœŸåŒ–é–‹å§‹');\n\n        // å±¥æ­´ã‚’èª­ã¿è¾¼ã¿\n        this.loadHistory();\n\n        // ãƒ–ãƒ©ã‚¦ã‚¶é€šçŸ¥ã®ã‚µãƒãƒ¼ãƒˆç¢ºèª\n        if ('Notification' in window) {\n            this.permission = Notification.permission;\n        } else {\n            this.permission = 'unsupported';\n        }\n\n        // é€šçŸ¥ãƒ™ãƒ«ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°\n        this.renderNotificationBell();\n\n        this.initialized = true;\n        console.log('NotificationManager: åˆæœŸåŒ–å®Œäº†ï¼ˆæ¨©é™: ' + this.permission + 'ï¼‰');\n    },\n\n    /**\n     * ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å‡¦ç†\n     */\n    cleanup() {\n        this.saveHistory();\n        this.initialized = false;\n        console.log('NotificationManager: ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å®Œäº†');\n    },\n\n    // ========================================\n    // æ¨©é™ç®¡ç†\n    // ========================================\n\n    /**\n     * ãƒ–ãƒ©ã‚¦ã‚¶é€šçŸ¥ã®è¨±å¯ã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆ\n     * @returns {Promise<string>} è¨±å¯çŠ¶æ…‹\n     */\n    async requestPermission() {\n        if (!('Notification' in window)) {\n            if (typeof showToast === 'function') {\n                showToast('ã“ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—é€šçŸ¥ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“', 'warning');\n            }\n            return 'unsupported';\n        }\n\n        try {\n            const result = await Notification.requestPermission();\n            this.permission = result;\n\n            if (typeof showToast === 'function') {\n                if (result === 'granted') {\n                    showToast('ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—é€šçŸ¥ãŒæœ‰åŠ¹ã«ãªã‚Šã¾ã—ãŸ', 'success');\n                } else if (result === 'denied') {\n                    showToast('é€šçŸ¥ãŒæ‹’å¦ã•ã‚Œã¾ã—ãŸã€‚ãƒ–ãƒ©ã‚¦ã‚¶ã®è¨­å®šã‹ã‚‰å¤‰æ›´ã§ãã¾ã™ã€‚', 'warning');\n                }\n            }\n\n            return result;\n        } catch (error) {\n            console.error('NotificationManager: æ¨©é™ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼', error);\n            return 'error';\n        }\n    },\n\n    // ========================================\n    // é€šçŸ¥é€ä¿¡\n    // ========================================\n\n    /**\n     * é€šçŸ¥ã‚’é€ä¿¡ï¼ˆæ±ç”¨ï¼‰\n     * @param {Object} options - é€šçŸ¥ã‚ªãƒ—ã‚·ãƒ§ãƒ³\n     * @param {string} options.title - ã‚¿ã‚¤ãƒˆãƒ«\n     * @param {string} options.body - æœ¬æ–‡\n     * @param {string} options.type - é€šçŸ¥ã‚¿ã‚¤ãƒ—\n     * @param {string} [options.icon] - ã‚¢ã‚¤ã‚³ãƒ³URL\n     * @param {Object} [options.data] - è¿½åŠ ãƒ‡ãƒ¼ã‚¿\n     * @param {boolean} [options.silent=false] - Toastã‚’è¡¨ç¤ºã—ãªã„\n     */\n    send(options) {\n        const { title, body, type, icon, data, silent = false } = options;\n\n        // è¨­å®šãƒã‚§ãƒƒã‚¯\n        if (!this.isEnabled(type)) {\n            return;\n        }\n\n        // é‡è¤‡ãƒã‚§ãƒƒã‚¯ï¼ˆåŒã˜IDã®é€šçŸ¥ã‚’çŸ­æ™‚é–“ã§ç¹°ã‚Šè¿”ã•ãªã„ï¼‰\n        const notificationKey = `${type}_${data?.id || ''}_${Math.floor(Date.now() / 60000)}`;\n        if (this.lastNotificationIds.has(notificationKey)) {\n            return;\n        }\n        this.lastNotificationIds.add(notificationKey);\n\n        // å¤ã„ã‚­ãƒ¼ã‚’å‰Šé™¤ï¼ˆæœ€å¤§50ä»¶ä¿æŒï¼‰\n        if (this.lastNotificationIds.size > 50) {\n            const iterator = this.lastNotificationIds.values();\n            this.lastNotificationIds.delete(iterator.next().value);\n        }\n\n        // é€šçŸ¥ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ\n        const notification = {\n            id: this.generateId(),\n            title,\n            body,\n            type,\n            data: data || {},\n            timestamp: new Date().toISOString(),\n            read: false,\n        };\n\n        // å±¥æ­´ã«è¿½åŠ \n        this.addToHistory(notification);\n\n        // ãƒ–ãƒ©ã‚¦ã‚¶é€šçŸ¥ã‚’é€ä¿¡\n        if (this.permission === 'granted') {\n            try {\n                const browserNotif = new Notification(title, {\n                    body,\n                    icon: icon || '/favicon.ico',\n                    tag: notification.id,\n                    requireInteraction: type === 'high_priority' || type === 'sla_violation',\n                });\n\n                browserNotif.onclick = () => {\n                    window.focus();\n                    if (data?.section && typeof showSection === 'function') {\n                        showSection(data.section);\n                    }\n                    browserNotif.close();\n                };\n\n                // è‡ªå‹•ã‚¯ãƒ­ãƒ¼ã‚ºï¼ˆ5ç§’å¾Œï¼‰\n                setTimeout(() => browserNotif.close(), 5000);\n            } catch (error) {\n                console.error('NotificationManager: ãƒ–ãƒ©ã‚¦ã‚¶é€šçŸ¥é€ä¿¡ã‚¨ãƒ©ãƒ¼', error);\n            }\n        }\n\n        // Toastè¡¨ç¤º\n        if (!silent && typeof showToast === 'function') {\n            const toastType = this.getToastType(type);\n            showToast(body, toastType, 5000);\n        }\n\n        // UIæ›´æ–°\n        this.renderNotificationBell();\n    },\n\n    /**\n     * é€šçŸ¥ã‚¿ã‚¤ãƒ—ã‹ã‚‰Toastã‚¿ã‚¤ãƒ—ã‚’å–å¾—\n     * @param {string} type - é€šçŸ¥ã‚¿ã‚¤ãƒ—\n     * @returns {string} Toastã‚¿ã‚¤ãƒ—\n     */\n    getToastType(type) {\n        switch (type) {\n            case 'sla_violation':\n            case 'high_priority':\n            case 'escalation':\n                return 'error';\n            case 'sla_warning':\n                return 'warning';\n            case 'change_approved':\n            case 'incident_resolved':\n                return 'success';\n            default:\n                return 'info';\n        }\n    },\n\n    // ========================================\n    // é€šçŸ¥ãƒˆãƒªã‚¬ãƒ¼\n    // ========================================\n\n    /**\n     * æ–°è¦ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆé€šçŸ¥\n     * @param {Object} incident - ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ\n     */\n    notifyIncidentCreated(incident) {\n        this.send({\n            title: 'æ–°è¦ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ',\n            body: `${incident.id}: ${incident.title}`,\n            type: 'incident_new',\n            data: { section: 'incidents', id: incident.id },\n        });\n    },\n\n    /**\n     * é«˜å„ªå…ˆåº¦ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆé€šçŸ¥\n     * @param {Object} incident - ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ\n     */\n    notifyHighPriorityIncident(incident) {\n        this.send({\n            title: 'ç·Šæ€¥: é«˜å„ªå…ˆåº¦ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ',\n            body: `${incident.id}: ${incident.title}`,\n            type: 'high_priority',\n            data: { section: 'incidents', id: incident.id },\n        });\n    },\n\n    /**\n     * æ‹…å½“è€…å‰²å½“é€šçŸ¥\n     * @param {Object} incident - ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ\n     */\n    notifyAssignment(incident) {\n        this.send({\n            title: 'ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå‰²å½“',\n            body: `${incident.id} ãŒ ${incident.assignee} ã«å‰²ã‚Šå½“ã¦ã‚‰ã‚Œã¾ã—ãŸ`,\n            type: 'assignment',\n            data: { section: 'incidents', id: incident.id },\n        });\n    },\n\n    /**\n     * ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å¤‰æ›´é€šçŸ¥\n     * @param {Object} item - ã‚¢ã‚¤ãƒ†ãƒ ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ\n     * @param {string} type - 'incident' ã¾ãŸã¯ 'change'\n     * @param {string} newStatus - æ–°ã—ã„ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹\n     */\n    notifyStatusChange(item, type, newStatus) {\n        const typeLabel = type === 'incident' ? 'ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ' : 'å¤‰æ›´è¦æ±‚';\n        const statusLabel = this.getStatusLabel(type, newStatus);\n\n        this.send({\n            title: `${typeLabel}ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°`,\n            body: `${item.id}: ${statusLabel}`,\n            type: `${type}_status_change`,\n            data: { section: type === 'incident' ? 'incidents' : 'changes', id: item.id },\n        });\n    },\n\n    /**\n     * SLAè­¦å‘Šé€šçŸ¥\n     * @param {Array} incidents - è­¦å‘Šå¯¾è±¡ã®ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆé…åˆ—\n     */\n    notifySlaWarning(incidents) {\n        if (incidents.length === 0) {\n            return;\n        }\n\n        this.send({\n            title: 'SLAè­¦å‘Š',\n            body: `${incidents.length}ä»¶ã®ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆãŒSLAæœŸé™ã«è¿‘ã¥ã„ã¦ã„ã¾ã™`,\n            type: 'sla_warning',\n            data: { section: 'incidents', ids: incidents.map(i => i.id) },\n        });\n    },\n\n    /**\n     * SLAé•åé€šçŸ¥\n     * @param {Array} incidents - é•åã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆé…åˆ—\n     */\n    notifySlaViolation(incidents) {\n        if (incidents.length === 0) {\n            return;\n        }\n\n        this.send({\n            title: 'SLAé•å',\n            body: `${incidents.length}ä»¶ã®ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆãŒSLAã‚’è¶…éã—ã¦ã„ã¾ã™`,\n            type: 'sla_violation',\n            data: { section: 'incidents', ids: incidents.map(i => i.id) },\n        });\n    },\n\n    /**\n     * å¤‰æ›´è¦æ±‚æ‰¿èªä¾é ¼é€šçŸ¥\n     * @param {Object} change - å¤‰æ›´è¦æ±‚ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ\n     */\n    notifyChangeApproval(change) {\n        this.send({\n            title: 'æ‰¿èªä¾é ¼',\n            body: `${change.id}: ${change.title} ã®æ‰¿èªãŒå¿…è¦ã§ã™`,\n            type: 'change_approval',\n            data: { section: 'changes', id: change.id },\n        });\n    },\n\n    /**\n     * å¤‰æ›´è¦æ±‚æ‰¿èªå®Œäº†é€šçŸ¥\n     * @param {Object} change - å¤‰æ›´è¦æ±‚ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ\n     * @param {string} decision - 'approved' ã¾ãŸã¯ 'rejected'\n     */\n    notifyChangeDecision(change, decision) {\n        const isApproved = decision === 'approved';\n\n        this.send({\n            title: isApproved ? 'å¤‰æ›´è¦æ±‚æ‰¿èª' : 'å¤‰æ›´è¦æ±‚å´ä¸‹',\n            body: `${change.id}: ${change.title}`,\n            type: isApproved ? 'change_approved' : 'change_rejected',\n            data: { section: 'changes', id: change.id },\n        });\n    },\n\n    /**\n     * ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³é€šçŸ¥\n     * @param {Object} incident - ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ\n     */\n    notifyEscalation(incident) {\n        this.send({\n            title: 'ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³',\n            body: `${incident.id}: ${incident.title} ãŒã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ãƒˆã•ã‚Œã¾ã—ãŸ`,\n            type: 'escalation',\n            data: { section: 'incidents', id: incident.id },\n        });\n    },\n\n    // ========================================\n    // å±¥æ­´ç®¡ç†\n    // ========================================\n\n    /**\n     * å±¥æ­´ã‚’èª­ã¿è¾¼ã¿\n     */\n    loadHistory() {\n        try {\n            const saved = localStorage.getItem(this.STORAGE_KEY);\n            this.history = saved ? JSON.parse(saved) : [];\n        } catch (error) {\n            console.error('NotificationManager: å±¥æ­´èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼', error);\n            this.history = [];\n        }\n    },\n\n    /**\n     * å±¥æ­´ã‚’ä¿å­˜\n     */\n    saveHistory() {\n        try {\n            localStorage.setItem(this.STORAGE_KEY, JSON.stringify(this.history));\n        } catch (error) {\n            console.error('NotificationManager: å±¥æ­´ä¿å­˜ã‚¨ãƒ©ãƒ¼', error);\n        }\n    },\n\n    /**\n     * å±¥æ­´ã«è¿½åŠ \n     * @param {Object} notification - é€šçŸ¥ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ\n     */\n    addToHistory(notification) {\n        this.history.unshift(notification);\n\n        // ä¸Šé™ã‚’è¶…ãˆãŸã‚‰å¤ã„ã‚‚ã®ã‚’å‰Šé™¤\n        if (this.history.length > this.MAX_HISTORY) {\n            this.history = this.history.slice(0, this.MAX_HISTORY);\n        }\n\n        this.saveHistory();\n    },\n\n    /**\n     * å±¥æ­´ã‚’å–å¾—\n     * @param {Object} [filter] - ãƒ•ã‚£ãƒ«ã‚¿æ¡ä»¶\n     * @returns {Array} é€šçŸ¥å±¥æ­´\n     */\n    getHistory(filter = {}) {\n        let result = [...this.history];\n\n        if (filter.type) {\n            result = result.filter(n => n.type === filter.type);\n        }\n\n        if (filter.unreadOnly) {\n            result = result.filter(n => !n.read);\n        }\n\n        if (filter.limit) {\n            result = result.slice(0, filter.limit);\n        }\n\n        return result;\n    },\n\n    /**\n     * å±¥æ­´ã‚’ã‚¯ãƒªã‚¢\n     */\n    clearHistory() {\n        this.history = [];\n        this.saveHistory();\n        this.renderNotificationBell();\n\n        if (typeof showToast === 'function') {\n            showToast('é€šçŸ¥å±¥æ­´ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸ', 'success');\n        }\n    },\n\n    /**\n     * é€šçŸ¥ã‚’æ—¢èª­ã«ã™ã‚‹\n     * @param {string} id - é€šçŸ¥ID\n     */\n    markAsRead(id) {\n        const notification = this.history.find(n => n.id === id);\n        if (notification) {\n            notification.read = true;\n            this.saveHistory();\n            this.renderNotificationBell();\n        }\n    },\n\n    /**\n     * ã™ã¹ã¦ã®é€šçŸ¥ã‚’æ—¢èª­ã«ã™ã‚‹\n     */\n    markAllAsRead() {\n        this.history.forEach(n => (n.read = true));\n        this.saveHistory();\n        this.renderNotificationBell();\n    },\n\n    /**\n     * æœªèª­æ•°ã‚’å–å¾—\n     * @returns {number} æœªèª­æ•°\n     */\n    getUnreadCount() {\n        return this.history.filter(n => !n.read).length;\n    },\n\n    // ========================================\n    // UI\n    // ========================================\n\n    /**\n     * é€šçŸ¥ãƒ™ãƒ«ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°\n     */\n    renderNotificationBell() {\n        const bellElement = document.getElementById('notificationBell');\n        if (!bellElement) {\n            return;\n        }\n\n        const unread = this.getUnreadCount();\n        let badge = bellElement.querySelector('.notification-badge');\n\n        if (!badge) {\n            badge = document.createElement('span');\n            badge.className = 'notification-badge';\n            bellElement.appendChild(badge);\n        }\n\n        badge.textContent = unread > 99 ? '99+' : unread;\n        badge.style.display = unread > 0 ? 'flex' : 'none';\n    },\n\n    /**\n     * é€šçŸ¥ãƒ‘ãƒãƒ«ã‚’é–‹ã\n     */\n    openNotificationPanel() {\n        // æ—¢å­˜ã®ãƒ‘ãƒãƒ«ãŒã‚ã‚Œã°å‰Šé™¤\n        const existingPanel = document.getElementById('notificationPanel');\n        if (existingPanel) {\n            existingPanel.remove();\n            this.isPanelOpen = false;\n            return;\n        }\n\n        // æ¨©é™ãŒãªã„å ´åˆã¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆ\n        if (this.permission === 'default') {\n            this.requestPermission();\n        }\n\n        // ãƒ‘ãƒãƒ«ã‚’ä½œæˆ\n        const panel = document.createElement('div');\n        panel.id = 'notificationPanel';\n        panel.className = 'notification-panel';\n\n        const notifications = this.getHistory({ limit: 20 });\n\n        panel.innerHTML = `\n            <div class=\"notification-panel-header\">\n                <h3>é€šçŸ¥</h3>\n                <div class=\"notification-panel-actions\">\n                    <button class=\"btn btn-sm\" onclick=\"NotificationManager.markAllAsRead()\">\n                        <i class=\"fas fa-check-double\"></i> ã™ã¹ã¦æ—¢èª­\n                    </button>\n                    <button class=\"btn btn-sm\" onclick=\"NotificationManager.clearHistory()\">\n                        <i class=\"fas fa-trash\"></i>\n                    </button>\n                    <button class=\"btn btn-sm\" onclick=\"NotificationManager.closeNotificationPanel()\">\n                        <i class=\"fas fa-times\"></i>\n                    </button>\n                </div>\n            </div>\n            <div class=\"notification-panel-body\">\n                ${\n                    notifications.length === 0\n                        ? '<p class=\"notification-empty\">é€šçŸ¥ã¯ã‚ã‚Šã¾ã›ã‚“</p>'\n                        : notifications.map(n => this.renderNotificationItem(n)).join('')\n                }\n            </div>\n            <div class=\"notification-panel-footer\">\n                ${\n                    this.permission !== 'granted'\n                        ? `<button class=\"btn btn-primary btn-sm\" onclick=\"NotificationManager.requestPermission()\">\n                        <i class=\"fas fa-bell\"></i> ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—é€šçŸ¥ã‚’æœ‰åŠ¹åŒ–\n                       </button>`\n                        : '<span class=\"text-muted\"><i class=\"fas fa-check\"></i> ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—é€šçŸ¥: æœ‰åŠ¹</span>'\n                }\n            </div>\n        `;\n\n        // ãƒ™ãƒ«ãƒœã‚¿ãƒ³ã®ä½ç½®ã‚’åŸºæº–ã«ãƒ‘ãƒãƒ«ã‚’é…ç½®\n        const bellElement = document.getElementById('notificationBell');\n        if (bellElement) {\n            const rect = bellElement.getBoundingClientRect();\n            panel.style.position = 'fixed';\n            panel.style.top = rect.bottom + 10 + 'px';\n            panel.style.right = '20px';\n        }\n\n        document.body.appendChild(panel);\n        this.isPanelOpen = true;\n\n        // ãƒ‘ãƒãƒ«å¤–ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹\n        setTimeout(() => {\n            document.addEventListener('click', this.handleOutsideClick);\n        }, 100);\n    },\n\n    /**\n     * é€šçŸ¥ãƒ‘ãƒãƒ«ã‚’é–‰ã˜ã‚‹\n     */\n    closeNotificationPanel() {\n        const panel = document.getElementById('notificationPanel');\n        if (panel) {\n            panel.remove();\n        }\n        this.isPanelOpen = false;\n        document.removeEventListener('click', this.handleOutsideClick);\n    },\n\n    /**\n     * ãƒ‘ãƒãƒ«å¤–ã‚¯ãƒªãƒƒã‚¯ãƒãƒ³ãƒ‰ãƒ©\n     * @param {Event} event - ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ\n     */\n    handleOutsideClick(event) {\n        const panel = document.getElementById('notificationPanel');\n        const bell = document.getElementById('notificationBell');\n\n        if (panel && !panel.contains(event.target) && !bell?.contains(event.target)) {\n            NotificationManager.closeNotificationPanel();\n        }\n    },\n\n    /**\n     * é€šçŸ¥ã‚¢ã‚¤ãƒ†ãƒ ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°\n     * @param {Object} notification - é€šçŸ¥ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ\n     * @returns {string} HTMLæ–‡å­—åˆ—\n     */\n    renderNotificationItem(notification) {\n        const icon = this.getNotificationIcon(notification.type);\n        const timeAgo = this.formatTimeAgo(notification.timestamp);\n        const readClass = notification.read ? 'read' : 'unread';\n\n        return `\n            <div class=\"notification-item ${readClass}\" onclick=\"NotificationManager.handleNotificationClick('${notification.id}')\">\n                <div class=\"notification-icon ${notification.type}\">\n                    <i class=\"fas ${icon}\"></i>\n                </div>\n                <div class=\"notification-content\">\n                    <div class=\"notification-title\">${this.escapeHtml(notification.title)}</div>\n                    <div class=\"notification-body\">${this.escapeHtml(notification.body)}</div>\n                    <div class=\"notification-time\">${timeAgo}</div>\n                </div>\n            </div>\n        `;\n    },\n\n    /**\n     * é€šçŸ¥ã‚¯ãƒªãƒƒã‚¯ãƒãƒ³ãƒ‰ãƒ©\n     * @param {string} id - é€šçŸ¥ID\n     */\n    handleNotificationClick(id) {\n        const notification = this.history.find(n => n.id === id);\n        if (!notification) {\n            return;\n        }\n\n        // æ—¢èª­ã«ã™ã‚‹\n        this.markAsRead(id);\n\n        // ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ç§»å‹•\n        if (notification.data?.section && typeof showSection === 'function') {\n            showSection(notification.data.section);\n        }\n\n        // ãƒ‘ãƒãƒ«ã‚’é–‰ã˜ã‚‹\n        this.closeNotificationPanel();\n    },\n\n    /**\n     * é€šçŸ¥ã‚¢ã‚¤ã‚³ãƒ³ã‚’å–å¾—\n     * @param {string} type - é€šçŸ¥ã‚¿ã‚¤ãƒ—\n     * @returns {string} ã‚¢ã‚¤ã‚³ãƒ³ã‚¯ãƒ©ã‚¹\n     */\n    getNotificationIcon(type) {\n        const icons = {\n            incident_new: 'fa-exclamation-circle',\n            high_priority: 'fa-fire',\n            assignment: 'fa-user-check',\n            incident_status_change: 'fa-exchange-alt',\n            change_status_change: 'fa-exchange-alt',\n            sla_warning: 'fa-clock',\n            sla_violation: 'fa-exclamation-triangle',\n            change_approval: 'fa-clipboard-check',\n            change_approved: 'fa-check-circle',\n            change_rejected: 'fa-times-circle',\n            escalation: 'fa-arrow-up',\n        };\n\n        return icons[type] || 'fa-bell';\n    },\n\n    /**\n     * ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ©ãƒ™ãƒ«ã‚’å–å¾—\n     * @param {string} type - 'incident' ã¾ãŸã¯ 'change'\n     * @param {string} status - ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å€¤\n     * @returns {string} ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ©ãƒ™ãƒ«\n     */\n    getStatusLabel(type, status) {\n        if (typeof WorkflowEngine !== 'undefined') {\n            if (type === 'incident') {\n                return WorkflowEngine.INCIDENT_STATUS_LABELS[status] || status;\n            } else {\n                return WorkflowEngine.CHANGE_STATUS_LABELS[status] || status;\n            }\n        }\n        return status;\n    },\n\n    // ========================================\n    // è¨­å®šé€£æº\n    // ========================================\n\n    /**\n     * é€šçŸ¥ã‚¿ã‚¤ãƒ—ãŒæœ‰åŠ¹ã‹ãƒã‚§ãƒƒã‚¯\n     * @param {string} type - é€šçŸ¥ã‚¿ã‚¤ãƒ—\n     * @returns {boolean} æœ‰åŠ¹ã‹ã©ã†ã‹\n     */\n    isEnabled(type) {\n        // SettingsModuleãŒåˆ©ç”¨å¯èƒ½ãªå ´åˆã¯è¨­å®šã‚’ãƒã‚§ãƒƒã‚¯\n        if (typeof SettingsModule !== 'undefined') {\n            const settings = SettingsModule.load();\n            const notification = settings.notification || {};\n\n            // ã‚¿ã‚¤ãƒ—åˆ¥ã®è¨­å®šãƒãƒƒãƒ”ãƒ³ã‚°\n            const settingMap = {\n                incident_new: notification.notifyIncidentNew !== false,\n                high_priority: notification.notifyIncidentHigh !== false,\n                sla_warning: notification.notifyIncidentNew !== false,\n                sla_violation: notification.notifyIncidentNew !== false,\n                change_approval: notification.notifyChangeApproval !== false,\n                change_approved: notification.notifyChangeComplete !== false,\n                change_rejected: notification.notifyChangeComplete !== false,\n                escalation: notification.notifyIncidentNew !== false,\n            };\n\n            return settingMap[type] !== false;\n        }\n\n        // SettingsModuleãŒãªã„å ´åˆã¯ã™ã¹ã¦æœ‰åŠ¹\n        return true;\n    },\n\n    // ========================================\n    // ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£\n    // ========================================\n\n    /**\n     * ãƒ¦ãƒ‹ãƒ¼ã‚¯IDã‚’ç”Ÿæˆ\n     * @returns {string} ID\n     */\n    generateId() {\n        return 'notif_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);\n    },\n\n    /**\n     * ç›¸å¯¾æ™‚é–“ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ\n     * @param {string} timestamp - ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—\n     * @returns {string} ç›¸å¯¾æ™‚é–“\n     */\n    formatTimeAgo(timestamp) {\n        const now = new Date();\n        const date = new Date(timestamp);\n        const diffMs = now.getTime() - date.getTime();\n        const diffMins = Math.floor(diffMs / 60000);\n        const diffHours = Math.floor(diffMs / 3600000);\n        const diffDays = Math.floor(diffMs / 86400000);\n\n        if (diffMins < 1) {\n            return 'ãŸã£ãŸä»Š';\n        } else if (diffMins < 60) {\n            return `${diffMins}åˆ†å‰`;\n        } else if (diffHours < 24) {\n            return `${diffHours}æ™‚é–“å‰`;\n        } else if (diffDays < 7) {\n            return `${diffDays}æ—¥å‰`;\n        } else {\n            return date.toLocaleDateString('ja-JP');\n        }\n    },\n\n    /**\n     * HTMLã‚¨ã‚¹ã‚±ãƒ¼ãƒ—\n     * @param {string} str - æ–‡å­—åˆ—\n     * @returns {string} ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã•ã‚ŒãŸæ–‡å­—åˆ—\n     */\n    escapeHtml(str) {\n        if (typeof str !== 'string') {\n            return '';\n        }\n        return str\n            .replace(/&/g, '&amp;')\n            .replace(/</g, '&lt;')\n            .replace(/>/g, '&gt;')\n            .replace(/\"/g, '&quot;')\n            .replace(/'/g, '&#039;');\n    },\n};\n\n// ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«å…¬é–‹\nwindow.NotificationManager = NotificationManager;\n","usedDeprecatedRules":[{"ruleId":"semi","replacedBy":["@stylistic/semi"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"semi","url":"https://eslint.style/rules/semi"}}]}},{"ruleId":"quotes","replacedBy":["@stylistic/quotes"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"quotes","url":"https://eslint.style/rules/quotes"}}]}},{"ruleId":"indent","replacedBy":["@stylistic/indent"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"indent","url":"https://eslint.style/rules/indent"}}]}}]},{"filePath":"/home/runner/work/Appsuite-ITSM-Management/Appsuite-ITSM-Management/WebUI-Production/js/performance.js","messages":[{"ruleId":"no-undef","severity":1,"message":"'ApiConfig' is not defined.","line":247,"column":60,"messageId":"undef","endLine":247,"endColumn":69},{"ruleId":"no-undef","severity":1,"message":"'ApiConfig' is not defined.","line":249,"column":68,"messageId":"undef","endLine":249,"endColumn":77},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 12.","line":312,"column":1,"messageId":"wrongIndentation","endLine":312,"endColumn":13,"fix":{"range":[8012,8024],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 16.","line":313,"column":1,"messageId":"wrongIndentation","endLine":313,"endColumn":17,"fix":{"range":[8036,8052],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 16 spaces but found 20.","line":314,"column":1,"messageId":"wrongIndentation","endLine":314,"endColumn":21,"fix":{"range":[8062,8082],"text":"                "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 16.","line":315,"column":1,"messageId":"wrongIndentation","endLine":315,"endColumn":17,"fix":{"range":[8123,8139],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 16.","line":316,"column":1,"messageId":"wrongIndentation","endLine":316,"endColumn":17,"fix":{"range":[8141,8157],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 12.","line":318,"column":1,"messageId":"wrongIndentation","endLine":318,"endColumn":13,"fix":{"range":[8192,8204],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 16.","line":319,"column":1,"messageId":"wrongIndentation","endLine":319,"endColumn":17,"fix":{"range":[8217,8233],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 12.","line":321,"column":1,"messageId":"wrongIndentation","endLine":321,"endColumn":13,"fix":{"range":[8283,8295],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 16.","line":322,"column":1,"messageId":"wrongIndentation","endLine":322,"endColumn":17,"fix":{"range":[8307,8323],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 12.","line":324,"column":1,"messageId":"wrongIndentation","endLine":324,"endColumn":13,"fix":{"range":[8377,8389],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 16.","line":325,"column":1,"messageId":"wrongIndentation","endLine":325,"endColumn":17,"fix":{"range":[8404,8420],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 12.","line":327,"column":1,"messageId":"wrongIndentation","endLine":327,"endColumn":13,"fix":{"range":[8460,8472],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 16.","line":328,"column":1,"messageId":"wrongIndentation","endLine":328,"endColumn":17,"fix":{"range":[8481,8497],"text":"            "}},{"ruleId":"no-undef","severity":1,"message":"'ApiConfig' is not defined.","line":341,"column":49,"messageId":"undef","endLine":341,"endColumn":58},{"ruleId":"no-undef","severity":1,"message":"'ApiConfig' is not defined.","line":342,"column":21,"messageId":"undef","endLine":342,"endColumn":30},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 16.","line":343,"column":1,"messageId":"wrongIndentation","endLine":343,"endColumn":17,"fix":{"range":[8857,8873],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 16 spaces but found 20.","line":344,"column":1,"messageId":"wrongIndentation","endLine":344,"endColumn":21,"fix":{"range":[8888,8908],"text":"                "}},{"ruleId":"no-undef","severity":1,"message":"'ApiConfig' is not defined.","line":344,"column":58,"messageId":"undef","endLine":344,"endColumn":67},{"ruleId":"indent","severity":2,"message":"Expected indentation of 16 spaces but found 20.","line":345,"column":1,"messageId":"wrongIndentation","endLine":345,"endColumn":21,"fix":{"range":[8965,8985],"text":"                "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 16.","line":346,"column":1,"messageId":"wrongIndentation","endLine":346,"endColumn":17,"fix":{"range":[8992,9008],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 16 spaces but found 20.","line":347,"column":1,"messageId":"wrongIndentation","endLine":347,"endColumn":21,"fix":{"range":[9022,9042],"text":"                "}},{"ruleId":"no-undef","severity":1,"message":"'ApiConfig' is not defined.","line":347,"column":62,"messageId":"undef","endLine":347,"endColumn":71},{"ruleId":"indent","severity":2,"message":"Expected indentation of 16 spaces but found 20.","line":348,"column":1,"messageId":"wrongIndentation","endLine":348,"endColumn":21,"fix":{"range":[9104,9124],"text":"                "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 16.","line":349,"column":1,"messageId":"wrongIndentation","endLine":349,"endColumn":17,"fix":{"range":[9131,9147],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 16 spaces but found 20.","line":350,"column":1,"messageId":"wrongIndentation","endLine":350,"endColumn":21,"fix":{"range":[9162,9182],"text":"                "}},{"ruleId":"no-undef","severity":1,"message":"'ApiConfig' is not defined.","line":350,"column":44,"messageId":"undef","endLine":350,"endColumn":53},{"ruleId":"indent","severity":2,"message":"Expected indentation of 16 spaces but found 20.","line":351,"column":1,"messageId":"wrongIndentation","endLine":351,"endColumn":21,"fix":{"range":[9223,9243],"text":"                "}}],"suppressedMessages":[],"errorCount":22,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":22,"fixableWarningCount":0,"source":"/**\n * AppSuite ITSMç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«\n * Sprint 5: APIå¼·åŒ–ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã€é…å»¶èª­ã¿è¾¼ã¿ã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹\n */\n\n// ========================================\n// APIã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼\n// ========================================\nconst ApiCache = {\n    cache: new Map(),\n    maxAge: 5 * 60 * 1000, // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ5åˆ†\n    maxSize: 100, // æœ€å¤§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¨ãƒ³ãƒˆãƒªæ•°\n\n    /**\n     * ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—\n     */\n    get(key) {\n        const entry = this.cache.get(key);\n        if (!entry) {\n            return null;\n        }\n\n        // æœ‰åŠ¹æœŸé™ãƒã‚§ãƒƒã‚¯\n        if (Date.now() > entry.expiresAt) {\n            this.cache.delete(key);\n            return null;\n        }\n\n        entry.hits++;\n        return entry.data;\n    },\n\n    /**\n     * ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜\n     */\n    set(key, data, ttl = this.maxAge) {\n        // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚µã‚¤ã‚ºåˆ¶é™\n        if (this.cache.size >= this.maxSize) {\n            this.evictOldest();\n        }\n\n        this.cache.set(key, {\n            data,\n            createdAt: Date.now(),\n            expiresAt: Date.now() + ttl,\n            hits: 0,\n        });\n    },\n\n    /**\n     * ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ç„¡åŠ¹åŒ–\n     */\n    invalidate(keyPattern) {\n        if (typeof keyPattern === 'string') {\n            this.cache.delete(keyPattern);\n        } else if (keyPattern instanceof RegExp) {\n            for (const key of this.cache.keys()) {\n                if (keyPattern.test(key)) {\n                    this.cache.delete(key);\n                }\n            }\n        }\n    },\n\n    /**\n     * å…¨ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢\n     */\n    clear() {\n        this.cache.clear();\n    },\n\n    /**\n     * æœ€ã‚‚å¤ã„ã‚¨ãƒ³ãƒˆãƒªã‚’å‰Šé™¤\n     */\n    evictOldest() {\n        let oldestKey = null;\n        let oldestTime = Infinity;\n\n        for (const [key, entry] of this.cache.entries()) {\n            if (entry.createdAt < oldestTime) {\n                oldestTime = entry.createdAt;\n                oldestKey = key;\n            }\n        }\n\n        if (oldestKey) {\n            this.cache.delete(oldestKey);\n        }\n    },\n\n    /**\n     * ã‚­ãƒ£ãƒƒã‚·ãƒ¥çµ±è¨ˆã‚’å–å¾—\n     */\n    getStats() {\n        let totalHits = 0;\n        let expiredCount = 0;\n        const now = Date.now();\n\n        for (const entry of this.cache.values()) {\n            totalHits += entry.hits;\n            if (now > entry.expiresAt) {\n                expiredCount++;\n            }\n        }\n\n        return {\n            size: this.cache.size,\n            maxSize: this.maxSize,\n            totalHits,\n            expiredCount,\n        };\n    },\n};\n\n// ========================================\n// ãƒªã‚¯ã‚¨ã‚¹ãƒˆé‡è¤‡æ’é™¤\n// ========================================\nconst RequestDeduplicator = {\n    pending: new Map(),\n\n    /**\n     * ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å®Ÿè¡Œï¼ˆé‡è¤‡ã¯æ’é™¤ï¼‰\n     */\n    async execute(key, requestFn) {\n        // åŒã˜ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒé€²è¡Œä¸­ã®å ´åˆã¯å¾…æ©Ÿ\n        if (this.pending.has(key)) {\n            return this.pending.get(key);\n        }\n\n        const promise = requestFn().finally(() => {\n            this.pending.delete(key);\n        });\n\n        this.pending.set(key, promise);\n        return promise;\n    },\n\n    /**\n     * é€²è¡Œä¸­ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°ã‚’å–å¾—\n     */\n    getPendingCount() {\n        return this.pending.size;\n    },\n};\n\n// ========================================\n// ãƒªãƒˆãƒ©ã‚¤æ©Ÿæ§‹ä»˜ãAPIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ\n// ========================================\nconst EnhancedApi = {\n    defaultRetries: 3,\n    baseDelay: 1000,\n    maxDelay: 30000,\n\n    /**\n     * ãƒªãƒˆãƒ©ã‚¤ä»˜ãGETãƒªã‚¯ã‚¨ã‚¹ãƒˆ\n     */\n    async get(endpoint, options = {}) {\n        const cacheKey = `GET:${endpoint}:${JSON.stringify(options.params || {})}`;\n\n        // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒã‚§ãƒƒã‚¯\n        if (options.cache !== false) {\n            const cached = ApiCache.get(cacheKey);\n            if (cached) {\n                PerformanceMetrics.recordCacheHit();\n                return cached;\n            }\n        }\n\n        const result = await this.requestWithRetry('GET', endpoint, options);\n\n        // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«ä¿å­˜\n        if (options.cache !== false) {\n            ApiCache.set(cacheKey, result, options.cacheTtl);\n        }\n\n        return result;\n    },\n\n    /**\n     * POSTãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ãªã—ï¼‰\n     */\n    async post(endpoint, data, options = {}) {\n        return this.requestWithRetry('POST', endpoint, { ...options, data });\n    },\n\n    /**\n     * PUTãƒªã‚¯ã‚¨ã‚¹ãƒˆ\n     */\n    async put(endpoint, data, options = {}) {\n        return this.requestWithRetry('PUT', endpoint, { ...options, data });\n    },\n\n    /**\n     * DELETEãƒªã‚¯ã‚¨ã‚¹ãƒˆ\n     */\n    async delete(endpoint, options = {}) {\n        return this.requestWithRetry('DELETE', endpoint, options);\n    },\n\n    /**\n     * ãƒªãƒˆãƒ©ã‚¤ä»˜ããƒªã‚¯ã‚¨ã‚¹ãƒˆå®Ÿè¡Œ\n     */\n    async requestWithRetry(method, endpoint, options = {}) {\n        const maxRetries = options.retries ?? this.defaultRetries;\n        const requestKey = `${method}:${endpoint}:${Date.now()}`;\n\n        return RequestDeduplicator.execute(requestKey, async () => {\n            let lastError;\n\n            for (let attempt = 0; attempt <= maxRetries; attempt++) {\n                try {\n                    const startTime = performance.now();\n                    const result = await this.executeRequest(method, endpoint, options);\n                    const duration = performance.now() - startTime;\n\n                    PerformanceMetrics.recordApiCall(endpoint, duration, true);\n                    return result;\n                } catch (error) {\n                    lastError = error;\n                    PerformanceMetrics.recordApiCall(endpoint, 0, false);\n\n                    // ãƒªãƒˆãƒ©ã‚¤ä¸å¯èƒ½ãªã‚¨ãƒ©ãƒ¼\n                    if (this.isNonRetryableError(error)) {\n                        throw error;\n                    }\n\n                    // æœ€å¾Œã®è©¦è¡Œã§ãªã„å ´åˆã¯å¾…æ©Ÿ\n                    if (attempt < maxRetries) {\n                        const delay = this.calculateDelay(attempt);\n                        console.log(\n                            `[EnhancedApi] Retry ${attempt + 1}/${maxRetries} after ${delay}ms`\n                        );\n                        await this.sleep(delay);\n                    }\n                }\n            }\n\n            throw lastError;\n        });\n    },\n\n    /**\n     * å®Ÿéš›ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆå®Ÿè¡Œ\n     */\n    async executeRequest(method, endpoint, options) {\n        // ApiConfigãŒå­˜åœ¨ã—ãªã„å ´åˆã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯\n        const baseUrl = typeof ApiConfig !== 'undefined' ? ApiConfig.baseUrl : '';\n        const timeout =\n            options.timeout || (typeof ApiConfig !== 'undefined' ? ApiConfig.timeout : 30000);\n\n        if (!baseUrl) {\n            // ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰ - DataStoreã‚’ä½¿ç”¨\n            return this.handleLocalRequest(method, endpoint, options);\n        }\n\n        const url = new URL(endpoint, baseUrl);\n        const headers = this.getHeaders();\n\n        const fetchOptions = {\n            method,\n            headers,\n        };\n\n        if (options.params && method === 'GET') {\n            Object.entries(options.params).forEach(([key, value]) => {\n                url.searchParams.append(key, value);\n            });\n        }\n\n        if (options.data && method !== 'GET') {\n            fetchOptions.body = JSON.stringify(options.data);\n        }\n\n        const controller = new AbortController();\n        const timeoutId = setTimeout(() => controller.abort(), timeout);\n        fetchOptions.signal = controller.signal;\n\n        try {\n            const response = await fetch(url, fetchOptions);\n            clearTimeout(timeoutId);\n\n            if (!response.ok) {\n                const error = new Error(`HTTP ${response.status}: ${response.statusText}`);\n                error.status = response.status;\n                throw error;\n            }\n\n            return await response.json();\n        } catch (error) {\n            clearTimeout(timeoutId);\n            if (error.name === 'AbortError') {\n                throw new Error('ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸ');\n            }\n            throw error;\n        }\n    },\n\n    /**\n     * ãƒ­ãƒ¼ã‚«ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‡¦ç†ï¼ˆãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰ï¼‰\n     */\n    handleLocalRequest(method, endpoint, options) {\n        // DataStoreã‚’ä½¿ç”¨ã—ãŸãƒ­ãƒ¼ã‚«ãƒ«å‡¦ç†\n        const segments = endpoint.split('/').filter(Boolean);\n        const resource = segments[0];\n        const id = segments[1];\n\n        if (typeof DataStore === 'undefined') {\n            throw new Error('DataStore is not available');\n        }\n\n        switch (method) {\n            case 'GET':\n                if (id) {\n                    return DataStore.findById(resource, id);\n                }\n                return DataStore[resource] || [];\n\n            case 'POST':\n                return DataStore.create(resource, options.data);\n\n            case 'PUT':\n                return DataStore.update(resource, id, options.data);\n\n            case 'DELETE':\n                return DataStore.delete(resource, id);\n\n            default:\n                throw new Error(`Unsupported method: ${method}`);\n        }\n    },\n\n    /**\n     * ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ˜ãƒƒãƒ€ãƒ¼å–å¾—\n     */\n    getHeaders() {\n        const headers = {\n            'Content-Type': 'application/json',\n            Accept: 'application/json',\n        };\n\n        if (typeof ApiConfig !== 'undefined' && ApiConfig.apiKey) {\n            switch (ApiConfig.authMethod) {\n                case 'bearer':\n                    headers['Authorization'] = `Bearer ${ApiConfig.apiKey}`;\n                    break;\n                case 'basic':\n                    headers['Authorization'] = `Basic ${btoa(ApiConfig.apiKey)}`;\n                    break;\n                case 'apikey':\n                    headers['X-API-Key'] = ApiConfig.apiKey;\n                    break;\n            }\n        }\n\n        return headers;\n    },\n\n    /**\n     * ãƒªãƒˆãƒ©ã‚¤ä¸å¯èƒ½ãªã‚¨ãƒ©ãƒ¼ã‹åˆ¤å®š\n     */\n    isNonRetryableError(error) {\n        // 4xxç³»ã‚¨ãƒ©ãƒ¼ï¼ˆèªè¨¼ã‚¨ãƒ©ãƒ¼ãªã©ï¼‰ã¯ãƒªãƒˆãƒ©ã‚¤ã—ãªã„\n        if (error.status >= 400 && error.status < 500) {\n            return true;\n        }\n        return false;\n    },\n\n    /**\n     * æŒ‡æ•°ãƒãƒƒã‚¯ã‚ªãƒ•ã§ãƒ‡ã‚£ãƒ¬ã‚¤ã‚’è¨ˆç®—\n     */\n    calculateDelay(attempt) {\n        const delay = this.baseDelay * Math.pow(2, attempt);\n        const jitter = Math.random() * 1000;\n        return Math.min(delay + jitter, this.maxDelay);\n    },\n\n    /**\n     * ã‚¹ãƒªãƒ¼ãƒ—\n     */\n    sleep(ms) {\n        return new Promise(resolve => setTimeout(resolve, ms));\n    },\n};\n\n// ========================================\n// ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹\n// ========================================\nconst PerformanceMetrics = {\n    metrics: {\n        apiCalls: [],\n        cacheHits: 0,\n        cacheMisses: 0,\n        renderTimes: [],\n        errors: [],\n    },\n    maxHistory: 100,\n\n    /**\n     * APIå‘¼ã³å‡ºã—ã‚’è¨˜éŒ²\n     */\n    recordApiCall(endpoint, duration, success) {\n        this.metrics.apiCalls.push({\n            endpoint,\n            duration,\n            success,\n            timestamp: Date.now(),\n        });\n\n        // å±¥æ­´åˆ¶é™\n        if (this.metrics.apiCalls.length > this.maxHistory) {\n            this.metrics.apiCalls.shift();\n        }\n\n        if (!success) {\n            this.metrics.cacheMisses++;\n        }\n    },\n\n    /**\n     * ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆã‚’è¨˜éŒ²\n     */\n    recordCacheHit() {\n        this.metrics.cacheHits++;\n    },\n\n    /**\n     * ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ™‚é–“ã‚’è¨˜éŒ²\n     */\n    recordRenderTime(component, duration) {\n        this.metrics.renderTimes.push({\n            component,\n            duration,\n            timestamp: Date.now(),\n        });\n\n        if (this.metrics.renderTimes.length > this.maxHistory) {\n            this.metrics.renderTimes.shift();\n        }\n    },\n\n    /**\n     * ã‚¨ãƒ©ãƒ¼ã‚’è¨˜éŒ²\n     */\n    recordError(error, context) {\n        this.metrics.errors.push({\n            message: error.message,\n            stack: error.stack,\n            context,\n            timestamp: Date.now(),\n        });\n\n        if (this.metrics.errors.length > this.maxHistory) {\n            this.metrics.errors.shift();\n        }\n    },\n\n    /**\n     * çµ±è¨ˆã‚’å–å¾—\n     */\n    getStats() {\n        const apiCalls = this.metrics.apiCalls;\n        const successfulCalls = apiCalls.filter(c => c.success);\n\n        return {\n            totalApiCalls: apiCalls.length,\n            successfulApiCalls: successfulCalls.length,\n            failedApiCalls: apiCalls.length - successfulCalls.length,\n            averageResponseTime:\n                successfulCalls.length > 0\n                    ? successfulCalls.reduce((sum, c) => sum + c.duration, 0) /\n                      successfulCalls.length\n                    : 0,\n            cacheHitRate:\n                this.metrics.cacheHits + this.metrics.cacheMisses > 0\n                    ? this.metrics.cacheHits / (this.metrics.cacheHits + this.metrics.cacheMisses)\n                    : 0,\n            cacheHits: this.metrics.cacheHits,\n            cacheMisses: this.metrics.cacheMisses,\n            recentErrors: this.metrics.errors.slice(-10),\n        };\n    },\n\n    /**\n     * ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ãƒªã‚»ãƒƒãƒˆ\n     */\n    reset() {\n        this.metrics = {\n            apiCalls: [],\n            cacheHits: 0,\n            cacheMisses: 0,\n            renderTimes: [],\n            errors: [],\n        };\n    },\n};\n\n// ========================================\n// é…å»¶èª­ã¿è¾¼ã¿ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£\n// ========================================\nconst LazyLoader = {\n    observers: new Map(),\n\n    /**\n     * è¦ç´ ã®é…å»¶èª­ã¿è¾¼ã¿ã‚’è¨­å®š\n     */\n    observe(element, callback, options = {}) {\n        if (!('IntersectionObserver' in window)) {\n            // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: å³åº§ã«å®Ÿè¡Œ\n            callback(element);\n            return;\n        }\n\n        const observer = new IntersectionObserver(\n            entries => {\n                entries.forEach(entry => {\n                    if (entry.isIntersecting) {\n                        callback(entry.target);\n                        observer.unobserve(entry.target);\n                        this.observers.delete(element);\n                    }\n                });\n            },\n            {\n                rootMargin: options.rootMargin || '100px',\n                threshold: options.threshold || 0.1,\n            }\n        );\n\n        observer.observe(element);\n        this.observers.set(element, observer);\n    },\n\n    /**\n     * ç›£è¦–ã‚’è§£é™¤\n     */\n    unobserve(element) {\n        const observer = this.observers.get(element);\n        if (observer) {\n            observer.unobserve(element);\n            this.observers.delete(element);\n        }\n    },\n\n    /**\n     * å…¨ã¦ã®ç›£è¦–ã‚’è§£é™¤\n     */\n    disconnect() {\n        this.observers.forEach(observer => observer.disconnect());\n        this.observers.clear();\n    },\n};\n\n// ========================================\n// ãƒ‡ãƒã‚¦ãƒ³ã‚¹ãƒ»ã‚¹ãƒ­ãƒƒãƒˆãƒ«\n// ========================================\nconst RateLimitUtils = {\n    /**\n     * ãƒ‡ãƒã‚¦ãƒ³ã‚¹\n     */\n    debounce(fn, delay) {\n        let timeoutId;\n        return function (...args) {\n            clearTimeout(timeoutId);\n            timeoutId = setTimeout(() => fn.apply(this, args), delay);\n        };\n    },\n\n    /**\n     * ã‚¹ãƒ­ãƒƒãƒˆãƒ«\n     */\n    throttle(fn, limit) {\n        let inThrottle;\n        return function (...args) {\n            if (!inThrottle) {\n                fn.apply(this, args);\n                inThrottle = true;\n                setTimeout(() => (inThrottle = false), limit);\n            }\n        };\n    },\n\n    /**\n     * ä¸€å®šæ™‚é–“å¾Œã«1å›ã ã‘å®Ÿè¡Œ\n     */\n    once(fn) {\n        let called = false;\n        return function (...args) {\n            if (!called) {\n                called = true;\n                return fn.apply(this, args);\n            }\n        };\n    },\n};\n\n// ========================================\n// ãƒ¡ãƒ¢åŒ–ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£\n// ========================================\nconst Memoize = {\n    /**\n     * é–¢æ•°ã®çµæœã‚’ãƒ¡ãƒ¢åŒ–\n     */\n    fn(fn, keyFn) {\n        const cache = new Map();\n\n        return function (...args) {\n            const key = keyFn ? keyFn(...args) : JSON.stringify(args);\n\n            if (cache.has(key)) {\n                return cache.get(key);\n            }\n\n            const result = fn.apply(this, args);\n            cache.set(key, result);\n            return result;\n        };\n    },\n\n    /**\n     * TTLä»˜ããƒ¡ãƒ¢åŒ–\n     */\n    withTtl(fn, ttl, keyFn) {\n        const cache = new Map();\n\n        return function (...args) {\n            const key = keyFn ? keyFn(...args) : JSON.stringify(args);\n            const entry = cache.get(key);\n\n            if (entry && Date.now() < entry.expiresAt) {\n                return entry.value;\n            }\n\n            const result = fn.apply(this, args);\n            cache.set(key, {\n                value: result,\n                expiresAt: Date.now() + ttl,\n            });\n            return result;\n        };\n    },\n};\n\n// ========================================\n// ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¢ãƒ‹ã‚¿ãƒ¼\n// ========================================\nconst PerformanceMonitor = {\n    enabled: true,\n    marks: new Map(),\n\n    /**\n     * è¨ˆæ¸¬é–‹å§‹\n     */\n    start(name) {\n        if (!this.enabled) {\n            return;\n        }\n        this.marks.set(name, performance.now());\n    },\n\n    /**\n     * è¨ˆæ¸¬çµ‚äº†ã—ã¦æ™‚é–“ã‚’è¿”ã™\n     */\n    end(name) {\n        if (!this.enabled) {\n            return 0;\n        }\n\n        const startTime = this.marks.get(name);\n        if (!startTime) {\n            return 0;\n        }\n\n        const duration = performance.now() - startTime;\n        this.marks.delete(name);\n\n        PerformanceMetrics.recordRenderTime(name, duration);\n        return duration;\n    },\n\n    /**\n     * é–¢æ•°ã®å®Ÿè¡Œæ™‚é–“ã‚’è¨ˆæ¸¬\n     */\n    measure(name, fn) {\n        this.start(name);\n        const result = fn();\n        const duration = this.end(name);\n\n        if (duration > 100) {\n            console.warn(`[Performance] ${name} took ${duration.toFixed(2)}ms`);\n        }\n\n        return result;\n    },\n\n    /**\n     * éåŒæœŸé–¢æ•°ã®å®Ÿè¡Œæ™‚é–“ã‚’è¨ˆæ¸¬\n     */\n    async measureAsync(name, fn) {\n        this.start(name);\n        try {\n            return await fn();\n        } finally {\n            const duration = this.end(name);\n            if (duration > 100) {\n                console.warn(`[Performance] ${name} took ${duration.toFixed(2)}ms`);\n            }\n        }\n    },\n};\n\n// ========================================\n// åˆæœŸåŒ–\n// ========================================\nconst PerformanceOptimizer = {\n    init() {\n        console.log('[PerformanceOptimizer] åˆæœŸåŒ–å®Œäº†');\n\n        // å®šæœŸçš„ãªã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—\n        setInterval(() => {\n            const stats = ApiCache.getStats();\n            if (stats.expiredCount > 0) {\n                console.log(\n                    `[PerformanceOptimizer] Cleaning ${stats.expiredCount} expired cache entries`\n                );\n                // æœŸé™åˆ‡ã‚Œã‚¨ãƒ³ãƒˆãƒªã‚’å‰Šé™¤\n                for (const [key, entry] of ApiCache.cache.entries()) {\n                    if (Date.now() > entry.expiresAt) {\n                        ApiCache.cache.delete(key);\n                    }\n                }\n            }\n        }, 60000); // 1åˆ†ã”ã¨\n    },\n\n    /**\n     * ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¬ãƒãƒ¼ãƒˆã‚’å–å¾—\n     */\n    getReport() {\n        return {\n            cache: ApiCache.getStats(),\n            metrics: PerformanceMetrics.getStats(),\n            pendingRequests: RequestDeduplicator.getPendingCount(),\n        };\n    },\n\n    /**\n     * å…¨ã¦ãƒªã‚»ãƒƒãƒˆ\n     */\n    reset() {\n        ApiCache.clear();\n        PerformanceMetrics.reset();\n    },\n};\n\n// ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ\nif (typeof window !== 'undefined') {\n    window.ApiCache = ApiCache;\n    window.EnhancedApi = EnhancedApi;\n    window.PerformanceMetrics = PerformanceMetrics;\n    window.LazyLoader = LazyLoader;\n    window.RateLimitUtils = RateLimitUtils;\n    window.Memoize = Memoize;\n    window.PerformanceMonitor = PerformanceMonitor;\n    window.PerformanceOptimizer = PerformanceOptimizer;\n}\n","usedDeprecatedRules":[{"ruleId":"semi","replacedBy":["@stylistic/semi"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"semi","url":"https://eslint.style/rules/semi"}}]}},{"ruleId":"quotes","replacedBy":["@stylistic/quotes"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"quotes","url":"https://eslint.style/rules/quotes"}}]}},{"ruleId":"indent","replacedBy":["@stylistic/indent"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"indent","url":"https://eslint.style/rules/indent"}}]}}]},{"filePath":"/home/runner/work/Appsuite-ITSM-Management/Appsuite-ITSM-Management/WebUI-Production/js/security.js","messages":[{"ruleId":"quotes","severity":2,"message":"Strings must use singlequote.","line":25,"column":13,"messageId":"wrongQuotes","endLine":25,"endColumn":16,"fix":{"range":[542,545],"text":"'\\''"}},{"ruleId":"quotes","severity":2,"message":"Strings must use singlequote.","line":49,"column":23,"messageId":"wrongQuotes","endLine":49,"endColumn":26,"fix":{"range":[1077,1080],"text":"'\\''"}},{"ruleId":"quotes","severity":2,"message":"Strings must use singlequote.","line":94,"column":34,"messageId":"wrongQuotes","endLine":94,"endColumn":38,"fix":{"range":[2182,2186],"text":"'\\'\\''"}},{"ruleId":"no-unused-vars","severity":1,"message":"'FormValidator' is assigned a value but never used.","line":311,"column":7,"messageId":"unusedVar","endLine":311,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"FormValidator"},"fix":{"range":[6991,10149],"text":""},"desc":"Remove unused variable 'FormValidator'."}]},{"ruleId":"indent","severity":2,"message":"Expected indentation of 16 spaces but found 20.","line":336,"column":1,"messageId":"wrongIndentation","endLine":336,"endColumn":21,"fix":{"range":[7714,7734],"text":"                "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 20 spaces but found 24.","line":337,"column":1,"messageId":"wrongIndentation","endLine":337,"endColumn":25,"fix":{"range":[7751,7775],"text":"                    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 20 spaces but found 24.","line":338,"column":1,"messageId":"wrongIndentation","endLine":338,"endColumn":25,"fix":{"range":[7810,7834],"text":"                    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 16 spaces but found 20.","line":339,"column":1,"messageId":"wrongIndentation","endLine":339,"endColumn":21,"fix":{"range":[7841,7861],"text":"                "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 20 spaces but found 24.","line":340,"column":1,"messageId":"wrongIndentation","endLine":340,"endColumn":25,"fix":{"range":[7879,7903],"text":"                    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 20 spaces but found 24.","line":341,"column":1,"messageId":"wrongIndentation","endLine":341,"endColumn":25,"fix":{"range":[7951,7975],"text":"                    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 16 spaces but found 20.","line":342,"column":1,"messageId":"wrongIndentation","endLine":342,"endColumn":21,"fix":{"range":[7982,8002],"text":"                "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 20 spaces but found 24.","line":343,"column":1,"messageId":"wrongIndentation","endLine":343,"endColumn":25,"fix":{"range":[8020,8044],"text":"                    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 20 spaces but found 24.","line":344,"column":1,"messageId":"wrongIndentation","endLine":344,"endColumn":25,"fix":{"range":[8092,8116],"text":"                    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 16 spaces but found 20.","line":345,"column":1,"messageId":"wrongIndentation","endLine":345,"endColumn":21,"fix":{"range":[8123,8143],"text":"                "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 20 spaces but found 24.","line":346,"column":1,"messageId":"wrongIndentation","endLine":346,"endColumn":25,"fix":{"range":[8157,8181],"text":"                    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 20 spaces but found 24.","line":347,"column":1,"messageId":"wrongIndentation","endLine":347,"endColumn":25,"fix":{"range":[8223,8247],"text":"                    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 16 spaces but found 20.","line":348,"column":1,"messageId":"wrongIndentation","endLine":348,"endColumn":21,"fix":{"range":[8254,8274],"text":"                "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 20 spaces but found 24.","line":349,"column":1,"messageId":"wrongIndentation","endLine":349,"endColumn":25,"fix":{"range":[8290,8314],"text":"                    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 20 spaces but found 24.","line":350,"column":1,"messageId":"wrongIndentation","endLine":350,"endColumn":25,"fix":{"range":[8374,8398],"text":"                    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 16 spaces but found 20.","line":351,"column":1,"messageId":"wrongIndentation","endLine":351,"endColumn":21,"fix":{"range":[8405,8425],"text":"                "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 20 spaces but found 24.","line":352,"column":1,"messageId":"wrongIndentation","endLine":352,"endColumn":25,"fix":{"range":[8439,8463],"text":"                    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 20 spaces but found 24.","line":353,"column":1,"messageId":"wrongIndentation","endLine":353,"endColumn":25,"fix":{"range":[8529,8553],"text":"                    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 16 spaces but found 20.","line":354,"column":1,"messageId":"wrongIndentation","endLine":354,"endColumn":21,"fix":{"range":[8560,8580],"text":"                "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 20 spaces but found 24.","line":355,"column":1,"messageId":"wrongIndentation","endLine":355,"endColumn":25,"fix":{"range":[8595,8619],"text":"                    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 20 spaces but found 24.","line":356,"column":1,"messageId":"wrongIndentation","endLine":356,"endColumn":25,"fix":{"range":[8651,8675],"text":"                    "}},{"ruleId":"no-unused-vars","severity":1,"message":"'CsrfProtection' is assigned a value but never used.","line":411,"column":7,"messageId":"unusedVar","endLine":411,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"CsrfProtection"},"fix":{"range":[10185,11418],"text":""},"desc":"Remove unused variable 'CsrfProtection'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'RateLimiter' is assigned a value but never used.","line":463,"column":7,"messageId":"unusedVar","endLine":463,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"RateLimiter"},"fix":{"range":[11449,13096],"text":""},"desc":"Remove unused variable 'RateLimiter'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'escapeHtml' is defined but never used.","line":531,"column":10,"messageId":"unusedVar","endLine":531,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"escapeHtml"},"fix":{"range":[13130,13195],"text":""},"desc":"Remove unused variable 'escapeHtml'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'sanitizeInput' is defined but never used.","line":535,"column":10,"messageId":"unusedVar","endLine":535,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"sanitizeInput"},"fix":{"range":[13197,13265],"text":""},"desc":"Remove unused variable 'sanitizeInput'."}]}],"suppressedMessages":[],"errorCount":24,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":24,"fixableWarningCount":0,"source":"/**\n * AppSuite ç®¡ç†é‹ç”¨ã‚·ã‚¹ãƒ†ãƒ  - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£\n * Phase 3 Sprint 1: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–\n */\n\nconst Security = {\n    /**\n     * HTMLã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ï¼ˆXSSå¯¾ç­–ï¼‰\n     * @param {string} str - ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã™ã‚‹æ–‡å­—åˆ—\n     * @returns {string} - ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã•ã‚ŒãŸæ–‡å­—åˆ—\n     */\n    escapeHtml(str) {\n        if (str === null || str === undefined) {\n            return '';\n        }\n        if (typeof str !== 'string') {\n            str = String(str);\n        }\n\n        const escapeMap = {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            '\"': '&quot;',\n            \"'\": '&#039;',\n            '/': '&#x2F;',\n            '`': '&#x60;',\n            '=': '&#x3D;',\n        };\n\n        return str.replace(/[&<>\"'`=/]/g, char => escapeMap[char]);\n    },\n\n    /**\n     * HTMLã‚¢ãƒ³ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—\n     * @param {string} str - ã‚¢ãƒ³ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã™ã‚‹æ–‡å­—åˆ—\n     * @returns {string} - ã‚¢ãƒ³ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã•ã‚ŒãŸæ–‡å­—åˆ—\n     */\n    unescapeHtml(str) {\n        if (!str) {\n            return '';\n        }\n\n        const unescapeMap = {\n            '&amp;': '&',\n            '&lt;': '<',\n            '&gt;': '>',\n            '&quot;': '\"',\n            '&#039;': \"'\",\n            '&#x2F;': '/',\n            '&#x60;': '`',\n            '&#x3D;': '=',\n        };\n\n        return str.replace(\n            /&amp;|&lt;|&gt;|&quot;|&#039;|&#x2F;|&#x60;|&#x3D;/g,\n            match => unescapeMap[match]\n        );\n    },\n\n    /**\n     * å®‰å…¨ãªHTMLç”Ÿæˆï¼ˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒªãƒ†ãƒ©ãƒ«ç”¨ã‚¿ã‚°é–¢æ•°ï¼‰\n     * @param {Array} strings - ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ–‡å­—åˆ—é…åˆ—\n     * @param {...any} values - æŒ¿å…¥å€¤\n     * @returns {string} - ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã•ã‚ŒãŸHTML\n     */\n    html(strings, ...values) {\n        return strings.reduce((result, str, i) => {\n            const value = values[i - 1];\n            const escaped = this.escapeHtml(value);\n            return result + escaped + str;\n        });\n    },\n\n    /**\n     * URLã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰\n     * @param {string} str - ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã™ã‚‹æ–‡å­—åˆ—\n     * @returns {string} - ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸæ–‡å­—åˆ—\n     */\n    encodeUrl(str) {\n        return encodeURIComponent(str);\n    },\n\n    /**\n     * SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–ï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´å‚è€ƒå®Ÿè£…ï¼‰\n     * @param {string} str - ã‚µãƒ‹ã‚¿ã‚¤ã‚ºã™ã‚‹æ–‡å­—åˆ—\n     * @returns {string} - ã‚µãƒ‹ã‚¿ã‚¤ã‚ºã•ã‚ŒãŸæ–‡å­—åˆ—\n     */\n    sanitizeSql(str) {\n        if (!str) {\n            return '';\n        }\n        // ã‚·ãƒ³ã‚°ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆã‚’ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—\n        return str.replace(/'/g, \"''\");\n    },\n};\n\n/**\n * å…¥åŠ›ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«\n */\nconst Validator = {\n    /**\n     * å¿…é ˆãƒã‚§ãƒƒã‚¯\n     * @param {any} value - ãƒã‚§ãƒƒã‚¯ã™ã‚‹å€¤\n     * @returns {boolean} - å€¤ãŒã‚ã‚‹å ´åˆtrue\n     */\n    required(value) {\n        if (value === null || value === undefined) {\n            return false;\n        }\n        if (typeof value === 'string') {\n            return value.trim().length > 0;\n        }\n        if (Array.isArray(value)) {\n            return value.length > 0;\n        }\n        return true;\n    },\n\n    /**\n     * æœ€å°é•·ãƒã‚§ãƒƒã‚¯\n     * @param {string} value - ãƒã‚§ãƒƒã‚¯ã™ã‚‹å€¤\n     * @param {number} min - æœ€å°é•·\n     * @returns {boolean} - æ¡ä»¶ã‚’æº€ãŸã™å ´åˆtrue\n     */\n    minLength(value, min) {\n        if (!value) {\n            return false;\n        }\n        return String(value).length >= min;\n    },\n\n    /**\n     * æœ€å¤§é•·ãƒã‚§ãƒƒã‚¯\n     * @param {string} value - ãƒã‚§ãƒƒã‚¯ã™ã‚‹å€¤\n     * @param {number} max - æœ€å¤§é•·\n     * @returns {boolean} - æ¡ä»¶ã‚’æº€ãŸã™å ´åˆtrue\n     */\n    maxLength(value, max) {\n        if (!value) {\n            return true;\n        }\n        return String(value).length <= max;\n    },\n\n    /**\n     * ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å½¢å¼ãƒã‚§ãƒƒã‚¯\n     * @param {string} email - ãƒã‚§ãƒƒã‚¯ã™ã‚‹ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹\n     * @returns {boolean} - æœ‰åŠ¹ãªå½¢å¼ã®å ´åˆtrue\n     */\n    email(email) {\n        if (!email) {\n            return false;\n        }\n        const pattern = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n        return pattern.test(email);\n    },\n\n    /**\n     * é›»è©±ç•ªå·å½¢å¼ãƒã‚§ãƒƒã‚¯ï¼ˆæ—¥æœ¬ï¼‰\n     * @param {string} phone - ãƒã‚§ãƒƒã‚¯ã™ã‚‹é›»è©±ç•ªå·\n     * @returns {boolean} - æœ‰åŠ¹ãªå½¢å¼ã®å ´åˆtrue\n     */\n    phone(phone) {\n        if (!phone) {\n            return false;\n        }\n        // ãƒã‚¤ãƒ•ãƒ³ã‚ã‚Šãƒ»ãªã—ä¸¡å¯¾å¿œ\n        const pattern = /^0\\d{1,4}-?\\d{1,4}-?\\d{4}$/;\n        return pattern.test(phone.replace(/\\s/g, ''));\n    },\n\n    /**\n     * æ•°å€¤ãƒã‚§ãƒƒã‚¯\n     * @param {any} value - ãƒã‚§ãƒƒã‚¯ã™ã‚‹å€¤\n     * @returns {boolean} - æ•°å€¤ã®å ´åˆtrue\n     */\n    numeric(value) {\n        return !isNaN(parseFloat(value)) && isFinite(value);\n    },\n\n    /**\n     * æ•´æ•°ãƒã‚§ãƒƒã‚¯\n     * @param {any} value - ãƒã‚§ãƒƒã‚¯ã™ã‚‹å€¤\n     * @returns {boolean} - æ•´æ•°ã®å ´åˆtrue\n     */\n    integer(value) {\n        return Number.isInteger(Number(value));\n    },\n\n    /**\n     * ç¯„å›²ãƒã‚§ãƒƒã‚¯\n     * @param {number} value - ãƒã‚§ãƒƒã‚¯ã™ã‚‹å€¤\n     * @param {number} min - æœ€å°å€¤\n     * @param {number} max - æœ€å¤§å€¤\n     * @returns {boolean} - ç¯„å›²å†…ã®å ´åˆtrue\n     */\n    range(value, min, max) {\n        const num = Number(value);\n        return !isNaN(num) && num >= min && num <= max;\n    },\n\n    /**\n     * æ­£è¦è¡¨ç¾ãƒã‚§ãƒƒã‚¯\n     * @param {string} value - ãƒã‚§ãƒƒã‚¯ã™ã‚‹å€¤\n     * @param {RegExp} pattern - æ­£è¦è¡¨ç¾ãƒ‘ã‚¿ãƒ¼ãƒ³\n     * @returns {boolean} - ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ãƒãƒƒãƒã™ã‚‹å ´åˆtrue\n     */\n    pattern(value, pattern) {\n        if (!value) {\n            return false;\n        }\n        return pattern.test(value);\n    },\n\n    /**\n     * æ—¥ä»˜å½¢å¼ãƒã‚§ãƒƒã‚¯ï¼ˆYYYY-MM-DDï¼‰\n     * @param {string} date - ãƒã‚§ãƒƒã‚¯ã™ã‚‹æ—¥ä»˜æ–‡å­—åˆ—\n     * @returns {boolean} - æœ‰åŠ¹ãªæ—¥ä»˜ã®å ´åˆtrue\n     */\n    date(date) {\n        if (!date) {\n            return false;\n        }\n        const pattern = /^\\d{4}-\\d{2}-\\d{2}$/;\n        if (!pattern.test(date)) {\n            return false;\n        }\n\n        const d = new Date(date);\n        return d instanceof Date && !isNaN(d);\n    },\n\n    /**\n     * æ—¥æ™‚å½¢å¼ãƒã‚§ãƒƒã‚¯ï¼ˆYYYY-MM-DD HH:mmï¼‰\n     * @param {string} datetime - ãƒã‚§ãƒƒã‚¯ã™ã‚‹æ—¥æ™‚æ–‡å­—åˆ—\n     * @returns {boolean} - æœ‰åŠ¹ãªæ—¥æ™‚ã®å ´åˆtrue\n     */\n    datetime(datetime) {\n        if (!datetime) {\n            return false;\n        }\n        const pattern = /^\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}$/;\n        if (!pattern.test(datetime)) {\n            return false;\n        }\n\n        const d = new Date(datetime.replace(' ', 'T'));\n        return d instanceof Date && !isNaN(d);\n    },\n\n    /**\n     * URLå½¢å¼ãƒã‚§ãƒƒã‚¯\n     * @param {string} url - ãƒã‚§ãƒƒã‚¯ã™ã‚‹URL\n     * @returns {boolean} - æœ‰åŠ¹ãªURLã®å ´åˆtrue\n     */\n    url(url) {\n        if (!url) {\n            return false;\n        }\n        try {\n            new URL(url);\n            return true;\n        } catch {\n            return false;\n        }\n    },\n\n    /**\n     * è‹±æ•°å­—ã®ã¿ãƒã‚§ãƒƒã‚¯\n     * @param {string} value - ãƒã‚§ãƒƒã‚¯ã™ã‚‹å€¤\n     * @returns {boolean} - è‹±æ•°å­—ã®ã¿ã®å ´åˆtrue\n     */\n    alphanumeric(value) {\n        if (!value) {\n            return false;\n        }\n        return /^[a-zA-Z0-9]+$/.test(value);\n    },\n\n    /**\n     * æ—¥æœ¬èªã‚’å«ã‚€ã‹ãƒã‚§ãƒƒã‚¯\n     * @param {string} value - ãƒã‚§ãƒƒã‚¯ã™ã‚‹å€¤\n     * @returns {boolean} - æ—¥æœ¬èªã‚’å«ã‚€å ´åˆtrue\n     */\n    containsJapanese(value) {\n        if (!value) {\n            return false;\n        }\n        return /[\\u3040-\\u309F\\u30A0-\\u30FF\\u4E00-\\u9FAF]/.test(value);\n    },\n\n    /**\n     * ç¦æ­¢æ–‡å­—ãƒã‚§ãƒƒã‚¯\n     * @param {string} value - ãƒã‚§ãƒƒã‚¯ã™ã‚‹å€¤\n     * @param {string} chars - ç¦æ­¢æ–‡å­—ï¼ˆæ–‡å­—åˆ—ï¼‰\n     * @returns {boolean} - ç¦æ­¢æ–‡å­—ã‚’å«ã¾ãªã„å ´åˆtrue\n     */\n    noForbiddenChars(value, chars = '<>\"\\'/\\\\') {\n        if (!value) {\n            return true;\n        }\n        const pattern = new RegExp(`[${chars.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&')}]`);\n        return !pattern.test(value);\n    },\n};\n\n/**\n * ãƒ•ã‚©ãƒ¼ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ˜ãƒ«ãƒ‘ãƒ¼\n */\nconst FormValidator = {\n    /**\n     * ãƒ•ã‚©ãƒ¼ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ\n     * @param {HTMLFormElement} form - ãƒ•ã‚©ãƒ¼ãƒ è¦ç´ \n     * @param {Object} rules - ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ«\n     * @returns {Object} - ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³çµæœ\n     */\n    validate(form, rules) {\n        const errors = {};\n        let isValid = true;\n\n        for (const [fieldName, fieldRules] of Object.entries(rules)) {\n            const input = form.querySelector(`[name=\"${fieldName}\"]`);\n            if (!input) {\n                continue;\n            }\n\n            const value = input.value;\n            const fieldErrors = [];\n\n            for (const rule of fieldRules) {\n                const { type, message, params } = rule;\n\n                let valid = true;\n                switch (type) {\n                    case 'required':\n                        valid = Validator.required(value);\n                        break;\n                    case 'minLength':\n                        valid = Validator.minLength(value, params.min);\n                        break;\n                    case 'maxLength':\n                        valid = Validator.maxLength(value, params.max);\n                        break;\n                    case 'email':\n                        valid = !value || Validator.email(value);\n                        break;\n                    case 'pattern':\n                        valid = !value || Validator.pattern(value, params.pattern);\n                        break;\n                    case 'range':\n                        valid = !value || Validator.range(value, params.min, params.max);\n                        break;\n                    case 'custom':\n                        valid = params.fn(value, form);\n                        break;\n                }\n\n                if (!valid) {\n                    fieldErrors.push(message);\n                    isValid = false;\n                }\n            }\n\n            if (fieldErrors.length > 0) {\n                errors[fieldName] = fieldErrors;\n            }\n        }\n\n        return { isValid, errors };\n    },\n\n    /**\n     * ã‚¨ãƒ©ãƒ¼è¡¨ç¤º\n     * @param {HTMLFormElement} form - ãƒ•ã‚©ãƒ¼ãƒ è¦ç´ \n     * @param {Object} errors - ã‚¨ãƒ©ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ\n     */\n    showErrors(form, errors) {\n        // æ—¢å­˜ã®ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºã‚’ã‚¯ãƒªã‚¢\n        form.querySelectorAll('.field-error').forEach(el => el.remove());\n        form.querySelectorAll('.input-error').forEach(el => el.classList.remove('input-error'));\n\n        for (const [fieldName, messages] of Object.entries(errors)) {\n            const input = form.querySelector(`[name=\"${fieldName}\"]`);\n            if (!input) {\n                continue;\n            }\n\n            input.classList.add('input-error');\n\n            const errorDiv = document.createElement('div');\n            errorDiv.className = 'field-error';\n            errorDiv.textContent = messages[0]; // æœ€åˆã®ã‚¨ãƒ©ãƒ¼ã®ã¿è¡¨ç¤º\n            input.parentNode.insertBefore(errorDiv, input.nextSibling);\n        }\n    },\n\n    /**\n     * ã‚¨ãƒ©ãƒ¼ã‚¯ãƒªã‚¢\n     * @param {HTMLFormElement} form - ãƒ•ã‚©ãƒ¼ãƒ è¦ç´ \n     */\n    clearErrors(form) {\n        form.querySelectorAll('.field-error').forEach(el => el.remove());\n        form.querySelectorAll('.input-error').forEach(el => el.classList.remove('input-error'));\n    },\n};\n\n/**\n * CSRFãƒˆãƒ¼ã‚¯ãƒ³ç®¡ç†ï¼ˆå°†æ¥ã®ã‚µãƒ¼ãƒãƒ¼é€£æºç”¨ï¼‰\n */\nconst CsrfProtection = {\n    tokenKey: 'csrf_token',\n\n    /**\n     * ãƒˆãƒ¼ã‚¯ãƒ³ç”Ÿæˆ\n     * @returns {string} - CSRFãƒˆãƒ¼ã‚¯ãƒ³\n     */\n    generateToken() {\n        const array = new Uint8Array(32);\n        crypto.getRandomValues(array);\n        const token = Array.from(array, byte => byte.toString(16).padStart(2, '0')).join('');\n        sessionStorage.setItem(this.tokenKey, token);\n        return token;\n    },\n\n    /**\n     * ãƒˆãƒ¼ã‚¯ãƒ³å–å¾—\n     * @returns {string|null} - ä¿å­˜ã•ã‚Œã¦ã„ã‚‹ãƒˆãƒ¼ã‚¯ãƒ³\n     */\n    getToken() {\n        return sessionStorage.getItem(this.tokenKey);\n    },\n\n    /**\n     * ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼\n     * @param {string} token - æ¤œè¨¼ã™ã‚‹ãƒˆãƒ¼ã‚¯ãƒ³\n     * @returns {boolean} - æœ‰åŠ¹ãªå ´åˆtrue\n     */\n    verifyToken(token) {\n        const storedToken = this.getToken();\n        return storedToken && storedToken === token;\n    },\n\n    /**\n     * ãƒ•ã‚©ãƒ¼ãƒ ã«ãƒˆãƒ¼ã‚¯ãƒ³ã‚’è¿½åŠ \n     * @param {HTMLFormElement} form - ãƒ•ã‚©ãƒ¼ãƒ è¦ç´ \n     */\n    addToForm(form) {\n        let input = form.querySelector('input[name=\"csrf_token\"]');\n        if (!input) {\n            input = document.createElement('input');\n            input.type = 'hidden';\n            input.name = 'csrf_token';\n            form.appendChild(input);\n        }\n        input.value = this.getToken() || this.generateToken();\n    },\n};\n\n/**\n * ãƒ¬ãƒ¼ãƒˆåˆ¶é™ï¼ˆãƒ–ãƒ«ãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ã‚¹å¯¾ç­–ï¼‰\n */\nconst RateLimiter = {\n    limits: new Map(),\n\n    /**\n     * ãƒ¬ãƒ¼ãƒˆåˆ¶é™ãƒã‚§ãƒƒã‚¯\n     * @param {string} key - è­˜åˆ¥ã‚­ãƒ¼\n     * @param {number} maxRequests - æœ€å¤§ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°\n     * @param {number} windowMs - æ™‚é–“çª“ï¼ˆãƒŸãƒªç§’ï¼‰\n     * @returns {Object} - åˆ¶é™æƒ…å ±\n     */\n    check(key, maxRequests = 10, windowMs = 60000) {\n        const now = Date.now();\n        let record = this.limits.get(key);\n\n        if (!record) {\n            record = { requests: [], blocked: false, blockUntil: 0 };\n            this.limits.set(key, record);\n        }\n\n        // ãƒ–ãƒ­ãƒƒã‚¯ä¸­ã‹ãƒã‚§ãƒƒã‚¯\n        if (record.blocked && now < record.blockUntil) {\n            return {\n                allowed: false,\n                remaining: 0,\n                resetAt: record.blockUntil,\n            };\n        }\n\n        // ãƒ–ãƒ­ãƒƒã‚¯è§£é™¤\n        if (record.blocked && now >= record.blockUntil) {\n            record.blocked = false;\n            record.requests = [];\n        }\n\n        // å¤ã„ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å‰Šé™¤\n        record.requests = record.requests.filter(time => now - time < windowMs);\n\n        // ãƒªã‚¯ã‚¨ã‚¹ãƒˆè¿½åŠ \n        record.requests.push(now);\n\n        // åˆ¶é™è¶…éãƒã‚§ãƒƒã‚¯\n        if (record.requests.length > maxRequests) {\n            record.blocked = true;\n            record.blockUntil = now + windowMs;\n            return {\n                allowed: false,\n                remaining: 0,\n                resetAt: record.blockUntil,\n            };\n        }\n\n        return {\n            allowed: true,\n            remaining: maxRequests - record.requests.length,\n            resetAt: now + windowMs,\n        };\n    },\n\n    /**\n     * ãƒªã‚»ãƒƒãƒˆ\n     * @param {string} key - è­˜åˆ¥ã‚­ãƒ¼\n     */\n    reset(key) {\n        this.limits.delete(key);\n    },\n};\n\n// ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°ã¨ã—ã¦ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆï¼ˆæ—¢å­˜ã‚³ãƒ¼ãƒ‰ã¨ã®äº’æ›æ€§ï¼‰\nfunction escapeHtml(str) {\n    return Security.escapeHtml(str);\n}\n\nfunction sanitizeInput(str) {\n    return Security.escapeHtml(str);\n}\n","usedDeprecatedRules":[{"ruleId":"semi","replacedBy":["@stylistic/semi"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"semi","url":"https://eslint.style/rules/semi"}}]}},{"ruleId":"quotes","replacedBy":["@stylistic/quotes"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"quotes","url":"https://eslint.style/rules/quotes"}}]}},{"ruleId":"indent","replacedBy":["@stylistic/indent"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"indent","url":"https://eslint.style/rules/indent"}}]}}]},{"filePath":"/home/runner/work/Appsuite-ITSM-Management/Appsuite-ITSM-Management/WebUI-Production/js/utils.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"semi","replacedBy":["@stylistic/semi"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"semi","url":"https://eslint.style/rules/semi"}}]}},{"ruleId":"quotes","replacedBy":["@stylistic/quotes"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"quotes","url":"https://eslint.style/rules/quotes"}}]}},{"ruleId":"indent","replacedBy":["@stylistic/indent"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"indent","url":"https://eslint.style/rules/indent"}}]}}]},{"filePath":"/home/runner/work/Appsuite-ITSM-Management/Appsuite-ITSM-Management/WebUI-Production/js/workflow.js","messages":[{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 12.","line":514,"column":1,"messageId":"wrongIndentation","endLine":514,"endColumn":13,"fix":{"range":[14123,14135],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 16.","line":515,"column":1,"messageId":"wrongIndentation","endLine":515,"endColumn":17,"fix":{"range":[14146,14162],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 12.","line":516,"column":1,"messageId":"wrongIndentation","endLine":516,"endColumn":13,"fix":{"range":[14186,14198],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 16.","line":517,"column":1,"messageId":"wrongIndentation","endLine":517,"endColumn":17,"fix":{"range":[14214,14230],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 12.","line":518,"column":1,"messageId":"wrongIndentation","endLine":518,"endColumn":13,"fix":{"range":[14254,14266],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 16.","line":519,"column":1,"messageId":"wrongIndentation","endLine":519,"endColumn":17,"fix":{"range":[14281,14297],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 12.","line":520,"column":1,"messageId":"wrongIndentation","endLine":520,"endColumn":13,"fix":{"range":[14320,14332],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 16.","line":521,"column":1,"messageId":"wrongIndentation","endLine":521,"endColumn":17,"fix":{"range":[14350,14366],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 12.","line":522,"column":1,"messageId":"wrongIndentation","endLine":522,"endColumn":13,"fix":{"range":[14387,14399],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 16.","line":523,"column":1,"messageId":"wrongIndentation","endLine":523,"endColumn":17,"fix":{"range":[14408,14424],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 12.","line":534,"column":1,"messageId":"wrongIndentation","endLine":534,"endColumn":13,"fix":{"range":[14660,14672],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 16.","line":535,"column":1,"messageId":"wrongIndentation","endLine":535,"endColumn":17,"fix":{"range":[14683,14699],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 12.","line":536,"column":1,"messageId":"wrongIndentation","endLine":536,"endColumn":13,"fix":{"range":[14725,14737],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 16.","line":537,"column":1,"messageId":"wrongIndentation","endLine":537,"endColumn":17,"fix":{"range":[14753,14769],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 12.","line":538,"column":1,"messageId":"wrongIndentation","endLine":538,"endColumn":13,"fix":{"range":[14803,14815],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 16.","line":539,"column":1,"messageId":"wrongIndentation","endLine":539,"endColumn":17,"fix":{"range":[14830,14846],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 12.","line":540,"column":1,"messageId":"wrongIndentation","endLine":540,"endColumn":13,"fix":{"range":[14872,14884],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 16.","line":541,"column":1,"messageId":"wrongIndentation","endLine":541,"endColumn":17,"fix":{"range":[14902,14918],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 12.","line":542,"column":1,"messageId":"wrongIndentation","endLine":542,"endColumn":13,"fix":{"range":[14946,14958],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 16.","line":543,"column":1,"messageId":"wrongIndentation","endLine":543,"endColumn":17,"fix":{"range":[14967,14983],"text":"            "}}],"suppressedMessages":[],"errorCount":20,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":20,"fixableWarningCount":0,"source":"/**\n * WorkflowEngine - ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚¨ãƒ³ã‚¸ãƒ³\n *\n * ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹é·ç§»ç®¡ç†ã€SLAç›£è¦–ã€ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å‡¦ç†ã‚’æ‹…å½“\n *\n * @version 1.0.0\n * @since Sprint 3\n */\n\nconst WorkflowEngine = {\n    // ========================================\n    // è¨­å®šå®šæ•°\n    // ========================================\n\n    /** SLAç›£è¦–é–“éš”ï¼ˆãƒŸãƒªç§’ï¼‰- 1åˆ† */\n    SLA_CHECK_INTERVAL: 60000,\n\n    /** SLAç›£è¦–ã‚¿ã‚¤ãƒãƒ¼ID */\n    slaTimerId: null,\n\n    /** åˆæœŸåŒ–æ¸ˆã¿ãƒ•ãƒ©ã‚° */\n    initialized: false,\n\n    // ========================================\n    // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹é·ç§»ãƒ«ãƒ¼ãƒ«\n    // ========================================\n\n    /**\n     * ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹é·ç§»ãƒ«ãƒ¼ãƒ«\n     * ã‚­ãƒ¼: ç¾åœ¨ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹\n     * å€¤: é·ç§»å¯èƒ½ãªã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®é…åˆ—\n     */\n    INCIDENT_TRANSITIONS: {\n        open: ['in_progress', 'closed'],\n        in_progress: ['resolved', 'open'],\n        resolved: ['closed', 'in_progress'],\n        closed: ['in_progress'],\n    },\n\n    /**\n     * ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®è¡¨ç¤ºå\n     */\n    INCIDENT_STATUS_LABELS: {\n        open: 'ã‚ªãƒ¼ãƒ—ãƒ³',\n        in_progress: 'å¯¾å¿œä¸­',\n        resolved: 'è§£æ±ºæ¸ˆã¿',\n        closed: 'ã‚¯ãƒ­ãƒ¼ã‚º',\n    },\n\n    /**\n     * å¤‰æ›´è¦æ±‚ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹é·ç§»ãƒ«ãƒ¼ãƒ«\n     */\n    CHANGE_TRANSITIONS: {\n        draft: ['pending'],\n        pending: ['approved', 'rejected'],\n        approved: ['in_progress'],\n        in_progress: ['completed'],\n        completed: [],\n        rejected: [],\n    },\n\n    /**\n     * å¤‰æ›´è¦æ±‚ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®è¡¨ç¤ºå\n     */\n    CHANGE_STATUS_LABELS: {\n        draft: 'ä¸‹æ›¸ã',\n        pending: 'æ‰¿èªå¾…ã¡',\n        approved: 'æ‰¿èªæ¸ˆã¿',\n        in_progress: 'å®Ÿæ–½ä¸­',\n        completed: 'å®Œäº†',\n        rejected: 'å´ä¸‹',\n    },\n\n    // ========================================\n    // SLAå®šç¾©\n    // ========================================\n\n    /**\n     * SLAå®šç¾©ï¼ˆãƒŸãƒªç§’ï¼‰\n     * response: å¿œç­”æ™‚é–“ï¼ˆæœ€åˆã®å¯¾å¿œã¾ã§ï¼‰\n     * resolution: è§£æ±ºæ™‚é–“ï¼ˆã‚¯ãƒ­ãƒ¼ã‚ºã¾ã§ï¼‰\n     */\n    SLA_DEFINITIONS: {\n        high: {\n            response: 1 * 60 * 60 * 1000, // 1æ™‚é–“\n            resolution: 4 * 60 * 60 * 1000, // 4æ™‚é–“\n        },\n        medium: {\n            response: 4 * 60 * 60 * 1000, // 4æ™‚é–“\n            resolution: 24 * 60 * 60 * 1000, // 24æ™‚é–“\n        },\n        low: {\n            response: 24 * 60 * 60 * 1000, // 24æ™‚é–“\n            resolution: 72 * 60 * 60 * 1000, // 72æ™‚é–“\n        },\n    },\n\n    // ========================================\n    // åˆæœŸåŒ–ãƒ»ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—\n    // ========================================\n\n    /**\n     * ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚¨ãƒ³ã‚¸ãƒ³ã‚’åˆæœŸåŒ–\n     */\n    init() {\n        if (this.initialized) {\n            console.warn('WorkflowEngine: æ—¢ã«åˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã™');\n            return;\n        }\n\n        console.log('WorkflowEngine: åˆæœŸåŒ–é–‹å§‹');\n\n        // SLAç›£è¦–ã‚’é–‹å§‹\n        this.startSlaMonitoring();\n\n        this.initialized = true;\n        console.log('WorkflowEngine: åˆæœŸåŒ–å®Œäº†');\n    },\n\n    /**\n     * ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å‡¦ç†\n     */\n    cleanup() {\n        this.stopSlaMonitoring();\n        this.initialized = false;\n        console.log('WorkflowEngine: ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å®Œäº†');\n    },\n\n    // ========================================\n    // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹é·ç§»æ¤œè¨¼\n    // ========================================\n\n    /**\n     * ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹é·ç§»ã‚’æ¤œè¨¼\n     * @param {string} fromStatus - ç¾åœ¨ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹\n     * @param {string} toStatus - é·ç§»å…ˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹\n     * @returns {Object} { valid: boolean, message: string }\n     */\n    isValidIncidentTransition(fromStatus, toStatus) {\n        // åŒä¸€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¸ã®é·ç§»ã¯å¸¸ã«è¨±å¯\n        if (fromStatus === toStatus) {\n            return { valid: true, message: '' };\n        }\n\n        const allowedTransitions = this.INCIDENT_TRANSITIONS[fromStatus] || [];\n        const valid = allowedTransitions.includes(toStatus);\n\n        if (valid) {\n            return { valid: true, message: '' };\n        }\n\n        const fromLabel = this.INCIDENT_STATUS_LABELS[fromStatus] || fromStatus;\n        const toLabel = this.INCIDENT_STATUS_LABELS[toStatus] || toStatus;\n\n        return {\n            valid: false,\n            message: `ã€Œ${fromLabel}ã€ã‹ã‚‰ã€Œ${toLabel}ã€ã¸ã®é·ç§»ã¯è¨±å¯ã•ã‚Œã¦ã„ã¾ã›ã‚“`,\n        };\n    },\n\n    /**\n     * å¤‰æ›´è¦æ±‚ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹é·ç§»ã‚’æ¤œè¨¼\n     * @param {string} fromStatus - ç¾åœ¨ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹\n     * @param {string} toStatus - é·ç§»å…ˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹\n     * @returns {Object} { valid: boolean, message: string }\n     */\n    isValidChangeTransition(fromStatus, toStatus) {\n        // åŒä¸€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¸ã®é·ç§»ã¯å¸¸ã«è¨±å¯\n        if (fromStatus === toStatus) {\n            return { valid: true, message: '' };\n        }\n\n        const allowedTransitions = this.CHANGE_TRANSITIONS[fromStatus] || [];\n        const valid = allowedTransitions.includes(toStatus);\n\n        if (valid) {\n            return { valid: true, message: '' };\n        }\n\n        const fromLabel = this.CHANGE_STATUS_LABELS[fromStatus] || fromStatus;\n        const toLabel = this.CHANGE_STATUS_LABELS[toStatus] || toStatus;\n\n        return {\n            valid: false,\n            message: `ã€Œ${fromLabel}ã€ã‹ã‚‰ã€Œ${toLabel}ã€ã¸ã®é·ç§»ã¯è¨±å¯ã•ã‚Œã¦ã„ã¾ã›ã‚“`,\n        };\n    },\n\n    /**\n     * åˆ©ç”¨å¯èƒ½ãªé·ç§»å…ˆã‚’å–å¾—\n     * @param {string} type - 'incident' ã¾ãŸã¯ 'change'\n     * @param {string} currentStatus - ç¾åœ¨ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹\n     * @returns {Array<{value: string, label: string}>} é·ç§»å¯èƒ½ãªã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ä¸€è¦§\n     */\n    getAvailableTransitions(type, currentStatus) {\n        let transitions, labels;\n\n        if (type === 'incident') {\n            transitions = this.INCIDENT_TRANSITIONS[currentStatus] || [];\n            labels = this.INCIDENT_STATUS_LABELS;\n        } else if (type === 'change') {\n            transitions = this.CHANGE_TRANSITIONS[currentStatus] || [];\n            labels = this.CHANGE_STATUS_LABELS;\n        } else {\n            return [];\n        }\n\n        // ç¾åœ¨ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚‚é¸æŠè‚¢ã«å«ã‚ã‚‹\n        const result = [\n            {\n                value: currentStatus,\n                label: labels[currentStatus] || currentStatus,\n            },\n        ];\n\n        transitions.forEach(status => {\n            result.push({\n                value: status,\n                label: labels[status] || status,\n            });\n        });\n\n        return result;\n    },\n\n    // ========================================\n    // SLAç®¡ç†\n    // ========================================\n\n    /**\n     * SLAç›£è¦–ã‚’é–‹å§‹\n     */\n    startSlaMonitoring() {\n        if (this.slaTimerId) {\n            console.warn('WorkflowEngine: SLAç›£è¦–ã¯æ—¢ã«é–‹å§‹ã•ã‚Œã¦ã„ã¾ã™');\n            return;\n        }\n\n        // åˆå›ãƒã‚§ãƒƒã‚¯\n        this.checkSlaViolations();\n\n        // å®šæœŸãƒã‚§ãƒƒã‚¯é–‹å§‹\n        this.slaTimerId = setInterval(() => {\n            this.checkSlaViolations();\n            this.processEscalations();\n        }, this.SLA_CHECK_INTERVAL);\n\n        console.log('WorkflowEngine: SLAç›£è¦–ã‚’é–‹å§‹ã—ã¾ã—ãŸï¼ˆé–“éš”: 1åˆ†ï¼‰');\n    },\n\n    /**\n     * SLAç›£è¦–ã‚’åœæ­¢\n     */\n    stopSlaMonitoring() {\n        if (this.slaTimerId) {\n            clearInterval(this.slaTimerId);\n            this.slaTimerId = null;\n            console.log('WorkflowEngine: SLAç›£è¦–ã‚’åœæ­¢ã—ã¾ã—ãŸ');\n        }\n    },\n\n    /**\n     * ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã®SLAã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’å–å¾—\n     * @param {Object} incident - ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ\n     * @returns {Object} { status: 'ok'|'warning'|'breach', remaining: number|null, deadline: Date|null, message: string }\n     */\n    getSlaStatus(incident) {\n        // ã‚¯ãƒ­ãƒ¼ã‚ºæ¸ˆã¿ã¾ãŸã¯è§£æ±ºæ¸ˆã¿ã¯SLAå¯¾è±¡å¤–\n        if (incident.status === 'closed' || incident.status === 'resolved') {\n            return {\n                status: 'completed',\n                remaining: null,\n                deadline: null,\n                message: 'SLAè©•ä¾¡å®Œäº†',\n            };\n        }\n\n        const priority = incident.priority || 'medium';\n        const sla = this.SLA_DEFINITIONS[priority];\n\n        if (!sla) {\n            return {\n                status: 'unknown',\n                remaining: null,\n                deadline: null,\n                message: 'SLAå®šç¾©ãªã—',\n            };\n        }\n\n        // ä½œæˆæ—¥æ™‚ã‚’å–å¾—\n        const created = new Date(incident.created || incident.createdAt || incident.reportedAt);\n        if (isNaN(created.getTime())) {\n            return {\n                status: 'unknown',\n                remaining: null,\n                deadline: null,\n                message: 'ä½œæˆæ—¥æ™‚ä¸æ˜',\n            };\n        }\n\n        const now = new Date();\n        const deadline = new Date(created.getTime() + sla.resolution);\n        const remaining = deadline.getTime() - now.getTime();\n\n        let status = 'ok';\n        let message = '';\n\n        if (remaining <= 0) {\n            status = 'breach';\n            message = `SLAè¶…é: ${this.formatDuration(Math.abs(remaining))}è¶…é`;\n        } else if (remaining <= sla.resolution * 0.25) {\n            status = 'warning';\n            message = `SLAè­¦å‘Š: æ®‹ã‚Š${this.formatDuration(remaining)}`;\n        } else {\n            message = `æ®‹ã‚Š${this.formatDuration(remaining)}`;\n        }\n\n        return { status, remaining, deadline, message };\n    },\n\n    /**\n     * SLAæœŸé™ã‚’è¨ˆç®—\n     * @param {Object} incident - ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ\n     * @returns {Object} { response: Date, resolution: Date }\n     */\n    calculateSlaDeadline(incident) {\n        const priority = incident.priority || 'medium';\n        const sla = this.SLA_DEFINITIONS[priority];\n        const created = new Date(incident.created || incident.createdAt || incident.reportedAt);\n\n        return {\n            response: new Date(created.getTime() + sla.response),\n            resolution: new Date(created.getTime() + sla.resolution),\n        };\n    },\n\n    /**\n     * SLAé•åã‚’ãƒã‚§ãƒƒã‚¯\n     * @returns {Object} { violations: Array, warnings: Array }\n     */\n    checkSlaViolations() {\n        // DataStoreãŒåˆ©ç”¨å¯èƒ½ã‹ãƒã‚§ãƒƒã‚¯\n        if (typeof DataStore === 'undefined' || !DataStore.incidents) {\n            return { violations: [], warnings: [] };\n        }\n\n        const activeIncidents = DataStore.incidents.filter(\n            i => i.status !== 'closed' && i.status !== 'resolved'\n        );\n\n        const violations = [];\n        const warnings = [];\n\n        activeIncidents.forEach(incident => {\n            const slaStatus = this.getSlaStatus(incident);\n\n            if (slaStatus.status === 'breach') {\n                violations.push({\n                    incident,\n                    slaStatus,\n                });\n            } else if (slaStatus.status === 'warning') {\n                warnings.push({\n                    incident,\n                    slaStatus,\n                });\n            }\n        });\n\n        // é€šçŸ¥å‡¦ç†ï¼ˆNotificationManagerãŒåˆ©ç”¨å¯èƒ½ãªå ´åˆï¼‰\n        if (typeof NotificationManager !== 'undefined') {\n            if (violations.length > 0) {\n                NotificationManager.notifySlaViolation(violations.map(v => v.incident));\n            }\n            if (warnings.length > 0) {\n                NotificationManager.notifySlaWarning(warnings.map(w => w.incident));\n            }\n        }\n\n        return { violations, warnings };\n    },\n\n    // ========================================\n    // ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å‡¦ç†\n    // ========================================\n\n    /**\n     * ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å‡¦ç†ã‚’å®Ÿè¡Œ\n     */\n    processEscalations() {\n        // DataStoreã¨SettingsModuleãŒåˆ©ç”¨å¯èƒ½ã‹ãƒã‚§ãƒƒã‚¯\n        if (typeof DataStore === 'undefined' || !DataStore.incidents) {\n            return;\n        }\n\n        // è¨­å®šã‹ã‚‰ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æœŸé™ã‚’å–å¾—\n        let escalationHours = 24; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ24æ™‚é–“\n        if (typeof SettingsModule !== 'undefined') {\n            const settings = SettingsModule.load();\n            escalationHours = settings.workflow?.incidentEscalation || 24;\n        }\n\n        const escalationMs = escalationHours * 60 * 60 * 1000;\n\n        // ã‚ªãƒ¼ãƒ—ãƒ³çŠ¶æ…‹ã‹ã¤æœªã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ãƒˆã®ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã‚’å–å¾—\n        const candidates = DataStore.incidents.filter(i => i.status === 'open' && !i.escalated);\n\n        const now = new Date();\n\n        candidates.forEach(incident => {\n            const created = new Date(incident.created || incident.createdAt || incident.reportedAt);\n\n            if (now.getTime() - created.getTime() > escalationMs) {\n                this.escalateIncident(incident);\n            }\n        });\n    },\n\n    /**\n     * ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã‚’ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ãƒˆ\n     * @param {Object} incident - ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ\n     */\n    escalateIncident(incident) {\n        incident.escalated = true;\n        incident.escalatedAt = new Date().toISOString();\n\n        // è‡ªå‹•ã‚¢ã‚µã‚¤ãƒ³ï¼ˆè¨­å®šãŒã‚ã‚‹å ´åˆï¼‰\n        if (typeof SettingsModule !== 'undefined') {\n            const settings = SettingsModule.load();\n            if (\n                settings.workflow?.incidentAutoAssign &&\n                settings.workflow?.incidentDefaultAssignee\n            ) {\n                incident.assignee = settings.workflow.incidentDefaultAssignee;\n            }\n        }\n\n        // é€šçŸ¥\n        if (typeof NotificationManager !== 'undefined') {\n            NotificationManager.notifyEscalation(incident);\n        }\n\n        // ãƒ­ã‚°è¨˜éŒ²\n        if (typeof LogModule !== 'undefined') {\n            LogModule.addLog(\n                'escalation',\n                'ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ',\n                'incident',\n                `ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³: ${incident.id} - ${incident.title}`\n            );\n        }\n\n        console.log(`WorkflowEngine: ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ ${incident.id} ã‚’ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ãƒˆã—ã¾ã—ãŸ`);\n    },\n\n    /**\n     * ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¬ãƒ™ãƒ«ã‚’å–å¾—\n     * @param {Object} incident - ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ\n     * @returns {number} ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¬ãƒ™ãƒ«ï¼ˆ0-3ï¼‰\n     */\n    getEscalationLevel(incident) {\n        if (!incident.escalated) {\n            return 0; // æœªã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ãƒˆ\n        }\n\n        const escalatedAt = new Date(incident.escalatedAt);\n        const now = new Date();\n        const hoursSinceEscalation = (now.getTime() - escalatedAt.getTime()) / (60 * 60 * 1000);\n\n        if (hoursSinceEscalation < 2) {\n            return 1; // ãƒ¬ãƒ™ãƒ«1: ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ãƒˆç›´å¾Œ\n        } else if (hoursSinceEscalation < 8) {\n            return 2; // ãƒ¬ãƒ™ãƒ«2: 2-8æ™‚é–“\n        } else {\n            return 3; // ãƒ¬ãƒ™ãƒ«3: 8æ™‚é–“ä»¥ä¸Š\n        }\n    },\n\n    // ========================================\n    // ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£\n    // ========================================\n\n    /**\n     * æ™‚é–“ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ\n     * @param {number} ms - ãƒŸãƒªç§’\n     * @returns {string} ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã•ã‚ŒãŸæ™‚é–“æ–‡å­—åˆ—\n     */\n    formatDuration(ms) {\n        if (ms < 0) {\n            ms = 0;\n        }\n\n        const hours = Math.floor(ms / (60 * 60 * 1000));\n        const minutes = Math.floor((ms % (60 * 60 * 1000)) / (60 * 1000));\n\n        if (hours > 24) {\n            const days = Math.floor(hours / 24);\n            const remainingHours = hours % 24;\n            return `${days}æ—¥${remainingHours}æ™‚é–“`;\n        } else if (hours > 0) {\n            return `${hours}æ™‚é–“${minutes}åˆ†`;\n        } else {\n            return `${minutes}åˆ†`;\n        }\n    },\n\n    /**\n     * ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒƒã‚¸ã®ã‚¯ãƒ©ã‚¹ã‚’å–å¾—\n     * @param {string} slaStatus - SLAã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹\n     * @returns {string} CSSã‚¯ãƒ©ã‚¹å\n     */\n    getSlaStatusBadgeClass(slaStatus) {\n        switch (slaStatus) {\n            case 'ok':\n                return 'badge-success';\n            case 'warning':\n                return 'badge-warning';\n            case 'breach':\n                return 'badge-danger';\n            case 'completed':\n                return 'badge-info';\n            default:\n                return 'badge-secondary';\n        }\n    },\n\n    /**\n     * ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒƒã‚¸ã®ã‚¢ã‚¤ã‚³ãƒ³ã‚’å–å¾—\n     * @param {string} slaStatus - SLAã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹\n     * @returns {string} Font Awesomeã‚¢ã‚¤ã‚³ãƒ³ã‚¯ãƒ©ã‚¹\n     */\n    getSlaStatusIcon(slaStatus) {\n        switch (slaStatus) {\n            case 'ok':\n                return 'fa-check-circle';\n            case 'warning':\n                return 'fa-exclamation-triangle';\n            case 'breach':\n                return 'fa-times-circle';\n            case 'completed':\n                return 'fa-flag-checkered';\n            default:\n                return 'fa-question-circle';\n        }\n    },\n};\n\n// ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«å…¬é–‹\nwindow.WorkflowEngine = WorkflowEngine;\n","usedDeprecatedRules":[{"ruleId":"semi","replacedBy":["@stylistic/semi"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"semi","url":"https://eslint.style/rules/semi"}}]}},{"ruleId":"quotes","replacedBy":["@stylistic/quotes"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"quotes","url":"https://eslint.style/rules/quotes"}}]}},{"ruleId":"indent","replacedBy":["@stylistic/indent"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"indent","url":"https://eslint.style/rules/indent"}}]}}]}]
