# Phase 1: ユースケース分析

**作成日**: 2026年1月21日
**Phase**: Phase 1 - 要件定義
**ベース**: ITIL準拠ITSMプロセス

---

## 📋 目次

1. [ユースケース概要](#1-ユースケース概要)
2. [アクター定義](#2-アクター定義)
3. [主要ユースケース一覧](#3-主要ユースケース一覧)
4. [詳細ユースケース](#4-詳細ユースケース)
5. [ユースケース図](#5-ユースケース図)

---

## 1. ユースケース概要

### 1.1 目的
AppSuite管理運用システムの機能を、利用者（アクター）の視点から整理し、システムが提供すべき価値を明確化する。

### 1.2 範囲
- ダッシュボード機能
- ユーザー管理機能
- アプリ管理機能
- インシデント管理機能
- 変更管理機能
- 監査ログ機能
- システム設定機能

---

## 2. アクター定義

### プライマリアクター（システムの主要利用者）

| アクター名 | 説明 | 主な目的 |
|-----------|------|---------|
| **IT管理者** | システム全体を管理する管理者権限ユーザー | システム全体の設定・管理・監視 |
| **サービスデスク担当者** | インシデント受付・一次対応を行う | インシデントの登録・分類・初期対応 |
| **技術担当者** | インシデント解決・技術対応を行う | インシデント調査・解決・変更実装 |
| **一般ユーザー** | システムの閲覧権限のみを持つユーザー | 情報の閲覧・検索 |

### セカンダリアクター（外部システム）

| アクター名 | 説明 | 関係 |
|-----------|------|------|
| **DeskNet's Neo API** | DeskNet's Neoシステムとの連携 | ユーザー情報・アプリ情報の同期 |
| **メール送信システム** | 通知メールの送信 | インシデント・変更通知 |
| **監視システム** | 外部監視ツール | インシデント自動登録 |

---

## 3. 主要ユースケース一覧

### 3.1 認証・セッション管理

| UC-ID | ユースケース名 | アクター | 優先度 |
|-------|---------------|---------|--------|
| UC-AUTH-001 | ログイン | 全ユーザー | 必須 |
| UC-AUTH-002 | ログアウト | 全ユーザー | 必須 |
| UC-AUTH-003 | セッションタイムアウト | システム | 必須 |

### 3.2 ダッシュボード

| UC-ID | ユースケース名 | アクター | 優先度 |
|-------|---------------|---------|--------|
| UC-DASH-001 | ダッシュボード表示 | 全ユーザー | 必須 |
| UC-DASH-002 | 統計情報の更新 | システム | 必須 |
| UC-DASH-003 | 最近の操作ログ表示 | 全ユーザー | 必須 |

### 3.3 ユーザー管理

| UC-ID | ユースケース名 | アクター | 優先度 |
|-------|---------------|---------|--------|
| UC-USER-001 | ユーザー一覧表示 | IT管理者 | 必須 |
| UC-USER-002 | ユーザー検索 | IT管理者 | 必須 |
| UC-USER-003 | ユーザー新規登録 | IT管理者 | 必須 |
| UC-USER-004 | ユーザー情報編集 | IT管理者 | 必須 |
| UC-USER-005 | ユーザー削除 | IT管理者 | 必須 |
| UC-USER-006 | ユーザーフィルタリング | IT管理者 | 推奨 |
| UC-USER-007 | ユーザーエクスポート | IT管理者 | オプション |

### 3.4 アプリ管理

| UC-ID | ユースケース名 | アクター | 優先度 |
|-------|---------------|---------|--------|
| UC-APP-001 | アプリ一覧表示 | IT管理者 | 必須 |
| UC-APP-002 | アプリ検索 | IT管理者 | 必須 |
| UC-APP-003 | アプリ詳細表示 | IT管理者 | 必須 |
| UC-APP-004 | アプリ登録 | IT管理者 | 必須 |
| UC-APP-005 | アプリ情報編集 | IT管理者 | 必須 |
| UC-APP-006 | アプリ削除 | IT管理者 | 必須 |
| UC-APP-007 | アプリカテゴリ管理 | IT管理者 | 推奨 |

### 3.5 インシデント管理

| UC-ID | ユースケース名 | アクター | 優先度 |
|-------|---------------|---------|--------|
| UC-INC-001 | インシデント一覧表示 | サービスデスク、技術担当者 | 必須 |
| UC-INC-002 | インシデント検索 | サービスデスク、技術担当者 | 必須 |
| UC-INC-003 | インシデント新規登録 | サービスデスク | 必須 |
| UC-INC-004 | インシデント詳細表示 | サービスデスク、技術担当者 | 必須 |
| UC-INC-005 | インシデント編集 | サービスデスク、技術担当者 | 必須 |
| UC-INC-006 | 優先度設定・変更 | サービスデスク | 必須 |
| UC-INC-007 | 担当者アサイン | サービスデスク | 必須 |
| UC-INC-008 | ステータス変更 | サービスデスク、技術担当者 | 必須 |
| UC-INC-009 | コメント追加 | サービスデスク、技術担当者 | 必須 |
| UC-INC-010 | インシデントクローズ | サービスデスク、技術担当者 | 必須 |
| UC-INC-011 | インシデントフィルタリング | サービスデスク、技術担当者 | 推奨 |
| UC-INC-012 | SLA状況確認 | IT管理者、サービスデスク | 推奨 |

### 3.6 変更管理

| UC-ID | ユースケース名 | アクター | 優先度 |
|-------|---------------|---------|--------|
| UC-CHG-001 | 変更要求一覧表示 | IT管理者、技術担当者 | 必須 |
| UC-CHG-002 | 変更要求検索 | IT管理者、技術担当者 | 必須 |
| UC-CHG-003 | 変更要求新規登録 | IT管理者、技術担当者 | 必須 |
| UC-CHG-004 | 変更要求詳細表示 | IT管理者、技術担当者 | 必須 |
| UC-CHG-005 | 変更要求編集 | IT管理者、技術担当者 | 必須 |
| UC-CHG-006 | 変更要求の承認 | IT管理者 | 必須 |
| UC-CHG-007 | 変更要求の却下 | IT管理者 | 必須 |
| UC-CHG-008 | 変更実施記録 | 技術担当者 | 必須 |
| UC-CHG-009 | 変更レビュー | IT管理者 | 推奨 |
| UC-CHG-010 | 変更フィルタリング | IT管理者、技術担当者 | 推奨 |

### 3.7 監査ログ

| UC-ID | ユースケース名 | アクター | 優先度 |
|-------|---------------|---------|--------|
| UC-LOG-001 | 監査ログ一覧表示 | IT管理者 | 必須 |
| UC-LOG-002 | 監査ログ検索 | IT管理者 | 必須 |
| UC-LOG-003 | 監査ログフィルタリング | IT管理者 | 必須 |
| UC-LOG-004 | 監査ログ詳細表示 | IT管理者 | 必須 |
| UC-LOG-005 | 監査ログエクスポート | IT管理者 | 推奨 |

### 3.8 システム設定

| UC-ID | ユースケース名 | アクター | 優先度 |
|-------|---------------|---------|--------|
| UC-SET-001 | システム設定表示 | IT管理者 | 必須 |
| UC-SET-002 | API連携設定 | IT管理者 | 必須 |
| UC-SET-003 | セキュリティ設定 | IT管理者 | 必須 |
| UC-SET-004 | 通知設定 | IT管理者 | 推奨 |
| UC-SET-005 | ワークフロー設定 | IT管理者 | 推奨 |

---

## 4. 詳細ユースケース

### 4.1 UC-INC-003: インシデント新規登録

#### 基本情報
- **UC-ID**: UC-INC-003
- **ユースケース名**: インシデント新規登録
- **アクター**: サービスデスク担当者
- **目的**: ユーザーから報告されたインシデントをシステムに登録する
- **事前条件**: ユーザーがログイン済み、サービスデスク権限を保持
- **事後条件**: インシデントが登録され、一意のインシデントIDが発行される

#### 主要シナリオ（正常系）

| ステップ | アクション | システム応答 |
|---------|-----------|-------------|
| 1 | ユーザーがインシデント管理画面を開く | インシデント一覧が表示される |
| 2 | ユーザーが「新規登録」ボタンをクリック | 新規登録モーダルが表示される |
| 3 | ユーザーが必須項目を入力<br>- タイトル<br>- 説明<br>- 関連アプリ<br>- 優先度 | 入力内容がリアルタイムバリデーションされる |
| 4 | ユーザーが「登録」ボタンをクリック | システムがデータを検証する |
| 5 | - | インシデントIDが自動採番される（INC-YYYYMMDD-001形式） |
| 6 | - | インシデントがデータベースに保存される |
| 7 | - | 監査ログに操作記録が保存される |
| 8 | - | 成功メッセージが表示される |
| 9 | - | インシデント詳細画面に遷移する |

#### 代替シナリオ（異常系）

**4a. 必須項目が未入力**
- システムがエラーメッセージを表示
- 未入力項目が赤枠で強調表示される
- ユーザーがステップ3に戻る

**4b. タイトルが重複**
- システムが警告メッセージを表示
- ユーザーに登録継続の確認を行う
- 確認後、登録を続行するか中止するか選択

**4c. サーバーエラー**
- システムがエラーメッセージを表示
- 入力データは保持される
- 再試行またはキャンセル可能

#### 入力項目

| 項目名 | 必須 | データ型 | 制約 |
|--------|-----|---------|------|
| タイトル | ○ | 文字列 | 1-100文字 |
| 説明 | ○ | テキスト | 1-2000文字 |
| 関連アプリ | ○ | 選択 | apps.id |
| 優先度 | ○ | 選択 | P1-P5 |
| カテゴリ | × | 選択 | ハード/ソフト/ネットワーク/その他 |
| 報告者 | × | 選択 | users.id（デフォルト：ログインユーザー） |
| 担当者 | × | 選択 | users.id |

#### ビジネスルール
- インシデントIDは「INC-YYYYMMDD-連番」形式で自動採番
- 報告者が未指定の場合、ログインユーザーが報告者になる
- ステータスは初期値「New」で登録される
- 作成日時・更新日時は自動設定

#### 非機能要件
- **応答時間**: 登録処理は3秒以内に完了
- **セキュリティ**: XSS対策としてすべての入力をエスケープ
- **監査**: すべての登録操作を監査ログに記録

---

### 4.2 UC-CHG-006: 変更要求の承認

#### 基本情報
- **UC-ID**: UC-CHG-006
- **ユースケース名**: 変更要求の承認
- **アクター**: IT管理者
- **目的**: 提出された変更要求を審査し、承認または却下する
- **事前条件**: 変更要求が登録済み、ステータスが「承認待ち」
- **事後条件**: 変更要求のステータスが「承認済み」または「却下」に更新

#### 主要シナリオ（承認）

| ステップ | アクション | システム応答 |
|---------|-----------|-------------|
| 1 | ユーザーが変更管理画面を開く | 変更要求一覧が表示される |
| 2 | ユーザーが承認待ちの変更をフィルタリング | 承認待ち変更のみが表示される |
| 3 | ユーザーが変更要求をクリック | 変更詳細モーダルが表示される |
| 4 | ユーザーが変更内容を確認<br>- 変更内容<br>- リスク評価<br>- 影響範囲 | 詳細情報が表示される |
| 5 | ユーザーが「承認」ボタンをクリック | 承認確認ダイアログが表示される |
| 6 | ユーザーがコメントを入力（オプション） | - |
| 7 | ユーザーが「確認」ボタンをクリック | ステータスが「承認済み」に更新される |
| 8 | - | 承認日時・承認者が記録される |
| 9 | - | 監査ログに操作記録が保存される |
| 10 | - | 申請者に承認通知メールが送信される |
| 11 | - | 成功メッセージが表示される |

#### 代替シナリオ（却下）

| ステップ | アクション | システム応答 |
|---------|-----------|-------------|
| 5a | ユーザーが「却下」ボタンをクリック | 却下理由入力ダイアログが表示される |
| 6a | ユーザーが却下理由を入力（必須） | - |
| 7a | ユーザーが「確認」ボタンをクリック | ステータスが「却下」に更新される |
| 8a | - | 却下日時・却下者・却下理由が記録される |
| 9a | - | 監査ログに操作記録が保存される |
| 10a | - | 申請者に却下通知メールが送信される |

#### ビジネスルール
- 承認できるのはIT管理者権限のみ
- 却下時は却下理由の記入が必須
- 承認後の変更要求の取り消しは不可（新規変更要求が必要）
- 承認・却下の履歴は変更履歴として保存

---

### 4.3 UC-USER-003: ユーザー新規登録

#### 基本情報
- **UC-ID**: UC-USER-003
- **ユースケース名**: ユーザー新規登録
- **アクター**: IT管理者
- **目的**: 新規ユーザーをシステムに登録する
- **事前条件**: IT管理者権限を持つユーザーがログイン済み
- **事後条件**: 新規ユーザーが登録され、システムにログイン可能になる

#### 主要シナリオ

| ステップ | アクション | システム応答 |
|---------|-----------|-------------|
| 1 | ユーザーがユーザー管理画面を開く | ユーザー一覧が表示される |
| 2 | ユーザーが「新規登録」ボタンをクリック | 新規登録モーダルが表示される |
| 3 | ユーザーが必須項目を入力<br>- ユーザー名<br>- メールアドレス<br>- パスワード<br>- 部署<br>- 権限 | 入力内容がリアルタイムバリデーションされる |
| 4 | ユーザーが「登録」ボタンをクリック | システムがデータを検証する |
| 5 | - | メールアドレスの重複チェック |
| 6 | - | パスワードがハッシュ化される |
| 7 | - | ユーザーIDが自動採番される |
| 8 | - | ユーザー情報がデータベースに保存される |
| 9 | - | 監査ログに操作記録が保存される |
| 10 | - | 成功メッセージが表示される |
| 11 | - | ユーザー一覧画面が更新される |

#### 入力項目

| 項目名 | 必須 | データ型 | 制約 |
|--------|-----|---------|------|
| ユーザー名 | ○ | 文字列 | 2-50文字 |
| メールアドレス | ○ | メール | RFC準拠、重複不可 |
| パスワード | ○ | 文字列 | 8-128文字、英数字記号混在 |
| 部署 | ○ | 文字列 | 1-100文字 |
| 権限 | ○ | 選択 | 管理者/ユーザー |
| ステータス | × | 選択 | デフォルト：有効 |

#### ビジネスルール
- メールアドレスは一意（重複不可）
- パスワードは8文字以上、英大小文字・数字・記号を含む
- 初期ステータスは「有効」
- ユーザーIDは「U」+連番（例: U0001）で自動採番

---

## 5. ユースケース図

### 5.1 システム全体ユースケース図

```
                    AppSuite管理運用システム
   ┌────────────────────────────────────────────────────┐
   │                                                    │
   │  ┌──────────────┐                                 │
   │  │ダッシュボード │                                 │
   │  └──────────────┘                                 │
   │         △                                         │
   │         │                                         │
   │   ┌─────┴────┬───────────┬──────────┐            │
   │   │          │           │          │            │
   │  (IT管理者)(サービス  (技術担当者)(一般       │
   │              デスク)                ユーザー)    │
   │   │          │           │          │            │
   │   ├──────────┤           │          │            │
   │   │ユーザー  │           │          │            │
   │   │管理      │           │          │            │
   │   ├──────────┤           │          │            │
   │   │アプリ    │           │          │            │
   │   │管理      │           │          │            │
   │   │          ├───────────┤          │            │
   │   │          │インシデント│          │            │
   │   │          │管理      │          │            │
   │   ├──────────┼───────────┤          │            │
   │   │変更      │           │          │            │
   │   │管理      │           │          │            │
   │   ├──────────┤           │          │            │
   │   │監査ログ  │           │          │            │
   │   ├──────────┤           │          │            │
   │   │システム  │           │          │            │
   │   │設定      │           │          │            │
   │   └──────────┘           │          │            │
   │                          │          │            │
   │              ┌───────────┴──────────┘            │
   │              │                                   │
   │         ┌────▼────┐                              │
   │         │ログイン │                              │
   │         └─────────┘                              │
   │                                                    │
   └────────────────────────────────────────────────────┘
                         △
                         │
                         ▼
              ┌──────────────────┐
              │DeskNet's Neo API │
              └──────────────────┘
```

### 5.2 インシデント管理ユースケース図

```
   インシデント管理
   ┌─────────────────────────────────────┐
   │                                     │
   │  (サービスデスク担当者)              │
   │         │                           │
   │         ├─→ インシデント一覧表示    │
   │         ├─→ インシデント検索        │
   │         ├─→ インシデント新規登録    │
   │         │       │                   │
   │         │       │ «extend»          │
   │         │       ├─→ 優先度設定      │
   │         │       └─→ 担当者アサイン  │
   │         │                           │
   │         ├─→ インシデント編集        │
   │         ├─→ コメント追加            │
   │         └─→ ステータス変更          │
   │                                     │
   │  (技術担当者)                        │
   │         │                           │
   │         ├─→ インシデント詳細表示    │
   │         ├─→ インシデント編集        │
   │         ├─→ コメント追加            │
   │         └─→ インシデントクローズ    │
   │                                     │
   └─────────────────────────────────────┘
```

---

## 📊 ユースケース優先度サマリー

| 優先度 | ユースケース数 | 説明 |
|--------|--------------|------|
| 必須 | 52 | MVP（Minimum Viable Product）に含める |
| 推奨 | 15 | Phase 3で実装 |
| オプション | 5 | 将来的な拡張機能 |

**合計**: 72ユースケース

---

## ✅ レビューチェックリスト

- [ ] すべてのアクターが定義されている
- [ ] ユースケースに漏れがない
- [ ] ユースケース間の関係が明確
- [ ] 優先度が適切に設定されている
- [ ] 詳細ユースケースの記述が完全
- [ ] ステークホルダーレビュー完了

---

**承認**: _____________
**日付**: _____________
