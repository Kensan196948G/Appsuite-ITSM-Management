# AppSuite管理運用システム 運用マニュアル

**文書番号**: OPR-APPSUITE-001
**バージョン**: 2.0
**作成日**: 2026年1月20日
**最終更新日**: 2026年2月4日

---

## 1. はじめに

### 1.1 本書の目的
本書は、AppSuite管理運用システムの日常運用・管理作業について説明します。

### 1.2 対象読者
- システム管理者
- 運用担当者
- ヘルプデスク担当者

### 1.3 関連文書
- システム概要書(System-Overview).md
- 機能仕様書(Functional-Specification).md
- セキュリティ設計書(Security-Design).md

---

## 2. 日常運用

### 2.1 システム起動・停止

#### 2.1.1 起動確認（本番環境）

**HTTPSアクセス（推奨）**:
1. Webサーバー（Apache/Nginx）が起動していることを確認
2. ブラウザでHTTPS URLにアクセス: `https://appsuite-itsm.example.com/`
3. SSL証明書が有効であることを確認
4. ダッシュボード画面が表示されることを確認

**開発環境（ポート8888）**:
1. 簡易Webサーバーを起動
```bash
cd /path/to/Appsuite-ITSM-Management/WebUI-Production
npx http-server -p 8888 --cors
```
2. ブラウザでアクセス: `http://localhost:8888/`

#### 2.1.2 停止手順

**本番環境**:
```bash
# Apache の場合
sudo systemctl stop apache2

# Nginx の場合
sudo systemctl stop nginx

# 状態確認
sudo systemctl status apache2  # または nginx
```

**開発環境**:
```bash
# Ctrl+C でhttp-serverを停止
```

### 2.2 日次運用

#### 2.2.1 朝の確認作業

| No. | 確認項目 | 確認方法 | 対応 |
|-----|----------|----------|------|
| 1 | システムアクセス可否 | ブラウザでアクセス | 異常時は再起動 |
| 2 | API接続状態 | ヘッダーの接続ステータス確認 | 未接続時は設定確認 |
| 3 | 未解決インシデント | ダッシュボード確認 | 高優先度は即時対応 |
| 4 | 保留中の変更要求 | ダッシュボード確認 | 承認待ちを確認 |

#### 2.2.2 夕方の確認作業

| No. | 確認項目 | 確認方法 | 対応 |
|-----|----------|----------|------|
| 1 | 本日の操作ログ | 監査ログ画面で確認 | 不審な操作がないか確認 |
| 2 | バックアップ状態 | システム設定→バックアップ | 最終バックアップ日時確認 |

### 2.3 週次運用

#### 2.3.1 週次チェックリスト

| No. | 作業項目 | 実施日 | 担当 |
|-----|----------|--------|------|
| 1 | 監査ログレビュー | 月曜日 | 管理者 |
| 2 | インシデント傾向分析 | 金曜日 | 管理者 |
| 3 | バックアップ検証 | 金曜日 | 管理者 |

### 2.4 月次運用

#### 2.4.1 月次チェックリスト

| No. | 作業項目 | 実施日 | 担当 |
|-----|----------|--------|------|
| 1 | ユーザーアカウント棚卸 | 月初 | 管理者 |
| 2 | アプリ一覧棚卸 | 月初 | 管理者 |
| 3 | ログエクスポート・保管 | 月末 | 管理者 |
| 4 | 完全バックアップ取得 | 月末 | 管理者 |

---

## 3. ユーザー管理

### 3.1 ユーザー登録

#### 3.1.1 手順

1. サイドメニューから「ユーザー管理」を選択
2. 「新規ユーザー」ボタンをクリック
3. 以下の情報を入力
   - ユーザー名（必須）
   - メールアドレス（必須）
   - 部署
   - 権限（管理者/ユーザー）
   - ステータス（有効/無効）
4. 「保存」ボタンをクリック

#### 3.1.2 注意事項
- メールアドレスは重複不可
- 管理者権限は必要最小限のユーザーにのみ付与
- 新規ユーザーには初期パスワード設定が必要（別途通知）

### 3.2 ユーザー編集

#### 3.2.1 手順

1. ユーザー一覧で対象ユーザーの「✏️」ボタンをクリック
2. 必要な情報を修正
3. 「保存」ボタンをクリック

### 3.3 ユーザー削除

#### 3.3.1 手順

1. ユーザー一覧で対象ユーザーの「🗑️」ボタンをクリック
2. 確認ダイアログで「OK」をクリック

#### 3.3.2 注意事項
- 削除前に担当インシデント・変更要求がないか確認
- 削除は取り消し不可（バックアップから復元が必要）

### 3.4 権限変更

#### 3.4.1 管理者権限への昇格

1. 対象ユーザーを編集
2. 権限を「管理者」に変更
3. 上長の承認を得てから実施

#### 3.4.2 権限降格

1. 対象ユーザーを編集
2. 権限を「ユーザー」に変更
3. 担当業務の引き継ぎを確認

---

## 4. アプリ管理

### 4.1 アプリ登録

#### 4.1.1 手順

1. サイドメニューから「アプリ管理」を選択
2. 「新規アプリ」ボタンをクリック
3. 以下の情報を入力
   - アプリ名（必須）
   - カテゴリ（必須）
   - 作成者（必須）
   - 説明
   - ステータス
4. 「保存」ボタンをクリック

### 4.2 ステータス管理

| ステータス | 意味 | 対応 |
|-----------|------|------|
| 稼働中 | 正常稼働 | 通常運用 |
| メンテナンス | 保守作業中 | ユーザーへ事前通知 |
| 停止中 | サービス停止 | 利用不可を周知 |

### 4.3 アプリ棚卸

#### 4.3.1 棚卸手順

1. アプリ一覧を全件表示
2. 各アプリの利用状況を確認
3. 未使用アプリは「停止中」に変更
4. 長期未使用は削除を検討

---

## 5. インシデント管理

### 5.1 インシデント対応フロー

```
[発生・検知] → [登録] → [割当] → [調査] → [対応] → [解決] → [クローズ]
```

### 5.2 インシデント登録

#### 5.2.1 手順

1. サイドメニューから「インシデント管理」を選択
2. 「新規インシデント」ボタンをクリック
3. 以下の情報を入力
   - タイトル（必須）：問題を簡潔に記述
   - 対象アプリ（必須）：関連するアプリを選択
   - 優先度（必須）：高/中/低
   - 報告者（必須）：報告した人の名前
   - 担当者：対応担当者を選択
   - 説明（必須）：詳細な状況を記述
4. 「保存」ボタンをクリック

### 5.3 優先度の判断基準

| 優先度 | 基準 | 対応目標時間 |
|--------|------|-------------|
| 高 | 業務停止、データ損失のリスク | 4時間以内 |
| 中 | 業務に支障があるが継続可能 | 24時間以内 |
| 低 | 軽微な問題、改善要望 | 72時間以内 |

### 5.4 ステータス更新

#### 5.4.1 ステータス遷移ルール

| 現状態 | 遷移可能先 | 条件 |
|--------|-----------|------|
| オープン | 対応中 | 担当者を割当 |
| 対応中 | 解決済み | 問題が解決 |
| 対応中 | オープン | 差し戻し（再調査必要） |
| 解決済み | クローズ | 報告者が確認完了 |
| 解決済み | 対応中 | 解決していない場合 |

### 5.5 エスカレーション

#### 5.5.1 エスカレーション条件
- 高優先度で24時間未対応
- 対応が停滞している場合
- 技術的に解決困難な場合

#### 5.5.2 エスカレーション先
1. チームリーダー
2. システム管理者
3. ベンダーサポート

---

## 6. 変更管理

### 6.1 変更要求フロー

```
[申請] → [承認申請] → [レビュー] → [承認/却下] → [実装] → [テスト] → [完了]
```

### 6.2 変更要求登録

#### 6.2.1 手順

1. サイドメニューから「変更管理」を選択
2. 「新規変更要求」ボタンをクリック
3. 以下の情報を入力
   - タイトル（必須）
   - 対象アプリ（必須）
   - タイプ（機能追加/機能変更/バグ修正/改善）
   - 説明（必須）：変更内容と理由
   - 予定実施日
4. 「保存」ボタンをクリック（下書き保存）

### 6.3 承認プロセス

#### 6.3.1 承認申請

1. 下書きの変更要求を開く
2. ステータスを「承認待ち」に変更
3. 承認者に通知が送信される

#### 6.3.2 承認/却下（管理者のみ）

1. 変更要求の内容を確認
2. 影響範囲、リスクを評価
3. 「承認」または「却下」を選択
4. コメントを記入（任意）

### 6.4 変更実施

#### 6.4.1 実施前チェック
- [ ] バックアップ取得完了
- [ ] 影響ユーザーへの事前通知完了
- [ ] ロールバック手順の準備
- [ ] テスト環境での動作確認完了

#### 6.4.2 実施後チェック
- [ ] 変更内容の動作確認
- [ ] エラーログの確認
- [ ] ユーザーからのフィードバック確認

---

## 7. 監査ログ管理

### 7.1 ログ検索

#### 7.1.1 検索手順

1. サイドメニューから「監査ログ」を選択
2. 検索条件を設定
   - 日付範囲（From〜To）
   - 操作タイプ（ログイン/作成/更新/削除等）
   - 対象（ユーザー/アプリ/インシデント等）
3. 「検索」ボタンをクリック

### 7.2 ログエクスポート

#### 7.2.1 手順

1. 必要な条件でログを検索
2. 「エクスポート」ボタンをクリック
3. CSVファイルがダウンロードされる

#### 7.2.2 保管要件
- エクスポートファイルは安全な場所に保管
- 保管期間：最低1年間
- ファイル名例：`audit_log_202601.csv`

### 7.3 ログ監視ポイント

| 監視項目 | 異常の兆候 | 対応 |
|----------|-----------|------|
| ログイン失敗 | 同一ユーザーで連続失敗 | 不正アクセス調査 |
| 大量削除 | 短時間で多数の削除操作 | 意図確認・復元検討 |
| 権限変更 | 予定外の管理者権限付与 | 承認確認 |
| 深夜操作 | 業務時間外の操作 | 正当性確認 |

---

## 8. システム設定

### 8.1 API接続設定

#### 8.1.1 初期設定手順

1. システム設定→API接続タブを開く
2. DeskNet's Neoの管理画面からAPIキーを取得
3. 以下を入力
   - API URL：`https://your-domain.desknets.com/cgi-bin/dneo/zap.cgi`
   - APIキー：取得したキー
   - 認証方式：Bearer Token（推奨）
4. 「接続テスト」で動作確認
5. 「保存」をクリック

#### 8.1.2 トラブルシューティング

| 症状 | 原因 | 対処 |
|------|------|------|
| 接続テスト失敗 | URL誤り | URLを確認 |
| 認証エラー | APIキー期限切れ | 再発行 |
| タイムアウト | ネットワーク問題 | タイムアウト値を増やす |

### 8.2 通知設定

#### 8.2.1 SMTP設定

1. システム設定→通知設定タブを開く
2. SMTPサーバー情報を入力
   - SMTPホスト
   - SMTPポート（通常587）
   - ユーザー名
   - パスワード
   - SSL/TLS使用
3. 「テスト送信」で動作確認
4. 「保存」をクリック

### 8.3 バックアップ管理

#### 8.3.1 手動バックアップ

1. システム設定→バックアップタブを開く
2. 「バックアップ作成」ボタンをクリック
3. JSONファイルがダウンロードされる
4. 安全な場所に保管

**バックアップファイル命名規則**:
```
appsuite_backup_YYYYMMDD_HHMMSS.json
例: appsuite_backup_20260204_143025.json
```

#### 8.3.2 リストア

1. 「バックアップファイル」で復元ファイルを選択
2. 「リストア実行」をクリック
3. 確認ダイアログで「OK」
4. ページが自動リロードされる

⚠️ **注意**: リストアは現在のデータを全て上書きします

#### 8.3.3 バックアップスケジュール

| バックアップ種別 | 頻度 | 保持期間 | 実施時刻 | 担当 |
|----------------|------|---------|---------|------|
| 日次バックアップ | 毎日 | 7世代 | 毎日2:00 AM | 自動/運用チーム |
| 週次バックアップ | 週1回 | 4週間 | 日曜3:00 AM | 運用チーム |
| 月次バックアップ | 月1回 | 12ヶ月 | 月初4:00 AM | 管理者 |

#### 8.3.4 バックアップ検証手順

**毎月第1金曜日に実施**:

1. 前月のバックアップファイルを選択
2. テスト環境でリストアを実行
3. データの整合性を確認
   - ユーザー数が一致するか
   - アプリ数が一致するか
   - 監査ログが読み込めるか
4. 検証結果をログに記録

**検証チェックリスト**:
- [ ] バックアップファイルが破損していない
- [ ] リストアが正常に完了する
- [ ] 全データが復元される
- [ ] 画面が正常に表示される

---

## 9. セキュリティ運用

### 9.1 セキュリティ脆弱性対応履歴

#### 9.1.1 Phase 4で修正した脆弱性（CVE-001～004）

| CVE番号 | 脆弱性 | 影響度 | 修正内容 | 対策実施日 |
|---------|--------|--------|---------|-----------|
| CVE-001 | XSS脆弱性 | 高 | 出力エスケープ強化 | 2026年1月25日 |
| CVE-002 | CSRF脆弱性 | 中 | CSRFトークン実装 | 2026年1月25日 |
| CVE-003 | セッション固定攻撃 | 中 | セッション再生成実装 | 2026年1月26日 |
| CVE-004 | 情報漏洩リスク | 低 | エラーメッセージ最適化 | 2026年1月26日 |

#### 9.1.2 運用上の注意点

**CVE-001（XSS脆弱性）対策後の注意**:
- ユーザー入力は全て `escapeHtml()` 関数でエスケープされます
- HTMLタグを含むデータは自動的に無害化されます
- 影響：なし（内部処理のみ）

**CVE-002（CSRF脆弱性）対策後の注意**:
- 全ての更新操作にCSRFトークンが必要です
- トークンは自動生成・検証されます
- 影響：なし（内部処理のみ）

**CVE-003（セッション固定攻撃）対策後の注意**:
- ログイン後にセッションIDが自動更新されます
- 既存セッションは無効化されます
- 影響：ユーザーは再ログインが必要な場合があります

**CVE-004（情報漏洩）対策後の注意**:
- エラーメッセージは一般的な内容に統一されました
- 詳細なエラーはサーバーログに記録されます
- 影響：なし

### 9.2 SSL/HTTPS運用

#### 9.2.1 SSL証明書管理

**証明書の確認**:
```bash
# 証明書の有効期限確認
openssl x509 -in /etc/ssl/certs/appsuite-itsm.crt -noout -enddate

# 証明書の詳細確認
openssl x509 -in /etc/ssl/certs/appsuite-itsm.crt -noout -text
```

**証明書更新チェックリスト**:
- [ ] 証明書の有効期限を確認（残30日以下で更新）
- [ ] 新しい証明書をCAから取得
- [ ] バックアップディレクトリに現在の証明書をバックアップ
- [ ] 新しい証明書をインストール
- [ ] Webサーバーの設定を更新
- [ ] Webサーバーを再起動
- [ ] HTTPSアクセスを確認
- [ ] SSL Labs（ssllabs.com）でA評価以上を確認

#### 9.2.2 セキュリティヘッダー確認

**毎月第1金曜日に実施**:

```bash
# セキュリティヘッダー確認
curl -I https://appsuite-itsm.example.com/ | grep -E "(Strict-Transport-Security|X-Content-Type-Options|X-Frame-Options|Content-Security-Policy)"

# 期待される出力:
# Strict-Transport-Security: max-age=31536000; includeSubDomains
# X-Content-Type-Options: nosniff
# X-Frame-Options: SAMEORIGIN
# Content-Security-Policy: default-src 'self'...
```

### 9.3 アクセス制御

#### 9.3.1 権限管理ポリシー

**管理者権限の付与基準**:
- システム管理業務を担当する者
- 上長の承認が得られている者
- セキュリティ研修を受講済みの者

**権限変更時の手順**:
1. 権限変更申請書を提出（社内フォーム）
2. 上長の承認を取得
3. システム管理者が権限を変更
4. 監査ログに記録
5. 変更通知をユーザーに送信

#### 9.3.2 定期的な権限レビュー

**四半期ごとに実施**:

1. 全ユーザーの権限一覧をエクスポート
2. 以下を確認
   - 退職者・異動者のアカウントが有効になっていないか
   - 不要な管理者権限が付与されていないか
   - 長期間未使用のアカウントがないか
3. 不適切な権限は即座に修正
4. レビュー結果を記録・報告

### 9.4 セキュリティインシデント対応

#### 9.4.1 セキュリティインシデントの定義

| レベル | 定義 | 例 |
|--------|------|-----|
| **重大** | データ漏洩、システム侵害 | 不正アクセス、マルウェア感染 |
| **高** | 不正な操作、セキュリティポリシー違反 | 権限昇格の試み、大量ログイン失敗 |
| **中** | 軽微なセキュリティ問題 | 弱いパスワードの使用 |
| **低** | セキュリティ警告 | SSL証明書期限切れ警告 |

#### 9.4.2 インシデント対応フロー

```
【重大・高レベルのインシデント発生時】
  ↓
①発見・検知（監視ツール/運用担当者）
  ↓
②即座に管理者へ報告（5分以内）
  ↓
③初動対応（15分以内）
  - 影響範囲の特定
  - 該当アカウントのロック
  - 不正アクセスの遮断
  ↓
④詳細調査
  - 監査ログの分析
  - アクセスログの確認
  - 影響を受けたデータの特定
  ↓
⑤対処・復旧
  - 脆弱性の修正
  - パスワードリセット
  - データの復旧
  ↓
⑥報告・再発防止
  - インシデントレポート作成
  - 関係者への報告
  - 再発防止策の実施
```

### 9.5 パスワードポリシー運用

#### 9.5.1 デフォルトパスワードポリシー

| 項目 | 設定値 |
|------|--------|
| 最小文字数 | 8文字 |
| 大文字必須 | 有効 |
| 数字必須 | 有効 |
| 特殊文字必須 | 無効（推奨: 有効） |
| パスワード有効期限 | 90日（Phase 5で実装予定） |

#### 9.5.2 パスワードリセット手順

**ユーザーからの依頼時**:
1. ユーザー本人確認（メール、電話等）
2. システム設定→ユーザー管理
3. 対象ユーザーを編集
4. 「パスワードリセット」をクリック
5. 仮パスワードを生成・記録
6. ユーザーに安全な方法で仮パスワードを通知
7. 初回ログイン時にパスワード変更を促す

---

## 10. トラブルシューティング

### 9.1 よくある問題と対処

#### 9.1.1 画面が表示されない

| 確認項目 | 対処 |
|----------|------|
| ブラウザのJavaScript | 有効化する |
| ブラウザキャッシュ | クリアして再読み込み |
| ネットワーク接続 | 接続状態を確認 |

#### 9.1.2 データが保存されない

| 確認項目 | 対処 |
|----------|------|
| localStorage空き容量 | 古いデータを削除 |
| プライベートブラウズ | 通常モードで使用 |
| ブラウザ設定 | Cookie/ストレージ許可 |

#### 9.1.3 API接続エラー

| エラー内容 | 対処 |
|-----------|------|
| 401 Unauthorized | APIキーを確認・再発行 |
| 404 Not Found | URLを確認 |
| 500 Internal Server Error | DeskNet's Neo側の確認 |
| Timeout | タイムアウト値を増やす |

### 9.2 緊急時対応

#### 9.2.1 データ消失時

1. 直近のバックアップファイルを確認
2. リストアを実行
3. バックアップ後の変更は手動で再入力

#### 9.2.2 システム障害時

1. エラーメッセージを記録
2. ブラウザコンソールのエラーを確認
3. サーバーログを確認
4. 必要に応じてベンダーに連絡

### 10.4 性能問題のトラブルシューティング

#### 10.4.1 画面表示が遅い

| 確認項目 | 対処 |
|----------|------|
| ブラウザキャッシュ | キャッシュクリア（Ctrl+Shift+Delete） |
| ネットワーク速度 | 速度測定ツールで確認 |
| サーバーリソース | CPU/メモリ使用率を確認 |
| データ量 | 古いログを削除・アーカイブ |
| ブラウザ拡張機能 | 無効化して確認 |

#### 10.4.2 大量データ処理時の注意

**監査ログが10,000件を超えた場合**:
1. 古いログをエクスポート
2. システム設定→監査ログ
3. 「古いログを削除」（30日以前のログ）
4. エクスポートしたファイルを安全に保管

---

## 11. パフォーマンス監視

### 11.1 監視項目

#### 11.1.1 日次監視

| 項目 | 確認方法 | 閾値 | 対応 |
|------|---------|------|------|
| ページ読み込み速度 | ブラウザ開発者ツール | 3秒以内 | キャッシュ設定見直し |
| エラー発生率 | 監査ログ確認 | 1%未満 | エラー原因調査 |
| アクティブユーザー数 | ダッシュボード | - | 傾向分析 |

#### 11.1.2 週次監視

| 項目 | 確認方法 | 閾値 | 対応 |
|------|---------|------|------|
| データベースサイズ | localStorage容量 | 5MB未満 | データクリーンアップ |
| 未解決インシデント数 | ダッシュボード | 10件未満 | 対応促進 |
| バックアップ成功率 | バックアップログ | 100% | 失敗原因調査 |

### 11.2 定期メンテナンス

#### 11.2.1 月次メンテナンス（毎月第1金曜日）

**実施時間**: 20:00-21:00（業務時間外）

**作業内容**:
1. [ ] 完全バックアップ取得
2. [ ] 監査ログのエクスポート・アーカイブ
3. [ ] 古いログの削除（30日以前）
4. [ ] ユーザーアカウント棚卸
5. [ ] アプリ一覧棚卸
6. [ ] SSL証明書有効期限確認
7. [ ] セキュリティヘッダー確認
8. [ ] Webサーバーログのローテーション
9. [ ] システムアップデート確認

#### 11.2.2 四半期メンテナンス

**実施時間**: 土曜日午前

**作業内容**:
1. [ ] 権限レビュー
2. [ ] バックアップ検証
3. [ ] 性能レビュー
4. [ ] セキュリティレビュー
5. [ ] ユーザー満足度調査
6. [ ] 改善計画の策定

### 11.3 システムアップデート手順

#### 11.3.1 軽微なアップデート（バグ修正等）

1. **準備**
   - リリースノートを確認
   - バックアップを取得
   - 影響範囲を確認

2. **ステージング環境でテスト**
   - アップデートを適用
   - 全機能の動作確認
   - 問題がないことを確認

3. **本番環境へ適用**
   - メンテナンス通知（24時間前）
   - 業務時間外に実施
   - 適用後の動作確認

4. **事後確認**
   - エラーログ確認
   - ユーザーフィードバック収集

#### 11.3.2 重大なアップデート（機能追加等）

1. **計画**
   - 変更管理プロセスに従う
   - CABで承認を取得

2. **テスト**
   - ステージング環境で十分にテスト
   - ユーザー受入テスト（UAT）実施

3. **リリース**
   - Phase 5リリース計画書に従う
   - ロールバック計画を準備

4. **フォローアップ**
   - 1週間の集中監視
   - ユーザートレーニング実施

---

## 12. 連絡先

### 10.1 サポート連絡先

| 区分 | 連絡先 | 対応時間 |
|------|--------|----------|
| 社内ヘルプデスク | helpdesk@example.com | 平日9:00-18:00 |
| システム管理者 | admin@example.com | 平日9:00-18:00 |
| 緊急連絡先 | 090-xxxx-xxxx | 24時間 |

### 10.2 ベンダー連絡先

| ベンダー | 連絡先 | 契約番号 |
|----------|--------|----------|
| ネオジャパン（DeskNet's Neo） | サポート窓口 | XXXX-XXXX |

---

**文書履歴**

| バージョン | 日付 | 変更内容 | 作成者 |
|-----------|------|----------|--------|
| 1.0 | 2026-01-20 | 初版作成 | - |
| 2.0 | 2026-02-04 | Phase 4/5実績反映、セキュリティ対策追加、SSL/HTTPS運用追加、性能監視・定期メンテナンス追加 | システム管理者 |
