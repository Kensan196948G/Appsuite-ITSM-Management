# AppSuite 管理運用システム - 本番稼働ガイド

## 目次

1. [システム概要](#システム概要)
2. [動作要件](#動作要件)
3. [インストール手順](#インストール手順)
4. [初期設定](#初期設定)
5. [DeskNet's Neo API連携設定](#desknets-neo-api連携設定)
6. [セキュリティ設定](#セキュリティ設定)
7. [運用手順](#運用手順)
8. [バックアップと復旧](#バックアップと復旧)
9. [トラブルシューティング](#トラブルシューティング)
10. [カスタマイズ](#カスタマイズ)

---

## システム概要

本システムは、DeskNet's Neo / AppSuiteの管理運用を行うWebアプリケーションです。

### 主要機能

| 機能 | 説明 |
|------|------|
| ダッシュボード | システム全体の統計情報表示 |
| ユーザー管理 | ユーザーの追加・編集・削除・権限管理 |
| アプリ管理 | AppSuiteアプリの一覧・設定管理 |
| インシデント管理 | 障害・不具合の登録・追跡・解決管理 |
| 変更管理 | 機能追加・改善要求の管理・承認フロー |
| 監査ログ | 全操作の記録・検索・エクスポート |
| システム設定 | API接続・セキュリティ・通知・ワークフロー設定 |

### アーキテクチャ

```
┌─────────────────────────────────────────────────────┐
│                    Webブラウザ                       │
│  ┌─────────────────────────────────────────────┐   │
│  │           AppSuite 管理運用システム            │   │
│  │  ┌─────────┬─────────┬─────────┬─────────┐  │   │
│  │  │ HTML    │ CSS     │ JS      │ Data    │  │   │
│  │  │ UI      │ Style   │ Logic   │ Store   │  │   │
│  │  └─────────┴─────────┴─────────┴─────────┘  │   │
│  └─────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────┐
│              DeskNet's Neo API                       │
│              (オプション連携)                         │
└─────────────────────────────────────────────────────┘
```

---

## 動作要件

### クライアント（必須）

| 項目 | 要件 |
|------|------|
| ブラウザ | Chrome 90+, Firefox 88+, Safari 14+, Edge 90+ |
| JavaScript | 有効であること |
| 画面解像度 | 1024x768 以上（推奨: 1920x1080） |
| ネットワーク | インターネット接続（Font Awesome読み込み用） |

### サーバー（Webサーバーを使用する場合）

| 項目 | 要件 |
|------|------|
| Webサーバー | Apache 2.4+, Nginx 1.18+, IIS 10+ |
| HTTPS | 本番環境では必須 |
| ストレージ | 10MB以上 |

### DeskNet's Neo連携（オプション）

| 項目 | 要件 |
|------|------|
| バージョン | DeskNet's Neo V7.0 以降 |
| 権限 | システム管理者権限 |
| APIアクセス | 有効化されていること |

---

## インストール手順

### 方法1: ローカルファイルとして使用

1. ファイル一式を任意のフォルダに配置
   ```
   itsm-admin/
   ├── index.html
   ├── css/
   │   └── styles.css
   ├── js/
   │   ├── api.js
   │   ├── modules.js
   │   └── app.js
   └── README.md
   ```

2. `index.html` をブラウザで開く

### 方法2: Webサーバーに配置

#### Apache の場合

1. ドキュメントルートにファイルを配置
   ```bash
   cp -r itsm-admin /var/www/html/
   ```

2. `.htaccess` を作成（オプション）
   ```apache
   # キャッシュ設定
   <IfModule mod_expires.c>
       ExpiresActive On
       ExpiresByType text/html "access plus 1 hour"
       ExpiresByType text/css "access plus 1 week"
       ExpiresByType application/javascript "access plus 1 week"
   </IfModule>

   # セキュリティヘッダー
   <IfModule mod_headers.c>
       Header set X-Content-Type-Options "nosniff"
       Header set X-Frame-Options "SAMEORIGIN"
       Header set X-XSS-Protection "1; mode=block"
   </IfModule>
   ```

#### Nginx の場合

1. ファイルを配置
   ```bash
   cp -r itsm-admin /usr/share/nginx/html/
   ```

2. 設定ファイル例
   ```nginx
   server {
       listen 443 ssl;
       server_name appsuite-admin.example.com;

       root /usr/share/nginx/html/itsm-admin;
       index index.html;

       # SSL設定
       ssl_certificate /path/to/cert.pem;
       ssl_certificate_key /path/to/key.pem;

       # セキュリティヘッダー
       add_header X-Content-Type-Options "nosniff";
       add_header X-Frame-Options "SAMEORIGIN";
       add_header X-XSS-Protection "1; mode=block";

       # キャッシュ設定
       location ~* \.(css|js)$ {
           expires 7d;
       }

       location / {
           try_files $uri $uri/ /index.html;
       }
   }
   ```

---

## 初期設定

### 1. 基本設定

システム設定 → 基本設定 で以下を設定：

| 項目 | 設定内容 | 例 |
|------|----------|-----|
| システム名 | 表示名称 | 「○○株式会社 AppSuite管理」 |
| 組織名 | 会社・部署名 | 「○○株式会社 情報システム部」 |
| 管理者メール | 通知送信先 | admin@example.com |
| テーマ | 画面テーマ | ライト / ダーク |
| 日付形式 | 日付表示形式 | yyyy-MM-dd |
| 表示件数 | 一覧の件数 | 25件 |

### 2. 初期ユーザー登録

ユーザー管理 → 新規ユーザー で管理者アカウントを作成：

1. ユーザー名: 管理者の名前
2. メールアドレス: 連絡先メール
3. 部署: 所属部署
4. 権限: **管理者**

### 3. アプリ登録

アプリ管理 → 新規アプリ でAppSuiteアプリを登録：

1. アプリ名: AppSuiteのアプリ名
2. カテゴリ: 業務管理 / 申請・承認 / データ管理 / その他
3. 説明: アプリの用途

---

## DeskNet's Neo API連携設定

### APIキーの取得

1. DeskNet's Neo管理画面にログイン
2. 「システム管理」→「API設定」を開く
3. 「APIキーを発行」をクリック
4. 発行されたAPIキーをコピー

### 接続設定

システム設定 → API接続 で以下を設定：

| 項目 | 設定値 |
|------|--------|
| API URL | `https://your-domain.desknets.com/cgi-bin/dneo/zap.cgi` |
| APIキー | 発行されたAPIキー |
| 認証方式 | Bearer Token（推奨） |
| タイムアウト | 30秒 |
| 自動同期間隔 | 15分 |

### 接続テスト

1. 設定入力後「接続テスト」をクリック
2. 「接続成功」と表示されることを確認
3. 「保存」をクリック

---

## セキュリティ設定

### パスワードポリシー（推奨設定）

| 項目 | 推奨値 | 説明 |
|------|--------|------|
| 最小文字数 | 12 | セキュリティ強化のため |
| 大文字必須 | ✓ | 複雑性向上 |
| 数字必須 | ✓ | 複雑性向上 |
| 特殊文字必須 | ✓ | 高セキュリティ環境向け |
| 有効期限 | 90日 | 定期的な変更を強制 |

### セッション設定（推奨設定）

| 項目 | 推奨値 | 説明 |
|------|--------|------|
| タイムアウト | 30分 | 離席時の自動ログアウト |
| 最大同時ログイン | 1 | 不正利用防止 |
| 二要素認証 | 有効 | 高セキュリティ環境向け |

### ログイン制限（推奨設定）

| 項目 | 推奨値 | 説明 |
|------|--------|------|
| 失敗許容回数 | 5回 | ブルートフォース対策 |
| ロック時間 | 15分 | 自動解除までの時間 |

### Webサーバーセキュリティ

本番環境では以下を必ず実施：

1. **HTTPS化**: SSL/TLS証明書を導入
2. **アクセス制限**: 社内ネットワークからのみアクセス可能に
3. **認証追加**: Basic認証またはSSO連携を検討

---

## 運用手順

### 日次作業

| 作業 | 手順 |
|------|------|
| インシデント確認 | ダッシュボードで未解決インシデント数を確認 |
| 変更要求確認 | 承認待ちの変更要求を確認・対応 |
| ログ確認 | 監査ログで異常なアクセスがないか確認 |

### 週次作業

| 作業 | 手順 |
|------|------|
| バックアップ | システム設定 → バックアップ → バックアップ作成 |
| 統計レビュー | ダッシュボードの統計を確認・報告 |

### 月次作業

| 作業 | 手順 |
|------|------|
| ユーザー棚卸 | 不要なユーザーの無効化・削除 |
| ログエクスポート | 監査ログをCSVエクスポートして保管 |
| 設定見直し | ワークフロー設定の妥当性を確認 |

---

## バックアップと復旧

### バックアップ種類

| 種類 | 内容 | 推奨頻度 |
|------|------|----------|
| 自動バックアップ | localStorage自動保存 | 毎日 |
| 手動バックアップ | JSONファイルダウンロード | 週1回以上 |
| データエクスポート | マスタデータのみ | 月1回 |

### 手動バックアップ手順

1. システム設定 → バックアップ を開く
2. 「バックアップ作成」をクリック
3. JSONファイルがダウンロードされる
4. ファイルを安全な場所に保管

### 復旧手順

1. システム設定 → バックアップ を開く
2. 「バックアップファイル」でJSONファイルを選択
3. 「リストア実行」をクリック
4. 確認ダイアログで「OK」をクリック

### バックアップファイル構成

```json
{
  "version": "1.0.0",
  "timestamp": "2026-01-20T10:00:00.000Z",
  "settings": { /* システム設定 */ },
  "users": [ /* ユーザーデータ */ ],
  "apps": [ /* アプリデータ */ ],
  "incidents": [ /* インシデントデータ */ ],
  "changes": [ /* 変更要求データ */ ],
  "logs": [ /* 監査ログ */ ]
}
```

---

## トラブルシューティング

### 画面が表示されない

| 原因 | 対処法 |
|------|--------|
| JavaScript無効 | ブラウザ設定でJavaScriptを有効化 |
| キャッシュ問題 | Ctrl+F5で強制リロード |
| ブラウザ非対応 | 対応ブラウザを使用 |

### データが消えた

| 原因 | 対処法 |
|------|--------|
| ブラウザデータ削除 | バックアップからリストア |
| シークレットモード | 通常モードで使用 |
| localStorage上限 | 古いログを削除 |

### API接続エラー

| エラー | 原因 | 対処法 |
|--------|------|--------|
| 接続タイムアウト | ネットワーク問題 | ネットワーク確認、タイムアウト値増加 |
| 認証エラー | APIキー不正 | APIキーを再発行・再設定 |
| 403 Forbidden | 権限不足 | DeskNet's Neo側で権限確認 |

### 動作が遅い

| 原因 | 対処法 |
|------|--------|
| データ量過多 | 古いログを削除、表示件数を減らす |
| ブラウザ問題 | ブラウザを再起動、他ブラウザで試行 |

---

## カスタマイズ

### 色・テーマの変更

`css/styles.css` の `:root` セクションを編集：

```css
:root {
    --primary-color: #2563eb;    /* メインカラー */
    --primary-dark: #1d4ed8;     /* メインカラー（濃） */
    --success-color: #22c55e;    /* 成功色 */
    --warning-color: #f59e0b;    /* 警告色 */
    --danger-color: #ef4444;     /* エラー色 */
    --bg-color: #f1f5f9;         /* 背景色 */
    --card-bg: #ffffff;          /* カード背景色 */
}
```

### ロゴの追加

`index.html` のサイドバーヘッダーを編集：

```html
<div class="sidebar-header">
    <img src="logo.png" alt="ロゴ" style="max-width:150px;">
    <h1>AppSuite管理</h1>
</div>
```

### 新しいカテゴリ追加

`index.html` のカテゴリ選択部分を編集：

```html
<select id="appCategoryFilter">
    <option value="">すべてのカテゴリ</option>
    <option value="業務管理">業務管理</option>
    <option value="申請・承認">申請・承認</option>
    <option value="新カテゴリ">新カテゴリ</option> <!-- 追加 -->
</select>
```

---

## お問い合わせ

本システムに関するお問い合わせは、システム管理者までご連絡ください。

---

**ドキュメントバージョン**: 1.0.0
**最終更新日**: 2026年1月20日
